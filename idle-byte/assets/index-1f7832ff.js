var _a2,__defProp=Object.defineProperty,__publicField=(obj,key,value)=>(((obj,key,value)=>{key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value:value}):obj[key]=value})(obj,"symbol"!=typeof key?key+"":key,value),value);function makeMap(str,expectsLowerCase){const map=Object.create(null),list=str.split(",");for(let i=0;i<list.length;i++)map[list[i]]=!0;return expectsLowerCase?val=>!!map[val.toLowerCase()]:val=>!!map[val]}function normalizeStyle(value){if(isArray$1(value)){const res={};for(let i=0;i<value.length;i++){const item=value[i],normalized=isString(item)?parseStringStyle(item):normalizeStyle(item);if(normalized)for(const key in normalized)res[key]=normalized[key]}return res}return isString(value)||isObject(value)?value:void 0}!function polyfill(){const relList=document.createElement("link").relList;if(!(relList&&relList.supports&&relList.supports("modulepreload"))){for(const link of document.querySelectorAll('link[rel="modulepreload"]'))processPreload(link);new MutationObserver((mutations=>{for(const mutation of mutations)if("childList"===mutation.type)for(const node of mutation.addedNodes)"LINK"===node.tagName&&"modulepreload"===node.rel&&processPreload(node)})).observe(document,{childList:!0,subtree:!0})}function processPreload(link){if(link.ep)return;link.ep=!0;const fetchOpts=function getFetchOpts(script){const fetchOpts={};return script.integrity&&(fetchOpts.integrity=script.integrity),script.referrerpolicy&&(fetchOpts.referrerPolicy=script.referrerpolicy),"use-credentials"===script.crossorigin?fetchOpts.credentials="include":"anonymous"===script.crossorigin?fetchOpts.credentials="omit":fetchOpts.credentials="same-origin",fetchOpts}(link);fetch(link.href,fetchOpts)}}();const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*.*?\*\//gs;function parseStringStyle(cssText){const ret={};return cssText.replace(styleCommentRE,"").split(listDelimiterRE).forEach((item=>{if(item){const tmp=item.split(propertyDelimiterRE);tmp.length>1&&(ret[tmp[0].trim()]=tmp[1].trim())}})),ret}function normalizeClass(value){let res="";if(isString(value))res=value;else if(isArray$1(value))for(let i=0;i<value.length;i++){const normalized=normalizeClass(value[i]);normalized&&(res+=normalized+" ")}else if(isObject(value))for(const name in value)value[name]&&(res+=name+" ");return res.trim()}const isSpecialBooleanAttr=makeMap("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function includeBooleanAttr(value){return!!value||""===value}function looseEqual(a,b){if(a===b)return!0;let aValidType=isDate(a),bValidType=isDate(b);if(aValidType||bValidType)return!(!aValidType||!bValidType)&&a.getTime()===b.getTime();if(aValidType=isSymbol(a),bValidType=isSymbol(b),aValidType||bValidType)return a===b;if(aValidType=isArray$1(a),bValidType=isArray$1(b),aValidType||bValidType)return!(!aValidType||!bValidType)&&function looseCompareArrays(a,b){if(a.length!==b.length)return!1;let equal=!0;for(let i=0;equal&&i<a.length;i++)equal=looseEqual(a[i],b[i]);return equal}(a,b);if(aValidType=isObject(a),bValidType=isObject(b),aValidType||bValidType){if(!aValidType||!bValidType)return!1;if(Object.keys(a).length!==Object.keys(b).length)return!1;for(const key in a){const aHasKey=a.hasOwnProperty(key),bHasKey=b.hasOwnProperty(key);if(aHasKey&&!bHasKey||!aHasKey&&bHasKey||!looseEqual(a[key],b[key]))return!1}}return String(a)===String(b)}function looseIndexOf(arr,val){return arr.findIndex((item=>looseEqual(item,val)))}const toDisplayString=val=>isString(val)?val:null==val?"":isArray$1(val)||isObject(val)&&(val.toString===objectToString||!isFunction(val.toString))?JSON.stringify(val,replacer,2):String(val),replacer=(_key,val)=>val&&val.__v_isRef?replacer(_key,val.value):isMap(val)?{[`Map(${val.size})`]:[...val.entries()].reduce(((entries,[key,val2])=>(entries[`${key} =>`]=val2,entries)),{})}:isSet(val)?{[`Set(${val.size})`]:[...val.values()]}:!isObject(val)||isArray$1(val)||isPlainObject(val)?val:String(val),EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=key=>onRE.test(key),isModelListener=key=>key.startsWith("onUpdate:"),extend$1=Object.assign,remove=(arr,el)=>{const i=arr.indexOf(el);i>-1&&arr.splice(i,1)},hasOwnProperty=Object.prototype.hasOwnProperty,hasOwn$1=(val,key)=>hasOwnProperty.call(val,key),isArray$1=Array.isArray,isMap=val=>"[object Map]"===toTypeString(val),isSet=val=>"[object Set]"===toTypeString(val),isDate=val=>"[object Date]"===toTypeString(val),isFunction=val=>"function"==typeof val,isString=val=>"string"==typeof val,isSymbol=val=>"symbol"==typeof val,isObject=val=>null!==val&&"object"==typeof val,isPromise=val=>isObject(val)&&isFunction(val.then)&&isFunction(val.catch),objectToString=Object.prototype.toString,toTypeString=value=>objectToString.call(value),isPlainObject=val=>"[object Object]"===toTypeString(val),isIntegerKey=key=>isString(key)&&"NaN"!==key&&"-"!==key[0]&&""+parseInt(key,10)===key,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=fn=>{const cache=Object.create(null);return str=>cache[str]||(cache[str]=fn(str))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction((str=>str.replace(camelizeRE,((_,c)=>c?c.toUpperCase():"")))),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction((str=>str.replace(hyphenateRE,"-$1").toLowerCase())),capitalize=cacheStringFunction((str=>str.charAt(0).toUpperCase()+str.slice(1))),toHandlerKey=cacheStringFunction((str=>str?`on${capitalize(str)}`:"")),hasChanged=(value,oldValue)=>!Object.is(value,oldValue),invokeArrayFns=(fns,arg)=>{for(let i=0;i<fns.length;i++)fns[i](arg)},def=(obj,key,value)=>{Object.defineProperty(obj,key,{configurable:!0,enumerable:!1,value:value})},toNumber=val=>{const n=parseFloat(val);return isNaN(n)?val:n};let _globalThis;let activeEffectScope;class EffectScope{constructor(detached=!1){this.detached=detached,this.active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!detached&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}run(fn){if(this.active){const currentEffectScope=activeEffectScope;try{return activeEffectScope=this,fn()}finally{activeEffectScope=currentEffectScope}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(fromParent){if(this.active){let i,l;for(i=0,l=this.effects.length;i<l;i++)this.effects[i].stop();for(i=0,l=this.cleanups.length;i<l;i++)this.cleanups[i]();if(this.scopes)for(i=0,l=this.scopes.length;i<l;i++)this.scopes[i].stop(!0);if(!this.detached&&this.parent&&!fromParent){const last=this.parent.scopes.pop();last&&last!==this&&(this.parent.scopes[this.index]=last,last.index=this.index)}this.parent=void 0,this.active=!1}}}const createDep=effects=>{const dep=new Set(effects);return dep.w=0,dep.n=0,dep},wasTracked=dep=>(dep.w&trackOpBit)>0,newTracked=dep=>(dep.n&trackOpBit)>0,targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(fn,scheduler=null,scope){this.fn=fn,this.scheduler=scheduler,this.active=!0,this.deps=[],this.parent=void 0,function recordEffectScope(effect,scope=activeEffectScope){scope&&scope.active&&scope.effects.push(effect)}(this,scope)}run(){if(!this.active)return this.fn();let parent=activeEffect,lastShouldTrack=shouldTrack;for(;parent;){if(parent===this)return;parent=parent.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=30?(({deps:deps})=>{if(deps.length)for(let i=0;i<deps.length;i++)deps[i].w|=trackOpBit})(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=30&&(effect=>{const{deps:deps}=effect;if(deps.length){let ptr=0;for(let i=0;i<deps.length;i++){const dep=deps[i];wasTracked(dep)&&!newTracked(dep)?dep.delete(effect):deps[ptr++]=dep,dep.w&=~trackOpBit,dep.n&=~trackOpBit}deps.length=ptr}})(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=lastShouldTrack,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(effect){const{deps:deps}=effect;if(deps.length){for(let i=0;i<deps.length;i++)deps[i].delete(effect);deps.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const last=trackStack.pop();shouldTrack=void 0===last||last}function track(target,type2,key){if(shouldTrack&&activeEffect){let depsMap=targetMap.get(target);depsMap||targetMap.set(target,depsMap=new Map);let dep=depsMap.get(key);dep||depsMap.set(key,dep=createDep()),trackEffects(dep)}}function trackEffects(dep,debuggerEventExtraInfo){let shouldTrack2=!1;effectTrackDepth<=30?newTracked(dep)||(dep.n|=trackOpBit,shouldTrack2=!wasTracked(dep)):shouldTrack2=!dep.has(activeEffect),shouldTrack2&&(dep.add(activeEffect),activeEffect.deps.push(dep))}function trigger(target,type2,key,newValue,oldValue,oldTarget){const depsMap=targetMap.get(target);if(!depsMap)return;let deps=[];if("clear"===type2)deps=[...depsMap.values()];else if("length"===key&&isArray$1(target)){const newLength=toNumber(newValue);depsMap.forEach(((dep,key2)=>{("length"===key2||key2>=newLength)&&deps.push(dep)}))}else switch(void 0!==key&&deps.push(depsMap.get(key)),type2){case"add":isArray$1(target)?isIntegerKey(key)&&deps.push(depsMap.get("length")):(deps.push(depsMap.get(ITERATE_KEY)),isMap(target)&&deps.push(depsMap.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$1(target)||(deps.push(depsMap.get(ITERATE_KEY)),isMap(target)&&deps.push(depsMap.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(target)&&deps.push(depsMap.get(ITERATE_KEY))}if(1===deps.length)deps[0]&&triggerEffects(deps[0]);else{const effects=[];for(const dep of deps)dep&&effects.push(...dep);triggerEffects(createDep(effects))}}function triggerEffects(dep,debuggerEventExtraInfo){const effects=isArray$1(dep)?dep:[...dep];for(const effect of effects)effect.computed&&triggerEffect(effect);for(const effect of effects)effect.computed||triggerEffect(effect)}function triggerEffect(effect,debuggerEventExtraInfo){(effect!==activeEffect||effect.allowRecurse)&&(effect.scheduler?effect.scheduler():effect.run())}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter((key=>"arguments"!==key&&"caller"!==key)).map((key=>Symbol[key])).filter(isSymbol)),get=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const instrumentations={};return["includes","indexOf","lastIndexOf"].forEach((key=>{instrumentations[key]=function(...args){const arr=toRaw(this);for(let i=0,l=this.length;i<l;i++)track(arr,0,i+"");const res=arr[key](...args);return-1===res||!1===res?arr[key](...args.map(toRaw)):res}})),["push","pop","shift","unshift","splice"].forEach((key=>{instrumentations[key]=function(...args){pauseTracking();const res=toRaw(this)[key].apply(this,args);return resetTracking(),res}})),instrumentations}function createGetter(isReadonly2=!1,shallow=!1){return function get2(target,key,receiver){if("__v_isReactive"===key)return!isReadonly2;if("__v_isReadonly"===key)return isReadonly2;if("__v_isShallow"===key)return shallow;if("__v_raw"===key&&receiver===(isReadonly2?shallow?shallowReadonlyMap:readonlyMap:shallow?shallowReactiveMap:reactiveMap).get(target))return target;const targetIsArray=isArray$1(target);if(!isReadonly2&&targetIsArray&&hasOwn$1(arrayInstrumentations,key))return Reflect.get(arrayInstrumentations,key,receiver);const res=Reflect.get(target,key,receiver);return(isSymbol(key)?builtInSymbols.has(key):isNonTrackableKeys(key))?res:(isReadonly2||track(target,0,key),shallow?res:isRef(res)?targetIsArray&&isIntegerKey(key)?res:res.value:isObject(res)?isReadonly2?readonly(res):reactive(res):res)}}function createSetter(shallow=!1){return function set2(target,key,value,receiver){let oldValue=target[key];if(isReadonly(oldValue)&&isRef(oldValue)&&!isRef(value))return!1;if(!shallow&&(isShallow(value)||isReadonly(value)||(oldValue=toRaw(oldValue),value=toRaw(value)),!isArray$1(target)&&isRef(oldValue)&&!isRef(value)))return oldValue.value=value,!0;const hadKey=isArray$1(target)&&isIntegerKey(key)?Number(key)<target.length:hasOwn$1(target,key),result=Reflect.set(target,key,value,receiver);return target===toRaw(receiver)&&(hadKey?hasChanged(value,oldValue)&&trigger(target,"set",key,value):trigger(target,"add",key,value)),result}}const mutableHandlers={get:get,set:createSetter(),deleteProperty:function deleteProperty(target,key){const hadKey=hasOwn$1(target,key);target[key];const result=Reflect.deleteProperty(target,key);return result&&hadKey&&trigger(target,"delete",key,void 0),result},has:function has(target,key){const result=Reflect.has(target,key);return isSymbol(key)&&builtInSymbols.has(key)||track(target,0,key),result},ownKeys:function ownKeys(target){return track(target,0,isArray$1(target)?"length":ITERATE_KEY),Reflect.ownKeys(target)}},readonlyHandlers={get:readonlyGet,set:(target,key)=>!0,deleteProperty:(target,key)=>!0},shallowReactiveHandlers=extend$1({},mutableHandlers,{get:shallowGet,set:createSetter(!0)}),toShallow=value=>value,getProto$1=v=>Reflect.getPrototypeOf(v);function get$1(target,key,isReadonly2=!1,isShallow2=!1){const rawTarget=toRaw(target=target.__v_raw),rawKey=toRaw(key);isReadonly2||(key!==rawKey&&track(rawTarget,0,key),track(rawTarget,0,rawKey));const{has:has2}=getProto$1(rawTarget),wrap2=isShallow2?toShallow:isReadonly2?toReadonly:toReactive;return has2.call(rawTarget,key)?wrap2(target.get(key)):has2.call(rawTarget,rawKey)?wrap2(target.get(rawKey)):void(target!==rawTarget&&target.get(key))}function has$1(key,isReadonly2=!1){const target=this.__v_raw,rawTarget=toRaw(target),rawKey=toRaw(key);return isReadonly2||(key!==rawKey&&track(rawTarget,0,key),track(rawTarget,0,rawKey)),key===rawKey?target.has(key):target.has(key)||target.has(rawKey)}function size(target,isReadonly2=!1){return target=target.__v_raw,!isReadonly2&&track(toRaw(target),0,ITERATE_KEY),Reflect.get(target,"size",target)}function add(value){value=toRaw(value);const target=toRaw(this);return getProto$1(target).has.call(target,value)||(target.add(value),trigger(target,"add",value,value)),this}function set$1(key,value){value=toRaw(value);const target=toRaw(this),{has:has2,get:get2}=getProto$1(target);let hadKey=has2.call(target,key);hadKey||(key=toRaw(key),hadKey=has2.call(target,key));const oldValue=get2.call(target,key);return target.set(key,value),hadKey?hasChanged(value,oldValue)&&trigger(target,"set",key,value):trigger(target,"add",key,value),this}function deleteEntry(key){const target=toRaw(this),{has:has2,get:get2}=getProto$1(target);let hadKey=has2.call(target,key);hadKey||(key=toRaw(key),hadKey=has2.call(target,key)),get2&&get2.call(target,key);const result=target.delete(key);return hadKey&&trigger(target,"delete",key,void 0),result}function clear(){const target=toRaw(this),hadItems=0!==target.size,result=target.clear();return hadItems&&trigger(target,"clear",void 0,void 0),result}function createForEach(isReadonly2,isShallow2){return function forEach(callback,thisArg){const observed=this,target=observed.__v_raw,rawTarget=toRaw(target),wrap2=isShallow2?toShallow:isReadonly2?toReadonly:toReactive;return!isReadonly2&&track(rawTarget,0,ITERATE_KEY),target.forEach(((value,key)=>callback.call(thisArg,wrap2(value),wrap2(key),observed)))}}function createIterableMethod(method,isReadonly2,isShallow2){return function(...args){const target=this.__v_raw,rawTarget=toRaw(target),targetIsMap=isMap(rawTarget),isPair="entries"===method||method===Symbol.iterator&&targetIsMap,isKeyOnly="keys"===method&&targetIsMap,innerIterator=target[method](...args),wrap2=isShallow2?toShallow:isReadonly2?toReadonly:toReactive;return!isReadonly2&&track(rawTarget,0,isKeyOnly?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:value,done:done}=innerIterator.next();return done?{value:value,done:done}:{value:isPair?[wrap2(value[0]),wrap2(value[1])]:wrap2(value),done:done}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(type2){return function(...args){return"delete"!==type2&&this}}function createInstrumentations(){const mutableInstrumentations2={get(key){return get$1(this,key)},get size(){return size(this)},has:has$1,add:add,set:set$1,delete:deleteEntry,clear:clear,forEach:createForEach(!1,!1)},shallowInstrumentations2={get(key){return get$1(this,key,!1,!0)},get size(){return size(this)},has:has$1,add:add,set:set$1,delete:deleteEntry,clear:clear,forEach:createForEach(!1,!0)},readonlyInstrumentations2={get(key){return get$1(this,key,!0)},get size(){return size(this,!0)},has(key){return has$1.call(this,key,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},shallowReadonlyInstrumentations2={get(key){return get$1(this,key,!0,!0)},get size(){return size(this,!0)},has(key){return has$1.call(this,key,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach((method=>{mutableInstrumentations2[method]=createIterableMethod(method,!1,!1),readonlyInstrumentations2[method]=createIterableMethod(method,!0,!1),shallowInstrumentations2[method]=createIterableMethod(method,!1,!0),shallowReadonlyInstrumentations2[method]=createIterableMethod(method,!0,!0)})),[mutableInstrumentations2,readonlyInstrumentations2,shallowInstrumentations2,shallowReadonlyInstrumentations2]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(isReadonly2,shallow){const instrumentations=shallow?isReadonly2?shallowReadonlyInstrumentations:shallowInstrumentations:isReadonly2?readonlyInstrumentations:mutableInstrumentations;return(target,key,receiver)=>"__v_isReactive"===key?!isReadonly2:"__v_isReadonly"===key?isReadonly2:"__v_raw"===key?target:Reflect.get(hasOwn$1(instrumentations,key)&&key in target?instrumentations:target,key,receiver)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function getTargetType(value){return value.__v_skip||!Object.isExtensible(value)?0:function targetTypeMap(rawType){switch(rawType){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((value=>toTypeString(value).slice(8,-1))(value))}function reactive(target){return isReadonly(target)?target:createReactiveObject(target,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function readonly(target){return createReactiveObject(target,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(target,isReadonly2,baseHandlers,collectionHandlers,proxyMap){if(!isObject(target))return target;if(target.__v_raw&&(!isReadonly2||!target.__v_isReactive))return target;const existingProxy=proxyMap.get(target);if(existingProxy)return existingProxy;const targetType=getTargetType(target);if(0===targetType)return target;const proxy=new Proxy(target,2===targetType?collectionHandlers:baseHandlers);return proxyMap.set(target,proxy),proxy}function isReactive(value){return isReadonly(value)?isReactive(value.__v_raw):!(!value||!value.__v_isReactive)}function isReadonly(value){return!(!value||!value.__v_isReadonly)}function isShallow(value){return!(!value||!value.__v_isShallow)}function isProxy(value){return isReactive(value)||isReadonly(value)}function toRaw(observed){const raw=observed&&observed.__v_raw;return raw?toRaw(raw):observed}function markRaw(value){return def(value,"__v_skip",!0),value}const toReactive=value=>isObject(value)?reactive(value):value,toReadonly=value=>isObject(value)?readonly(value):value;function isRef(r){return!(!r||!0!==r.__v_isRef)}function unref(ref){return isRef(ref)?ref.value:ref}const shallowUnwrapHandlers={get:(target,key,receiver)=>unref(Reflect.get(target,key,receiver)),set:(target,key,value,receiver)=>{const oldValue=target[key];return isRef(oldValue)&&!isRef(value)?(oldValue.value=value,!0):Reflect.set(target,key,value,receiver)}};function proxyRefs(objectWithRefs){return isReactive(objectWithRefs)?objectWithRefs:new Proxy(objectWithRefs,shallowUnwrapHandlers)}var _a$2;class ComputedRefImpl{constructor(getter,_setter,isReadonly2,isSSR){this._setter=_setter,this.dep=void 0,this.__v_isRef=!0,this[_a$2]=!1,this._dirty=!0,this.effect=new ReactiveEffect(getter,(()=>{this._dirty||(this._dirty=!0,function triggerRefValue(ref,newVal){(ref=toRaw(ref)).dep&&triggerEffects(ref.dep)}(this))})),this.effect.computed=this,this.effect.active=this._cacheable=!isSSR,this.__v_isReadonly=isReadonly2}get value(){const self2=toRaw(this);return function trackRefValue(ref){shouldTrack&&activeEffect&&trackEffects((ref=toRaw(ref)).dep||(ref.dep=createDep()))}(self2),!self2._dirty&&self2._cacheable||(self2._dirty=!1,self2._value=self2.effect.run()),self2._value}set value(newValue){this._setter(newValue)}}function callWithErrorHandling(fn,instance,type2,args){let res;try{res=args?fn(...args):fn()}catch(err){handleError(err,instance,type2)}return res}function callWithAsyncErrorHandling(fn,instance,type2,args){if(isFunction(fn)){const res=callWithErrorHandling(fn,instance,type2,args);return res&&isPromise(res)&&res.catch((err=>{handleError(err,instance,type2)})),res}const values=[];for(let i=0;i<fn.length;i++)values.push(callWithAsyncErrorHandling(fn[i],instance,type2,args));return values}function handleError(err,instance,type2,throwInDev=!0){instance&&instance.vnode;if(instance){let cur=instance.parent;const exposedInstance=instance.proxy,errorInfo=type2;for(;cur;){const errorCapturedHooks=cur.ec;if(errorCapturedHooks)for(let i=0;i<errorCapturedHooks.length;i++)if(!1===errorCapturedHooks[i](err,exposedInstance,errorInfo))return;cur=cur.parent}const appErrorHandler=instance.appContext.config.errorHandler;if(appErrorHandler)return void callWithErrorHandling(appErrorHandler,null,10,[err,exposedInstance,errorInfo])}!function logError(err,type2,contextVNode,throwInDev=!0){console.error(err)}(err,0,0,throwInDev)}_a$2="__v_isReadonly";let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(fn){const p2=currentFlushPromise||resolvedPromise;return fn?p2.then(this?fn.bind(this):fn):p2}function queueJob(job){queue.length&&queue.includes(job,isFlushing&&job.allowRecurse?flushIndex+1:flushIndex)||(null==job.id?queue.push(job):queue.splice(function findInsertionIndex(id){let start=flushIndex+1,end=queue.length;for(;start<end;){const middle=start+end>>>1;getId(queue[middle])<id?start=middle+1:end=middle}return start}(job.id),0,job),queueFlush())}function queueFlush(){isFlushing||isFlushPending||(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function flushPreFlushCbs(seen,i=(isFlushing?flushIndex+1:0)){for(;i<queue.length;i++){const cb=queue[i];cb&&cb.pre&&(queue.splice(i,1),i--,cb())}}function flushPostFlushCbs(seen){if(pendingPostFlushCbs.length){const deduped=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs)return void activePostFlushCbs.push(...deduped);for(activePostFlushCbs=deduped,activePostFlushCbs.sort(((a,b)=>getId(a)-getId(b))),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=job=>null==job.id?1/0:job.id,comparator=(a,b)=>{const diff=getId(a)-getId(b);if(0===diff){if(a.pre&&!b.pre)return-1;if(b.pre&&!a.pre)return 1}return diff};function flushJobs(seen){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const job=queue[flushIndex];job&&!1!==job.active&&callWithErrorHandling(job,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit$1(instance,event,...rawArgs){if(instance.isUnmounted)return;const props2=instance.vnode.props||EMPTY_OBJ;let args=rawArgs;const isModelListener2=event.startsWith("update:"),modelArg=isModelListener2&&event.slice(7);if(modelArg&&modelArg in props2){const modifiersKey=`${"modelValue"===modelArg?"model":modelArg}Modifiers`,{number:number,trim:trim}=props2[modifiersKey]||EMPTY_OBJ;trim&&(args=rawArgs.map((a=>isString(a)?a.trim():a))),number&&(args=rawArgs.map(toNumber))}let handlerName,handler=props2[handlerName=toHandlerKey(event)]||props2[handlerName=toHandlerKey(camelize(event))];!handler&&isModelListener2&&(handler=props2[handlerName=toHandlerKey(hyphenate(event))]),handler&&callWithAsyncErrorHandling(handler,instance,6,args);const onceHandler=props2[handlerName+"Once"];if(onceHandler){if(instance.emitted){if(instance.emitted[handlerName])return}else instance.emitted={};instance.emitted[handlerName]=!0,callWithAsyncErrorHandling(onceHandler,instance,6,args)}}function normalizeEmitsOptions(comp,appContext,asMixin=!1){const cache=appContext.emitsCache,cached=cache.get(comp);if(void 0!==cached)return cached;const raw=comp.emits;let normalized={},hasExtends=!1;if(!isFunction(comp)){const extendEmits=raw2=>{const normalizedFromExtend=normalizeEmitsOptions(raw2,appContext,!0);normalizedFromExtend&&(hasExtends=!0,extend$1(normalized,normalizedFromExtend))};!asMixin&&appContext.mixins.length&&appContext.mixins.forEach(extendEmits),comp.extends&&extendEmits(comp.extends),comp.mixins&&comp.mixins.forEach(extendEmits)}return raw||hasExtends?(isArray$1(raw)?raw.forEach((key=>normalized[key]=null)):extend$1(normalized,raw),isObject(comp)&&cache.set(comp,normalized),normalized):(isObject(comp)&&cache.set(comp,null),null)}function isEmitListener(options,key){return!(!options||!isOn(key))&&(key=key.slice(2).replace(/Once$/,""),hasOwn$1(options,key[0].toLowerCase()+key.slice(1))||hasOwn$1(options,hyphenate(key))||hasOwn$1(options,key))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(instance){const prev=currentRenderingInstance;return currentRenderingInstance=instance,currentScopeId=instance&&instance.type.__scopeId||null,prev}function pushScopeId(id){currentScopeId=id}function popScopeId(){currentScopeId=null}function withCtx(fn,ctx=currentRenderingInstance,isNonScopedSlot){if(!ctx)return fn;if(fn._n)return fn;const renderFnWithContext=(...args)=>{renderFnWithContext._d&&setBlockTracking(-1);const prevInstance=setCurrentRenderingInstance(ctx);let res;try{res=fn(...args)}finally{setCurrentRenderingInstance(prevInstance),renderFnWithContext._d&&setBlockTracking(1)}return res};return renderFnWithContext._n=!0,renderFnWithContext._c=!0,renderFnWithContext._d=!0,renderFnWithContext}function renderComponentRoot(instance){const{type:Component,vnode:vnode,proxy:proxy,withProxy:withProxy,props:props2,propsOptions:[propsOptions],slots:slots,attrs:attrs,emit:emit,render:render,renderCache:renderCache,data:data2,setupState:setupState,ctx:ctx,inheritAttrs:inheritAttrs}=instance;let result,fallthroughAttrs;const prev=setCurrentRenderingInstance(instance);try{if(4&vnode.shapeFlag){const proxyToUse=withProxy||proxy;result=normalizeVNode(render.call(proxyToUse,proxyToUse,renderCache,props2,setupState,data2,ctx)),fallthroughAttrs=attrs}else{const render2=Component;0,result=normalizeVNode(render2.length>1?render2(props2,{attrs:attrs,slots:slots,emit:emit}):render2(props2,null)),fallthroughAttrs=Component.props?attrs:getFunctionalFallthrough(attrs)}}catch(err){blockStack.length=0,handleError(err,instance,1),result=createVNode(Comment)}let root=result;if(fallthroughAttrs&&!1!==inheritAttrs){const keys2=Object.keys(fallthroughAttrs),{shapeFlag:shapeFlag}=root;keys2.length&&7&shapeFlag&&(propsOptions&&keys2.some(isModelListener)&&(fallthroughAttrs=filterModelListeners(fallthroughAttrs,propsOptions)),root=cloneVNode(root,fallthroughAttrs))}return vnode.dirs&&(root=cloneVNode(root),root.dirs=root.dirs?root.dirs.concat(vnode.dirs):vnode.dirs),vnode.transition&&(root.transition=vnode.transition),result=root,setCurrentRenderingInstance(prev),result}const getFunctionalFallthrough=attrs=>{let res;for(const key in attrs)("class"===key||"style"===key||isOn(key))&&((res||(res={}))[key]=attrs[key]);return res},filterModelListeners=(attrs,props2)=>{const res={};for(const key in attrs)isModelListener(key)&&key.slice(9)in props2||(res[key]=attrs[key]);return res};function hasPropsChanged(prevProps,nextProps,emitsOptions){const nextKeys=Object.keys(nextProps);if(nextKeys.length!==Object.keys(prevProps).length)return!0;for(let i=0;i<nextKeys.length;i++){const key=nextKeys[i];if(nextProps[key]!==prevProps[key]&&!isEmitListener(emitsOptions,key))return!0}return!1}function inject(key,defaultValue,treatDefaultAsFactory=!1){const instance=currentInstance||currentRenderingInstance;if(instance){const provides=null==instance.parent?instance.vnode.appContext&&instance.vnode.appContext.provides:instance.parent.provides;if(provides&&key in provides)return provides[key];if(arguments.length>1)return treatDefaultAsFactory&&isFunction(defaultValue)?defaultValue.call(instance.proxy):defaultValue}}const INITIAL_WATCHER_VALUE={};function watch(source,cb,options){return doWatch(source,cb,options)}function doWatch(source,cb,{immediate:immediate,deep:deep,flush:flush,onTrack:onTrack,onTrigger:onTrigger}=EMPTY_OBJ){const instance=currentInstance;let getter,cleanup,forceTrigger=!1,isMultiSource=!1;if(isRef(source)?(getter=()=>source.value,forceTrigger=isShallow(source)):isReactive(source)?(getter=()=>source,deep=!0):isArray$1(source)?(isMultiSource=!0,forceTrigger=source.some((s=>isReactive(s)||isShallow(s))),getter=()=>source.map((s=>isRef(s)?s.value:isReactive(s)?traverse(s):isFunction(s)?callWithErrorHandling(s,instance,2):void 0))):getter=isFunction(source)?cb?()=>callWithErrorHandling(source,instance,2):()=>{if(!instance||!instance.isUnmounted)return cleanup&&cleanup(),callWithAsyncErrorHandling(source,instance,3,[onCleanup])}:NOOP,cb&&deep){const baseGetter=getter;getter=()=>traverse(baseGetter())}let ssrCleanup,onCleanup=fn=>{cleanup=effect.onStop=()=>{callWithErrorHandling(fn,instance,4)}};if(isInSSRComponentSetup){if(onCleanup=NOOP,cb?immediate&&callWithAsyncErrorHandling(cb,instance,3,[getter(),isMultiSource?[]:void 0,onCleanup]):getter(),"sync"!==flush)return NOOP;{const ctx=useSSRContext();ssrCleanup=ctx.__watcherHandles||(ctx.__watcherHandles=[])}}let oldValue=isMultiSource?new Array(source.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const job=()=>{if(effect.active)if(cb){const newValue=effect.run();(deep||forceTrigger||(isMultiSource?newValue.some(((v,i)=>hasChanged(v,oldValue[i]))):hasChanged(newValue,oldValue)))&&(cleanup&&cleanup(),callWithAsyncErrorHandling(cb,instance,3,[newValue,oldValue===INITIAL_WATCHER_VALUE?void 0:isMultiSource&&oldValue[0]===INITIAL_WATCHER_VALUE?[]:oldValue,onCleanup]),oldValue=newValue)}else effect.run()};let scheduler;job.allowRecurse=!!cb,"sync"===flush?scheduler=job:"post"===flush?scheduler=()=>queuePostRenderEffect(job,instance&&instance.suspense):(job.pre=!0,instance&&(job.id=instance.uid),scheduler=()=>queueJob(job));const effect=new ReactiveEffect(getter,scheduler);cb?immediate?job():oldValue=effect.run():"post"===flush?queuePostRenderEffect(effect.run.bind(effect),instance&&instance.suspense):effect.run();const unwatch=()=>{effect.stop(),instance&&instance.scope&&remove(instance.scope.effects,effect)};return ssrCleanup&&ssrCleanup.push(unwatch),unwatch}function instanceWatch(source,value,options){const publicThis=this.proxy,getter=isString(source)?source.includes(".")?createPathGetter(publicThis,source):()=>publicThis[source]:source.bind(publicThis,publicThis);let cb;isFunction(value)?cb=value:(cb=value.handler,options=value);const cur=currentInstance;setCurrentInstance(this);const res=doWatch(getter,cb.bind(publicThis),options);return cur?setCurrentInstance(cur):unsetCurrentInstance(),res}function createPathGetter(ctx,path){const segments=path.split(".");return()=>{let cur=ctx;for(let i=0;i<segments.length&&cur;i++)cur=cur[segments[i]];return cur}}function traverse(value,seen){if(!isObject(value)||value.__v_skip)return value;if((seen=seen||new Set).has(value))return value;if(seen.add(value),isRef(value))traverse(value.value,seen);else if(isArray$1(value))for(let i=0;i<value.length;i++)traverse(value[i],seen);else if(isSet(value)||isMap(value))value.forEach((v=>{traverse(v,seen)}));else if(isPlainObject(value))for(const key in value)traverse(value[key],seen);return value}const TransitionHookValidator=[Function,Array];Boolean,Boolean;function getLeavingNodesForType(state,vnode){const{leavingVNodes:leavingVNodes}=state;let leavingVNodesCache=leavingVNodes.get(vnode.type);return leavingVNodesCache||(leavingVNodesCache=Object.create(null),leavingVNodes.set(vnode.type,leavingVNodesCache)),leavingVNodesCache}function resolveTransitionHooks(vnode,props2,state,instance){const{appear:appear,mode:mode,persisted:persisted=!1,onBeforeEnter:onBeforeEnter,onEnter:onEnter,onAfterEnter:onAfterEnter,onEnterCancelled:onEnterCancelled,onBeforeLeave:onBeforeLeave,onLeave:onLeave,onAfterLeave:onAfterLeave,onLeaveCancelled:onLeaveCancelled,onBeforeAppear:onBeforeAppear,onAppear:onAppear,onAfterAppear:onAfterAppear,onAppearCancelled:onAppearCancelled}=props2,key=String(vnode.key),leavingVNodesCache=getLeavingNodesForType(state,vnode),callHook2=(hook,args)=>{hook&&callWithAsyncErrorHandling(hook,instance,9,args)},callAsyncHook=(hook,args)=>{const done=args[1];callHook2(hook,args),isArray$1(hook)?hook.every((hook2=>hook2.length<=1))&&done():hook.length<=1&&done()},hooks={mode:mode,persisted:persisted,beforeEnter(el){let hook=onBeforeEnter;if(!state.isMounted){if(!appear)return;hook=onBeforeAppear||onBeforeEnter}el._leaveCb&&el._leaveCb(!0);const leavingVNode=leavingVNodesCache[key];leavingVNode&&isSameVNodeType(vnode,leavingVNode)&&leavingVNode.el._leaveCb&&leavingVNode.el._leaveCb(),callHook2(hook,[el])},enter(el){let hook=onEnter,afterHook=onAfterEnter,cancelHook=onEnterCancelled;if(!state.isMounted){if(!appear)return;hook=onAppear||onEnter,afterHook=onAfterAppear||onAfterEnter,cancelHook=onAppearCancelled||onEnterCancelled}let called=!1;const done=el._enterCb=cancelled=>{called||(called=!0,callHook2(cancelled?cancelHook:afterHook,[el]),hooks.delayedLeave&&hooks.delayedLeave(),el._enterCb=void 0)};hook?callAsyncHook(hook,[el,done]):done()},leave(el,remove2){const key2=String(vnode.key);if(el._enterCb&&el._enterCb(!0),state.isUnmounting)return remove2();callHook2(onBeforeLeave,[el]);let called=!1;const done=el._leaveCb=cancelled=>{called||(called=!0,remove2(),callHook2(cancelled?onLeaveCancelled:onAfterLeave,[el]),el._leaveCb=void 0,leavingVNodesCache[key2]===vnode&&delete leavingVNodesCache[key2])};leavingVNodesCache[key2]=vnode,onLeave?callAsyncHook(onLeave,[el,done]):done()},clone:vnode2=>resolveTransitionHooks(vnode2,props2,state,instance)};return hooks}function emptyPlaceholder(vnode){if(isKeepAlive(vnode))return(vnode=cloneVNode(vnode)).children=null,vnode}function getKeepAliveChild(vnode){return isKeepAlive(vnode)?vnode.children?vnode.children[0]:void 0:vnode}function setTransitionHooks(vnode,hooks){6&vnode.shapeFlag&&vnode.component?setTransitionHooks(vnode.component.subTree,hooks):128&vnode.shapeFlag?(vnode.ssContent.transition=hooks.clone(vnode.ssContent),vnode.ssFallback.transition=hooks.clone(vnode.ssFallback)):vnode.transition=hooks}function getTransitionRawChildren(children,keepComment=!1,parentKey){let ret=[],keyedFragmentCount=0;for(let i=0;i<children.length;i++){let child=children[i];const key=null==parentKey?child.key:String(parentKey)+String(null!=child.key?child.key:i);child.type===Fragment?(128&child.patchFlag&&keyedFragmentCount++,ret=ret.concat(getTransitionRawChildren(child.children,keepComment,key))):(keepComment||child.type!==Comment)&&ret.push(null!=key?cloneVNode(child,{key:key}):child)}if(keyedFragmentCount>1)for(let i=0;i<ret.length;i++)ret[i].patchFlag=-2;return ret}function defineComponent(options){return isFunction(options)?{setup:options,name:options.name}:options}const isAsyncWrapper=i=>!!i.type.__asyncLoader,isKeepAlive=vnode=>vnode.type.__isKeepAlive;function onActivated(hook,target){registerKeepAliveHook(hook,"a",target)}function onDeactivated(hook,target){registerKeepAliveHook(hook,"da",target)}function registerKeepAliveHook(hook,type2,target=currentInstance){const wrappedHook=hook.__wdc||(hook.__wdc=()=>{let current=target;for(;current;){if(current.isDeactivated)return;current=current.parent}return hook()});if(injectHook(type2,wrappedHook,target),target){let current=target.parent;for(;current&&current.parent;)isKeepAlive(current.parent.vnode)&&injectToKeepAliveRoot(wrappedHook,type2,target,current),current=current.parent}}function injectToKeepAliveRoot(hook,type2,target,keepAliveRoot){const injected=injectHook(type2,hook,keepAliveRoot,!0);onUnmounted((()=>{remove(keepAliveRoot[type2],injected)}),target)}function injectHook(type2,hook,target=currentInstance,prepend=!1){if(target){const hooks=target[type2]||(target[type2]=[]),wrappedHook=hook.__weh||(hook.__weh=(...args)=>{if(target.isUnmounted)return;pauseTracking(),setCurrentInstance(target);const res=callWithAsyncErrorHandling(hook,target,type2,args);return unsetCurrentInstance(),resetTracking(),res});return prepend?hooks.unshift(wrappedHook):hooks.push(wrappedHook),wrappedHook}}const createHook=lifecycle=>(hook,target=currentInstance)=>(!isInSSRComponentSetup||"sp"===lifecycle)&&injectHook(lifecycle,((...args)=>hook(...args)),target),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(hook,target=currentInstance){injectHook("ec",hook,target)}function withDirectives(vnode,directives){const internalInstance=currentRenderingInstance;if(null===internalInstance)return vnode;const instance=getExposeProxy(internalInstance)||internalInstance.proxy,bindings=vnode.dirs||(vnode.dirs=[]);for(let i=0;i<directives.length;i++){let[dir,value,arg,modifiers=EMPTY_OBJ]=directives[i];dir&&(isFunction(dir)&&(dir={mounted:dir,updated:dir}),dir.deep&&traverse(value),bindings.push({dir:dir,instance:instance,value:value,oldValue:void 0,arg:arg,modifiers:modifiers}))}return vnode}function invokeDirectiveHook(vnode,prevVNode,instance,name){const bindings=vnode.dirs,oldBindings=prevVNode&&prevVNode.dirs;for(let i=0;i<bindings.length;i++){const binding=bindings[i];oldBindings&&(binding.oldValue=oldBindings[i].value);let hook=binding.dir[name];hook&&(pauseTracking(),callWithAsyncErrorHandling(hook,instance,8,[vnode.el,binding,vnode,prevVNode]),resetTracking())}}const NULL_DYNAMIC_COMPONENT=Symbol();function renderList(source,renderItem,cache,index){let ret;const cached=cache&&cache[index];if(isArray$1(source)||isString(source)){ret=new Array(source.length);for(let i=0,l=source.length;i<l;i++)ret[i]=renderItem(source[i],i,void 0,cached&&cached[i])}else if("number"==typeof source){ret=new Array(source);for(let i=0;i<source;i++)ret[i]=renderItem(i+1,i,void 0,cached&&cached[i])}else if(isObject(source))if(source[Symbol.iterator])ret=Array.from(source,((item,i)=>renderItem(item,i,void 0,cached&&cached[i])));else{const keys2=Object.keys(source);ret=new Array(keys2.length);for(let i=0,l=keys2.length;i<l;i++){const key=keys2[i];ret[i]=renderItem(source[key],key,i,cached&&cached[i])}}else ret=[];return cache&&(cache[index]=ret),ret}function renderSlot(slots,name,props2={},fallback,noSlotted){if(currentRenderingInstance.isCE||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.isCE)return"default"!==name&&(props2.name=name),createVNode("slot",props2,fallback&&fallback());let slot=slots[name];slot&&slot._c&&(slot._d=!1),openBlock();const validSlotContent=slot&&ensureValidVNode(slot(props2)),rendered=createBlock(Fragment,{key:props2.key||validSlotContent&&validSlotContent.key||`_${name}`},validSlotContent||(fallback?fallback():[]),validSlotContent&&1===slots._?64:-2);return!noSlotted&&rendered.scopeId&&(rendered.slotScopeIds=[rendered.scopeId+"-s"]),slot&&slot._c&&(slot._d=!0),rendered}function ensureValidVNode(vnodes){return vnodes.some((child=>!isVNode(child)||child.type!==Comment&&!(child.type===Fragment&&!ensureValidVNode(child.children))))?vnodes:null}const getPublicInstance=i=>i?isStatefulComponent(i)?getExposeProxy(i)||i.proxy:getPublicInstance(i.parent):null,publicPropertiesMap=extend$1(Object.create(null),{$:i=>i,$el:i=>i.vnode.el,$data:i=>i.data,$props:i=>i.props,$attrs:i=>i.attrs,$slots:i=>i.slots,$refs:i=>i.refs,$parent:i=>getPublicInstance(i.parent),$root:i=>getPublicInstance(i.root),$emit:i=>i.emit,$options:i=>resolveMergedOptions(i),$forceUpdate:i=>i.f||(i.f=()=>queueJob(i.update)),$nextTick:i=>i.n||(i.n=nextTick.bind(i.proxy)),$watch:i=>instanceWatch.bind(i)}),hasSetupBinding=(state,key)=>state!==EMPTY_OBJ&&!state.__isScriptSetup&&hasOwn$1(state,key),PublicInstanceProxyHandlers={get({_:instance},key){const{ctx:ctx,setupState:setupState,data:data2,props:props2,accessCache:accessCache,type:type2,appContext:appContext}=instance;let normalizedProps;if("$"!==key[0]){const n=accessCache[key];if(void 0!==n)switch(n){case 1:return setupState[key];case 2:return data2[key];case 4:return ctx[key];case 3:return props2[key]}else{if(hasSetupBinding(setupState,key))return accessCache[key]=1,setupState[key];if(data2!==EMPTY_OBJ&&hasOwn$1(data2,key))return accessCache[key]=2,data2[key];if((normalizedProps=instance.propsOptions[0])&&hasOwn$1(normalizedProps,key))return accessCache[key]=3,props2[key];if(ctx!==EMPTY_OBJ&&hasOwn$1(ctx,key))return accessCache[key]=4,ctx[key];shouldCacheAccess&&(accessCache[key]=0)}}const publicGetter=publicPropertiesMap[key];let cssModule,globalProperties;return publicGetter?("$attrs"===key&&track(instance,0,key),publicGetter(instance)):(cssModule=type2.__cssModules)&&(cssModule=cssModule[key])?cssModule:ctx!==EMPTY_OBJ&&hasOwn$1(ctx,key)?(accessCache[key]=4,ctx[key]):(globalProperties=appContext.config.globalProperties,hasOwn$1(globalProperties,key)?globalProperties[key]:void 0)},set({_:instance},key,value){const{data:data2,setupState:setupState,ctx:ctx}=instance;return hasSetupBinding(setupState,key)?(setupState[key]=value,!0):data2!==EMPTY_OBJ&&hasOwn$1(data2,key)?(data2[key]=value,!0):!hasOwn$1(instance.props,key)&&(("$"!==key[0]||!(key.slice(1)in instance))&&(ctx[key]=value,!0))},has({_:{data:data2,setupState:setupState,accessCache:accessCache,ctx:ctx,appContext:appContext,propsOptions:propsOptions}},key){let normalizedProps;return!!accessCache[key]||data2!==EMPTY_OBJ&&hasOwn$1(data2,key)||hasSetupBinding(setupState,key)||(normalizedProps=propsOptions[0])&&hasOwn$1(normalizedProps,key)||hasOwn$1(ctx,key)||hasOwn$1(publicPropertiesMap,key)||hasOwn$1(appContext.config.globalProperties,key)},defineProperty(target,key,descriptor){return null!=descriptor.get?target._.accessCache[key]=0:hasOwn$1(descriptor,"value")&&this.set(target,key,descriptor.value,null),Reflect.defineProperty(target,key,descriptor)}};let shouldCacheAccess=!0;function applyOptions(instance){const options=resolveMergedOptions(instance),publicThis=instance.proxy,ctx=instance.ctx;shouldCacheAccess=!1,options.beforeCreate&&callHook(options.beforeCreate,instance,"bc");const{data:dataOptions,computed:computedOptions,methods:methods,watch:watchOptions,provide:provideOptions,inject:injectOptions,created:created,beforeMount:beforeMount,mounted:mounted,beforeUpdate:beforeUpdate,updated:updated,activated:activated,deactivated:deactivated,beforeDestroy:beforeDestroy,beforeUnmount:beforeUnmount,destroyed:destroyed,unmounted:unmounted,render:render,renderTracked:renderTracked,renderTriggered:renderTriggered,errorCaptured:errorCaptured,serverPrefetch:serverPrefetch,expose:expose,inheritAttrs:inheritAttrs,components:components2,directives:directives,filters:filters}=options;if(injectOptions&&function resolveInjections(injectOptions,ctx,checkDuplicateProperties=NOOP,unwrapRef=!1){isArray$1(injectOptions)&&(injectOptions=normalizeInject(injectOptions));for(const key in injectOptions){const opt=injectOptions[key];let injected;injected=isObject(opt)?"default"in opt?inject(opt.from||key,opt.default,!0):inject(opt.from||key):inject(opt),isRef(injected)&&unwrapRef?Object.defineProperty(ctx,key,{enumerable:!0,configurable:!0,get:()=>injected.value,set:v=>injected.value=v}):ctx[key]=injected}}(injectOptions,ctx,null,instance.appContext.config.unwrapInjectedRef),methods)for(const key in methods){const methodHandler=methods[key];isFunction(methodHandler)&&(ctx[key]=methodHandler.bind(publicThis))}if(dataOptions){const data2=dataOptions.call(publicThis,publicThis);isObject(data2)&&(instance.data=reactive(data2))}if(shouldCacheAccess=!0,computedOptions)for(const key in computedOptions){const opt=computedOptions[key],get2=isFunction(opt)?opt.bind(publicThis,publicThis):isFunction(opt.get)?opt.get.bind(publicThis,publicThis):NOOP,set2=!isFunction(opt)&&isFunction(opt.set)?opt.set.bind(publicThis):NOOP,c=computed({get:get2,set:set2});Object.defineProperty(ctx,key,{enumerable:!0,configurable:!0,get:()=>c.value,set:v=>c.value=v})}if(watchOptions)for(const key in watchOptions)createWatcher(watchOptions[key],ctx,publicThis,key);if(provideOptions){const provides=isFunction(provideOptions)?provideOptions.call(publicThis):provideOptions;Reflect.ownKeys(provides).forEach((key=>{!function provide(key,value){if(currentInstance){let provides=currentInstance.provides;const parentProvides=currentInstance.parent&&currentInstance.parent.provides;parentProvides===provides&&(provides=currentInstance.provides=Object.create(parentProvides)),provides[key]=value}}(key,provides[key])}))}function registerLifecycleHook(register,hook){isArray$1(hook)?hook.forEach((_hook=>register(_hook.bind(publicThis)))):hook&&register(hook.bind(publicThis))}if(created&&callHook(created,instance,"c"),registerLifecycleHook(onBeforeMount,beforeMount),registerLifecycleHook(onMounted,mounted),registerLifecycleHook(onBeforeUpdate,beforeUpdate),registerLifecycleHook(onUpdated,updated),registerLifecycleHook(onActivated,activated),registerLifecycleHook(onDeactivated,deactivated),registerLifecycleHook(onErrorCaptured,errorCaptured),registerLifecycleHook(onRenderTracked,renderTracked),registerLifecycleHook(onRenderTriggered,renderTriggered),registerLifecycleHook(onBeforeUnmount,beforeUnmount),registerLifecycleHook(onUnmounted,unmounted),registerLifecycleHook(onServerPrefetch,serverPrefetch),isArray$1(expose))if(expose.length){const exposed=instance.exposed||(instance.exposed={});expose.forEach((key=>{Object.defineProperty(exposed,key,{get:()=>publicThis[key],set:val=>publicThis[key]=val})}))}else instance.exposed||(instance.exposed={});render&&instance.render===NOOP&&(instance.render=render),null!=inheritAttrs&&(instance.inheritAttrs=inheritAttrs),components2&&(instance.components=components2),directives&&(instance.directives=directives)}function callHook(hook,instance,type2){callWithAsyncErrorHandling(isArray$1(hook)?hook.map((h=>h.bind(instance.proxy))):hook.bind(instance.proxy),instance,type2)}function createWatcher(raw,ctx,publicThis,key){const getter=key.includes(".")?createPathGetter(publicThis,key):()=>publicThis[key];if(isString(raw)){const handler=ctx[raw];isFunction(handler)&&watch(getter,handler)}else if(isFunction(raw))watch(getter,raw.bind(publicThis));else if(isObject(raw))if(isArray$1(raw))raw.forEach((r=>createWatcher(r,ctx,publicThis,key)));else{const handler=isFunction(raw.handler)?raw.handler.bind(publicThis):ctx[raw.handler];isFunction(handler)&&watch(getter,handler,raw)}}function resolveMergedOptions(instance){const base=instance.type,{mixins:mixins,extends:extendsOptions}=base,{mixins:globalMixins,optionsCache:cache,config:{optionMergeStrategies:optionMergeStrategies}}=instance.appContext,cached=cache.get(base);let resolved;return cached?resolved=cached:globalMixins.length||mixins||extendsOptions?(resolved={},globalMixins.length&&globalMixins.forEach((m=>mergeOptions(resolved,m,optionMergeStrategies,!0))),mergeOptions(resolved,base,optionMergeStrategies)):resolved=base,isObject(base)&&cache.set(base,resolved),resolved}function mergeOptions(to,from,strats,asMixin=!1){const{mixins:mixins,extends:extendsOptions}=from;extendsOptions&&mergeOptions(to,extendsOptions,strats,!0),mixins&&mixins.forEach((m=>mergeOptions(to,m,strats,!0)));for(const key in from)if(asMixin&&"expose"===key);else{const strat=internalOptionMergeStrats[key]||strats&&strats[key];to[key]=strat?strat(to[key],from[key]):from[key]}return to}const internalOptionMergeStrats={data:mergeDataFn,props:mergeObjectOptions,emits:mergeObjectOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:function mergeWatchOptions(to,from){if(!to)return from;if(!from)return to;const merged=extend$1(Object.create(null),to);for(const key in from)merged[key]=mergeAsArray(to[key],from[key]);return merged},provide:mergeDataFn,inject:function mergeInject(to,from){return mergeObjectOptions(normalizeInject(to),normalizeInject(from))}};function mergeDataFn(to,from){return from?to?function mergedDataFn(){return extend$1(isFunction(to)?to.call(this,this):to,isFunction(from)?from.call(this,this):from)}:from:to}function normalizeInject(raw){if(isArray$1(raw)){const res={};for(let i=0;i<raw.length;i++)res[raw[i]]=raw[i];return res}return raw}function mergeAsArray(to,from){return to?[...new Set([].concat(to,from))]:from}function mergeObjectOptions(to,from){return to?extend$1(extend$1(Object.create(null),to),from):from}function initProps(instance,rawProps,isStateful,isSSR=!1){const props2={},attrs={};def(attrs,InternalObjectKey,1),instance.propsDefaults=Object.create(null),setFullProps(instance,rawProps,props2,attrs);for(const key in instance.propsOptions[0])key in props2||(props2[key]=void 0);isStateful?instance.props=isSSR?props2:function shallowReactive(target){return createReactiveObject(target,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}(props2):instance.type.props?instance.props=props2:instance.props=attrs,instance.attrs=attrs}function setFullProps(instance,rawProps,props2,attrs){const[options,needCastKeys]=instance.propsOptions;let rawCastValues,hasAttrsChanged=!1;if(rawProps)for(let key in rawProps){if(isReservedProp(key))continue;const value=rawProps[key];let camelKey;options&&hasOwn$1(options,camelKey=camelize(key))?needCastKeys&&needCastKeys.includes(camelKey)?(rawCastValues||(rawCastValues={}))[camelKey]=value:props2[camelKey]=value:isEmitListener(instance.emitsOptions,key)||key in attrs&&value===attrs[key]||(attrs[key]=value,hasAttrsChanged=!0)}if(needCastKeys){const rawCurrentProps=toRaw(props2),castValues=rawCastValues||EMPTY_OBJ;for(let i=0;i<needCastKeys.length;i++){const key=needCastKeys[i];props2[key]=resolvePropValue(options,rawCurrentProps,key,castValues[key],instance,!hasOwn$1(castValues,key))}}return hasAttrsChanged}function resolvePropValue(options,props2,key,value,instance,isAbsent){const opt=options[key];if(null!=opt){const hasDefault=hasOwn$1(opt,"default");if(hasDefault&&void 0===value){const defaultValue=opt.default;if(opt.type!==Function&&isFunction(defaultValue)){const{propsDefaults:propsDefaults}=instance;key in propsDefaults?value=propsDefaults[key]:(setCurrentInstance(instance),value=propsDefaults[key]=defaultValue.call(null,props2),unsetCurrentInstance())}else value=defaultValue}opt[0]&&(isAbsent&&!hasDefault?value=!1:!opt[1]||""!==value&&value!==hyphenate(key)||(value=!0))}return value}function normalizePropsOptions(comp,appContext,asMixin=!1){const cache=appContext.propsCache,cached=cache.get(comp);if(cached)return cached;const raw=comp.props,normalized={},needCastKeys=[];let hasExtends=!1;if(!isFunction(comp)){const extendProps=raw2=>{hasExtends=!0;const[props2,keys2]=normalizePropsOptions(raw2,appContext,!0);extend$1(normalized,props2),keys2&&needCastKeys.push(...keys2)};!asMixin&&appContext.mixins.length&&appContext.mixins.forEach(extendProps),comp.extends&&extendProps(comp.extends),comp.mixins&&comp.mixins.forEach(extendProps)}if(!raw&&!hasExtends)return isObject(comp)&&cache.set(comp,EMPTY_ARR),EMPTY_ARR;if(isArray$1(raw))for(let i=0;i<raw.length;i++){const normalizedKey=camelize(raw[i]);validatePropName(normalizedKey)&&(normalized[normalizedKey]=EMPTY_OBJ)}else if(raw)for(const key in raw){const normalizedKey=camelize(key);if(validatePropName(normalizedKey)){const opt=raw[key],prop=normalized[normalizedKey]=isArray$1(opt)||isFunction(opt)?{type:opt}:Object.assign({},opt);if(prop){const booleanIndex=getTypeIndex(Boolean,prop.type),stringIndex=getTypeIndex(String,prop.type);prop[0]=booleanIndex>-1,prop[1]=stringIndex<0||booleanIndex<stringIndex,(booleanIndex>-1||hasOwn$1(prop,"default"))&&needCastKeys.push(normalizedKey)}}}const res=[normalized,needCastKeys];return isObject(comp)&&cache.set(comp,res),res}function validatePropName(key){return"$"!==key[0]}function getType(ctor){const match=ctor&&ctor.toString().match(/^\s*function (\w+)/);return match?match[1]:null===ctor?"null":""}function isSameType(a,b){return getType(a)===getType(b)}function getTypeIndex(type2,expectedTypes){return isArray$1(expectedTypes)?expectedTypes.findIndex((t=>isSameType(t,type2))):isFunction(expectedTypes)&&isSameType(expectedTypes,type2)?0:-1}const isInternalKey=key=>"_"===key[0]||"$stable"===key,normalizeSlotValue=value=>isArray$1(value)?value.map(normalizeVNode):[normalizeVNode(value)],normalizeSlot=(key,rawSlot,ctx)=>{if(rawSlot._n)return rawSlot;const normalized=withCtx(((...args)=>normalizeSlotValue(rawSlot(...args))),ctx);return normalized._c=!1,normalized},normalizeObjectSlots=(rawSlots,slots,instance)=>{const ctx=rawSlots._ctx;for(const key in rawSlots){if(isInternalKey(key))continue;const value=rawSlots[key];if(isFunction(value))slots[key]=normalizeSlot(0,value,ctx);else if(null!=value){const normalized=normalizeSlotValue(value);slots[key]=()=>normalized}}},normalizeVNodeSlots=(instance,children)=>{const normalized=normalizeSlotValue(children);instance.slots.default=()=>normalized};function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid=0;function createAppAPI(render,hydrate){return function createApp2(rootComponent,rootProps=null){isFunction(rootComponent)||(rootComponent=Object.assign({},rootComponent)),null==rootProps||isObject(rootProps)||(rootProps=null);const context=createAppContext(),installedPlugins=new Set;let isMounted=!1;const app2=context.app={_uid:uid++,_component:rootComponent,_props:rootProps,_container:null,_context:context,_instance:null,version:version,get config(){return context.config},set config(v){},use:(plugin,...options)=>(installedPlugins.has(plugin)||(plugin&&isFunction(plugin.install)?(installedPlugins.add(plugin),plugin.install(app2,...options)):isFunction(plugin)&&(installedPlugins.add(plugin),plugin(app2,...options))),app2),mixin:mixin=>(context.mixins.includes(mixin)||context.mixins.push(mixin),app2),component:(name,component)=>component?(context.components[name]=component,app2):context.components[name],directive:(name,directive)=>directive?(context.directives[name]=directive,app2):context.directives[name],mount(rootContainer,isHydrate,isSVG){if(!isMounted){const vnode=createVNode(rootComponent,rootProps);return vnode.appContext=context,isHydrate&&hydrate?hydrate(vnode,rootContainer):render(vnode,rootContainer,isSVG),isMounted=!0,app2._container=rootContainer,rootContainer.__vue_app__=app2,getExposeProxy(vnode.component)||vnode.component.proxy}},unmount(){isMounted&&(render(null,app2._container),delete app2._container.__vue_app__)},provide:(key,value)=>(context.provides[key]=value,app2)};return app2}}function setRef(rawRef,oldRawRef,parentSuspense,vnode,isUnmount=!1){if(isArray$1(rawRef))return void rawRef.forEach(((r,i)=>setRef(r,oldRawRef&&(isArray$1(oldRawRef)?oldRawRef[i]:oldRawRef),parentSuspense,vnode,isUnmount)));if(isAsyncWrapper(vnode)&&!isUnmount)return;const refValue=4&vnode.shapeFlag?getExposeProxy(vnode.component)||vnode.component.proxy:vnode.el,value=isUnmount?null:refValue,{i:owner,r:ref}=rawRef,oldRef=oldRawRef&&oldRawRef.r,refs=owner.refs===EMPTY_OBJ?owner.refs={}:owner.refs,setupState=owner.setupState;if(null!=oldRef&&oldRef!==ref&&(isString(oldRef)?(refs[oldRef]=null,hasOwn$1(setupState,oldRef)&&(setupState[oldRef]=null)):isRef(oldRef)&&(oldRef.value=null)),isFunction(ref))callWithErrorHandling(ref,owner,12,[value,refs]);else{const _isString=isString(ref),_isRef=isRef(ref);if(_isString||_isRef){const doSet=()=>{if(rawRef.f){const existing=_isString?hasOwn$1(setupState,ref)?setupState[ref]:refs[ref]:ref.value;isUnmount?isArray$1(existing)&&remove(existing,refValue):isArray$1(existing)?existing.includes(refValue)||existing.push(refValue):_isString?(refs[ref]=[refValue],hasOwn$1(setupState,ref)&&(setupState[ref]=refs[ref])):(ref.value=[refValue],rawRef.k&&(refs[rawRef.k]=ref.value))}else _isString?(refs[ref]=value,hasOwn$1(setupState,ref)&&(setupState[ref]=value)):_isRef&&(ref.value=value,rawRef.k&&(refs[rawRef.k]=value))};value?(doSet.id=-1,queuePostRenderEffect(doSet,parentSuspense)):doSet()}}}const queuePostRenderEffect=function queueEffectWithSuspense(fn,suspense){suspense&&suspense.pendingBranch?isArray$1(fn)?suspense.effects.push(...fn):suspense.effects.push(fn):function queuePostFlushCb(cb){isArray$1(cb)?pendingPostFlushCbs.push(...cb):activePostFlushCbs&&activePostFlushCbs.includes(cb,cb.allowRecurse?postFlushIndex+1:postFlushIndex)||pendingPostFlushCbs.push(cb),queueFlush()}(fn)};function createRenderer(options){return function baseCreateRenderer(options,createHydrationFns){(_globalThis||(_globalThis="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})).__VUE__=!0;const{insert:hostInsert,remove:hostRemove,patchProp:hostPatchProp,createElement:hostCreateElement,createText:hostCreateText,createComment:hostCreateComment,setText:hostSetText,setElementText:hostSetElementText,parentNode:hostParentNode,nextSibling:hostNextSibling,setScopeId:hostSetScopeId=NOOP,insertStaticContent:hostInsertStaticContent}=options,patch=(n1,n2,container,anchor=null,parentComponent=null,parentSuspense=null,isSVG=!1,slotScopeIds=null,optimized=!!n2.dynamicChildren)=>{if(n1===n2)return;n1&&!isSameVNodeType(n1,n2)&&(anchor=getNextHostNode(n1),unmount(n1,parentComponent,parentSuspense,!0),n1=null),-2===n2.patchFlag&&(optimized=!1,n2.dynamicChildren=null);const{type:type2,ref:ref,shapeFlag:shapeFlag}=n2;switch(type2){case Text:processText(n1,n2,container,anchor);break;case Comment:processCommentNode(n1,n2,container,anchor);break;case Static:null==n1&&mountStaticNode(n2,container,anchor,isSVG);break;case Fragment:processFragment(n1,n2,container,anchor,parentComponent,parentSuspense,isSVG,slotScopeIds,optimized);break;default:1&shapeFlag?processElement(n1,n2,container,anchor,parentComponent,parentSuspense,isSVG,slotScopeIds,optimized):6&shapeFlag?processComponent(n1,n2,container,anchor,parentComponent,parentSuspense,isSVG,slotScopeIds,optimized):(64&shapeFlag||128&shapeFlag)&&type2.process(n1,n2,container,anchor,parentComponent,parentSuspense,isSVG,slotScopeIds,optimized,internals)}null!=ref&&parentComponent&&setRef(ref,n1&&n1.ref,parentSuspense,n2||n1,!n2)},processText=(n1,n2,container,anchor)=>{if(null==n1)hostInsert(n2.el=hostCreateText(n2.children),container,anchor);else{const el=n2.el=n1.el;n2.children!==n1.children&&hostSetText(el,n2.children)}},processCommentNode=(n1,n2,container,anchor)=>{null==n1?hostInsert(n2.el=hostCreateComment(n2.children||""),container,anchor):n2.el=n1.el},mountStaticNode=(n2,container,anchor,isSVG)=>{[n2.el,n2.anchor]=hostInsertStaticContent(n2.children,container,anchor,isSVG,n2.el,n2.anchor)},moveStaticNode=({el:el,anchor:anchor},container,nextSibling)=>{let next;for(;el&&el!==anchor;)next=hostNextSibling(el),hostInsert(el,container,nextSibling),el=next;hostInsert(anchor,container,nextSibling)},removeStaticNode=({el:el,anchor:anchor})=>{let next;for(;el&&el!==anchor;)next=hostNextSibling(el),hostRemove(el),el=next;hostRemove(anchor)},processElement=(n1,n2,container,anchor,parentComponent,parentSuspense,isSVG,slotScopeIds,optimized)=>{isSVG=isSVG||"svg"===n2.type,null==n1?mountElement(n2,container,anchor,parentComponent,parentSuspense,isSVG,slotScopeIds,optimized):patchElement(n1,n2,parentComponent,parentSuspense,isSVG,slotScopeIds,optimized)},mountElement=(vnode,container,anchor,parentComponent,parentSuspense,isSVG,slotScopeIds,optimized)=>{let el,vnodeHook;const{type:type2,props:props2,shapeFlag:shapeFlag,transition:transition,dirs:dirs}=vnode;if(el=vnode.el=hostCreateElement(vnode.type,isSVG,props2&&props2.is,props2),8&shapeFlag?hostSetElementText(el,vnode.children):16&shapeFlag&&mountChildren(vnode.children,el,null,parentComponent,parentSuspense,isSVG&&"foreignObject"!==type2,slotScopeIds,optimized),dirs&&invokeDirectiveHook(vnode,null,parentComponent,"created"),props2){for(const key in props2)"value"===key||isReservedProp(key)||hostPatchProp(el,key,null,props2[key],isSVG,vnode.children,parentComponent,parentSuspense,unmountChildren);"value"in props2&&hostPatchProp(el,"value",null,props2.value),(vnodeHook=props2.onVnodeBeforeMount)&&invokeVNodeHook(vnodeHook,parentComponent,vnode)}setScopeId(el,vnode,vnode.scopeId,slotScopeIds,parentComponent),dirs&&invokeDirectiveHook(vnode,null,parentComponent,"beforeMount");const needCallTransitionHooks=(!parentSuspense||parentSuspense&&!parentSuspense.pendingBranch)&&transition&&!transition.persisted;needCallTransitionHooks&&transition.beforeEnter(el),hostInsert(el,container,anchor),((vnodeHook=props2&&props2.onVnodeMounted)||needCallTransitionHooks||dirs)&&queuePostRenderEffect((()=>{vnodeHook&&invokeVNodeHook(vnodeHook,parentComponent,vnode),needCallTransitionHooks&&transition.enter(el),dirs&&invokeDirectiveHook(vnode,null,parentComponent,"mounted")}),parentSuspense)},setScopeId=(el,vnode,scopeId,slotScopeIds,parentComponent)=>{if(scopeId&&hostSetScopeId(el,scopeId),slotScopeIds)for(let i=0;i<slotScopeIds.length;i++)hostSetScopeId(el,slotScopeIds[i]);if(parentComponent){if(vnode===parentComponent.subTree){const parentVNode=parentComponent.vnode;setScopeId(el,parentVNode,parentVNode.scopeId,parentVNode.slotScopeIds,parentComponent.parent)}}},mountChildren=(children,container,anchor,parentComponent,parentSuspense,isSVG,slotScopeIds,optimized,start=0)=>{for(let i=start;i<children.length;i++){const child=children[i]=optimized?cloneIfMounted(children[i]):normalizeVNode(children[i]);patch(null,child,container,anchor,parentComponent,parentSuspense,isSVG,slotScopeIds,optimized)}},patchElement=(n1,n2,parentComponent,parentSuspense,isSVG,slotScopeIds,optimized)=>{const el=n2.el=n1.el;let{patchFlag:patchFlag,dynamicChildren:dynamicChildren,dirs:dirs}=n2;patchFlag|=16&n1.patchFlag;const oldProps=n1.props||EMPTY_OBJ,newProps=n2.props||EMPTY_OBJ;let vnodeHook;parentComponent&&toggleRecurse(parentComponent,!1),(vnodeHook=newProps.onVnodeBeforeUpdate)&&invokeVNodeHook(vnodeHook,parentComponent,n2,n1),dirs&&invokeDirectiveHook(n2,n1,parentComponent,"beforeUpdate"),parentComponent&&toggleRecurse(parentComponent,!0);const areChildrenSVG=isSVG&&"foreignObject"!==n2.type;if(dynamicChildren?patchBlockChildren(n1.dynamicChildren,dynamicChildren,el,parentComponent,parentSuspense,areChildrenSVG,slotScopeIds):optimized||patchChildren(n1,n2,el,null,parentComponent,parentSuspense,areChildrenSVG,slotScopeIds,!1),patchFlag>0){if(16&patchFlag)patchProps(el,n2,oldProps,newProps,parentComponent,parentSuspense,isSVG);else if(2&patchFlag&&oldProps.class!==newProps.class&&hostPatchProp(el,"class",null,newProps.class,isSVG),4&patchFlag&&hostPatchProp(el,"style",oldProps.style,newProps.style,isSVG),8&patchFlag){const propsToUpdate=n2.dynamicProps;for(let i=0;i<propsToUpdate.length;i++){const key=propsToUpdate[i],prev=oldProps[key],next=newProps[key];next===prev&&"value"!==key||hostPatchProp(el,key,prev,next,isSVG,n1.children,parentComponent,parentSuspense,unmountChildren)}}1&patchFlag&&n1.children!==n2.children&&hostSetElementText(el,n2.children)}else optimized||null!=dynamicChildren||patchProps(el,n2,oldProps,newProps,parentComponent,parentSuspense,isSVG);((vnodeHook=newProps.onVnodeUpdated)||dirs)&&queuePostRenderEffect((()=>{vnodeHook&&invokeVNodeHook(vnodeHook,parentComponent,n2,n1),dirs&&invokeDirectiveHook(n2,n1,parentComponent,"updated")}),parentSuspense)},patchBlockChildren=(oldChildren,newChildren,fallbackContainer,parentComponent,parentSuspense,isSVG,slotScopeIds)=>{for(let i=0;i<newChildren.length;i++){const oldVNode=oldChildren[i],newVNode=newChildren[i],container=oldVNode.el&&(oldVNode.type===Fragment||!isSameVNodeType(oldVNode,newVNode)||70&oldVNode.shapeFlag)?hostParentNode(oldVNode.el):fallbackContainer;patch(oldVNode,newVNode,container,null,parentComponent,parentSuspense,isSVG,slotScopeIds,!0)}},patchProps=(el,vnode,oldProps,newProps,parentComponent,parentSuspense,isSVG)=>{if(oldProps!==newProps){if(oldProps!==EMPTY_OBJ)for(const key in oldProps)isReservedProp(key)||key in newProps||hostPatchProp(el,key,oldProps[key],null,isSVG,vnode.children,parentComponent,parentSuspense,unmountChildren);for(const key in newProps){if(isReservedProp(key))continue;const next=newProps[key],prev=oldProps[key];next!==prev&&"value"!==key&&hostPatchProp(el,key,prev,next,isSVG,vnode.children,parentComponent,parentSuspense,unmountChildren)}"value"in newProps&&hostPatchProp(el,"value",oldProps.value,newProps.value)}},processFragment=(n1,n2,container,anchor,parentComponent,parentSuspense,isSVG,slotScopeIds,optimized)=>{const fragmentStartAnchor=n2.el=n1?n1.el:hostCreateText(""),fragmentEndAnchor=n2.anchor=n1?n1.anchor:hostCreateText("");let{patchFlag:patchFlag,dynamicChildren:dynamicChildren,slotScopeIds:fragmentSlotScopeIds}=n2;fragmentSlotScopeIds&&(slotScopeIds=slotScopeIds?slotScopeIds.concat(fragmentSlotScopeIds):fragmentSlotScopeIds),null==n1?(hostInsert(fragmentStartAnchor,container,anchor),hostInsert(fragmentEndAnchor,container,anchor),mountChildren(n2.children,container,fragmentEndAnchor,parentComponent,parentSuspense,isSVG,slotScopeIds,optimized)):patchFlag>0&&64&patchFlag&&dynamicChildren&&n1.dynamicChildren?(patchBlockChildren(n1.dynamicChildren,dynamicChildren,container,parentComponent,parentSuspense,isSVG,slotScopeIds),(null!=n2.key||parentComponent&&n2===parentComponent.subTree)&&traverseStaticChildren(n1,n2,!0)):patchChildren(n1,n2,container,fragmentEndAnchor,parentComponent,parentSuspense,isSVG,slotScopeIds,optimized)},processComponent=(n1,n2,container,anchor,parentComponent,parentSuspense,isSVG,slotScopeIds,optimized)=>{n2.slotScopeIds=slotScopeIds,null==n1?512&n2.shapeFlag?parentComponent.ctx.activate(n2,container,anchor,isSVG,optimized):mountComponent(n2,container,anchor,parentComponent,parentSuspense,isSVG,optimized):updateComponent(n1,n2,optimized)},mountComponent=(initialVNode,container,anchor,parentComponent,parentSuspense,isSVG,optimized)=>{const instance=initialVNode.component=function createComponentInstance(vnode,parent,suspense){const type2=vnode.type,appContext=(parent?parent.appContext:vnode.appContext)||emptyAppContext,instance={uid:uid$1++,vnode:vnode,type:type2,parent:parent,appContext:appContext,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:parent?parent.provides:Object.create(appContext.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(type2,appContext),emitsOptions:normalizeEmitsOptions(type2,appContext),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:type2.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:suspense,suspenseId:suspense?suspense.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};instance.ctx={_:instance},instance.root=parent?parent.root:instance,instance.emit=emit$1.bind(null,instance),vnode.ce&&vnode.ce(instance);return instance}(initialVNode,parentComponent,parentSuspense);if(isKeepAlive(initialVNode)&&(instance.ctx.renderer=internals),function setupComponent(instance,isSSR=!1){isInSSRComponentSetup=isSSR;const{props:props2,children:children}=instance.vnode,isStateful=isStatefulComponent(instance);initProps(instance,props2,isStateful,isSSR),((instance,children)=>{if(32&instance.vnode.shapeFlag){const type2=children._;type2?(instance.slots=toRaw(children),def(children,"_",type2)):normalizeObjectSlots(children,instance.slots={})}else instance.slots={},children&&normalizeVNodeSlots(instance,children);def(instance.slots,InternalObjectKey,1)})(instance,children);const setupResult=isStateful?function setupStatefulComponent(instance,isSSR){const Component=instance.type;instance.accessCache=Object.create(null),instance.proxy=markRaw(new Proxy(instance.ctx,PublicInstanceProxyHandlers));const{setup:setup}=Component;if(setup){const setupContext=instance.setupContext=setup.length>1?function createSetupContext(instance){const expose=exposed=>{instance.exposed=exposed||{}};let attrs;return{get attrs(){return attrs||(attrs=function createAttrsProxy(instance){return new Proxy(instance.attrs,{get:(target,key)=>(track(instance,0,"$attrs"),target[key])})}(instance))},slots:instance.slots,emit:instance.emit,expose:expose}}(instance):null;setCurrentInstance(instance),pauseTracking();const setupResult=callWithErrorHandling(setup,instance,0,[instance.props,setupContext]);if(resetTracking(),unsetCurrentInstance(),isPromise(setupResult)){if(setupResult.then(unsetCurrentInstance,unsetCurrentInstance),isSSR)return setupResult.then((resolvedResult=>{handleSetupResult(instance,resolvedResult,isSSR)})).catch((e=>{handleError(e,instance,0)}));instance.asyncDep=setupResult}else handleSetupResult(instance,setupResult,isSSR)}else finishComponentSetup(instance,isSSR)}(instance,isSSR):void 0;return isInSSRComponentSetup=!1,setupResult}(instance),instance.asyncDep){if(parentSuspense&&parentSuspense.registerDep(instance,setupRenderEffect),!initialVNode.el){const placeholder=instance.subTree=createVNode(Comment);processCommentNode(null,placeholder,container,anchor)}}else setupRenderEffect(instance,initialVNode,container,anchor,parentSuspense,isSVG,optimized)},updateComponent=(n1,n2,optimized)=>{const instance=n2.component=n1.component;if(function shouldUpdateComponent(prevVNode,nextVNode,optimized){const{props:prevProps,children:prevChildren,component:component}=prevVNode,{props:nextProps,children:nextChildren,patchFlag:patchFlag}=nextVNode,emits=component.emitsOptions;if(nextVNode.dirs||nextVNode.transition)return!0;if(!(optimized&&patchFlag>=0))return!(!prevChildren&&!nextChildren||nextChildren&&nextChildren.$stable)||prevProps!==nextProps&&(prevProps?!nextProps||hasPropsChanged(prevProps,nextProps,emits):!!nextProps);if(1024&patchFlag)return!0;if(16&patchFlag)return prevProps?hasPropsChanged(prevProps,nextProps,emits):!!nextProps;if(8&patchFlag){const dynamicProps=nextVNode.dynamicProps;for(let i=0;i<dynamicProps.length;i++){const key=dynamicProps[i];if(nextProps[key]!==prevProps[key]&&!isEmitListener(emits,key))return!0}}return!1}(n1,n2,optimized)){if(instance.asyncDep&&!instance.asyncResolved)return void updateComponentPreRender(instance,n2,optimized);instance.next=n2,function invalidateJob(job){const i=queue.indexOf(job);i>flushIndex&&queue.splice(i,1)}(instance.update),instance.update()}else n2.el=n1.el,instance.vnode=n2},setupRenderEffect=(instance,initialVNode,container,anchor,parentSuspense,isSVG,optimized)=>{const componentUpdateFn=()=>{if(instance.isMounted){let vnodeHook,{next:next,bu:bu,u:u,parent:parent,vnode:vnode}=instance,originNext=next;toggleRecurse(instance,!1),next?(next.el=vnode.el,updateComponentPreRender(instance,next,optimized)):next=vnode,bu&&invokeArrayFns(bu),(vnodeHook=next.props&&next.props.onVnodeBeforeUpdate)&&invokeVNodeHook(vnodeHook,parent,next,vnode),toggleRecurse(instance,!0);const nextTree=renderComponentRoot(instance),prevTree=instance.subTree;instance.subTree=nextTree,patch(prevTree,nextTree,hostParentNode(prevTree.el),getNextHostNode(prevTree),instance,parentSuspense,isSVG),next.el=nextTree.el,null===originNext&&function updateHOCHostEl({vnode:vnode,parent:parent},el){for(;parent&&parent.subTree===vnode;)(vnode=parent.vnode).el=el,parent=parent.parent}(instance,nextTree.el),u&&queuePostRenderEffect(u,parentSuspense),(vnodeHook=next.props&&next.props.onVnodeUpdated)&&queuePostRenderEffect((()=>invokeVNodeHook(vnodeHook,parent,next,vnode)),parentSuspense)}else{let vnodeHook;const{el:el,props:props2}=initialVNode,{bm:bm,m:m,parent:parent}=instance,isAsyncWrapperVNode=isAsyncWrapper(initialVNode);if(toggleRecurse(instance,!1),bm&&invokeArrayFns(bm),!isAsyncWrapperVNode&&(vnodeHook=props2&&props2.onVnodeBeforeMount)&&invokeVNodeHook(vnodeHook,parent,initialVNode),toggleRecurse(instance,!0),el&&hydrateNode){const hydrateSubTree=()=>{instance.subTree=renderComponentRoot(instance),hydrateNode(el,instance.subTree,instance,parentSuspense,null)};isAsyncWrapperVNode?initialVNode.type.__asyncLoader().then((()=>!instance.isUnmounted&&hydrateSubTree())):hydrateSubTree()}else{const subTree=instance.subTree=renderComponentRoot(instance);patch(null,subTree,container,anchor,instance,parentSuspense,isSVG),initialVNode.el=subTree.el}if(m&&queuePostRenderEffect(m,parentSuspense),!isAsyncWrapperVNode&&(vnodeHook=props2&&props2.onVnodeMounted)){const scopedInitialVNode=initialVNode;queuePostRenderEffect((()=>invokeVNodeHook(vnodeHook,parent,scopedInitialVNode)),parentSuspense)}(256&initialVNode.shapeFlag||parent&&isAsyncWrapper(parent.vnode)&&256&parent.vnode.shapeFlag)&&instance.a&&queuePostRenderEffect(instance.a,parentSuspense),instance.isMounted=!0,initialVNode=container=anchor=null}},effect=instance.effect=new ReactiveEffect(componentUpdateFn,(()=>queueJob(update2)),instance.scope),update2=instance.update=()=>effect.run();update2.id=instance.uid,toggleRecurse(instance,!0),update2()},updateComponentPreRender=(instance,nextVNode,optimized)=>{nextVNode.component=instance;const prevProps=instance.vnode.props;instance.vnode=nextVNode,instance.next=null,function updateProps(instance,rawProps,rawPrevProps,optimized){const{props:props2,attrs:attrs,vnode:{patchFlag:patchFlag}}=instance,rawCurrentProps=toRaw(props2),[options]=instance.propsOptions;let hasAttrsChanged=!1;if(!(optimized||patchFlag>0)||16&patchFlag){let kebabKey;setFullProps(instance,rawProps,props2,attrs)&&(hasAttrsChanged=!0);for(const key in rawCurrentProps)rawProps&&(hasOwn$1(rawProps,key)||(kebabKey=hyphenate(key))!==key&&hasOwn$1(rawProps,kebabKey))||(options?!rawPrevProps||void 0===rawPrevProps[key]&&void 0===rawPrevProps[kebabKey]||(props2[key]=resolvePropValue(options,rawCurrentProps,key,void 0,instance,!0)):delete props2[key]);if(attrs!==rawCurrentProps)for(const key in attrs)rawProps&&hasOwn$1(rawProps,key)||(delete attrs[key],hasAttrsChanged=!0)}else if(8&patchFlag){const propsToUpdate=instance.vnode.dynamicProps;for(let i=0;i<propsToUpdate.length;i++){let key=propsToUpdate[i];if(isEmitListener(instance.emitsOptions,key))continue;const value=rawProps[key];if(options)if(hasOwn$1(attrs,key))value!==attrs[key]&&(attrs[key]=value,hasAttrsChanged=!0);else{const camelizedKey=camelize(key);props2[camelizedKey]=resolvePropValue(options,rawCurrentProps,camelizedKey,value,instance,!1)}else value!==attrs[key]&&(attrs[key]=value,hasAttrsChanged=!0)}}hasAttrsChanged&&trigger(instance,"set","$attrs")}(instance,nextVNode.props,prevProps,optimized),((instance,children,optimized)=>{const{vnode:vnode,slots:slots}=instance;let needDeletionCheck=!0,deletionComparisonTarget=EMPTY_OBJ;if(32&vnode.shapeFlag){const type2=children._;type2?optimized&&1===type2?needDeletionCheck=!1:(extend$1(slots,children),optimized||1!==type2||delete slots._):(needDeletionCheck=!children.$stable,normalizeObjectSlots(children,slots)),deletionComparisonTarget=children}else children&&(normalizeVNodeSlots(instance,children),deletionComparisonTarget={default:1});if(needDeletionCheck)for(const key in slots)isInternalKey(key)||key in deletionComparisonTarget||delete slots[key]})(instance,nextVNode.children,optimized),pauseTracking(),flushPreFlushCbs(),resetTracking()},patchChildren=(n1,n2,container,anchor,parentComponent,parentSuspense,isSVG,slotScopeIds,optimized=!1)=>{const c1=n1&&n1.children,prevShapeFlag=n1?n1.shapeFlag:0,c2=n2.children,{patchFlag:patchFlag,shapeFlag:shapeFlag}=n2;if(patchFlag>0){if(128&patchFlag)return void patchKeyedChildren(c1,c2,container,anchor,parentComponent,parentSuspense,isSVG,slotScopeIds,optimized);if(256&patchFlag)return void patchUnkeyedChildren(c1,c2,container,anchor,parentComponent,parentSuspense,isSVG,slotScopeIds,optimized)}8&shapeFlag?(16&prevShapeFlag&&unmountChildren(c1,parentComponent,parentSuspense),c2!==c1&&hostSetElementText(container,c2)):16&prevShapeFlag?16&shapeFlag?patchKeyedChildren(c1,c2,container,anchor,parentComponent,parentSuspense,isSVG,slotScopeIds,optimized):unmountChildren(c1,parentComponent,parentSuspense,!0):(8&prevShapeFlag&&hostSetElementText(container,""),16&shapeFlag&&mountChildren(c2,container,anchor,parentComponent,parentSuspense,isSVG,slotScopeIds,optimized))},patchUnkeyedChildren=(c1,c2,container,anchor,parentComponent,parentSuspense,isSVG,slotScopeIds,optimized)=>{c2=c2||EMPTY_ARR;const oldLength=(c1=c1||EMPTY_ARR).length,newLength=c2.length,commonLength=Math.min(oldLength,newLength);let i;for(i=0;i<commonLength;i++){const nextChild=c2[i]=optimized?cloneIfMounted(c2[i]):normalizeVNode(c2[i]);patch(c1[i],nextChild,container,null,parentComponent,parentSuspense,isSVG,slotScopeIds,optimized)}oldLength>newLength?unmountChildren(c1,parentComponent,parentSuspense,!0,!1,commonLength):mountChildren(c2,container,anchor,parentComponent,parentSuspense,isSVG,slotScopeIds,optimized,commonLength)},patchKeyedChildren=(c1,c2,container,parentAnchor,parentComponent,parentSuspense,isSVG,slotScopeIds,optimized)=>{let i=0;const l2=c2.length;let e1=c1.length-1,e2=l2-1;for(;i<=e1&&i<=e2;){const n1=c1[i],n2=c2[i]=optimized?cloneIfMounted(c2[i]):normalizeVNode(c2[i]);if(!isSameVNodeType(n1,n2))break;patch(n1,n2,container,null,parentComponent,parentSuspense,isSVG,slotScopeIds,optimized),i++}for(;i<=e1&&i<=e2;){const n1=c1[e1],n2=c2[e2]=optimized?cloneIfMounted(c2[e2]):normalizeVNode(c2[e2]);if(!isSameVNodeType(n1,n2))break;patch(n1,n2,container,null,parentComponent,parentSuspense,isSVG,slotScopeIds,optimized),e1--,e2--}if(i>e1){if(i<=e2){const nextPos=e2+1,anchor=nextPos<l2?c2[nextPos].el:parentAnchor;for(;i<=e2;)patch(null,c2[i]=optimized?cloneIfMounted(c2[i]):normalizeVNode(c2[i]),container,anchor,parentComponent,parentSuspense,isSVG,slotScopeIds,optimized),i++}}else if(i>e2)for(;i<=e1;)unmount(c1[i],parentComponent,parentSuspense,!0),i++;else{const s1=i,s2=i,keyToNewIndexMap=new Map;for(i=s2;i<=e2;i++){const nextChild=c2[i]=optimized?cloneIfMounted(c2[i]):normalizeVNode(c2[i]);null!=nextChild.key&&keyToNewIndexMap.set(nextChild.key,i)}let j,patched=0;const toBePatched=e2-s2+1;let moved=!1,maxNewIndexSoFar=0;const newIndexToOldIndexMap=new Array(toBePatched);for(i=0;i<toBePatched;i++)newIndexToOldIndexMap[i]=0;for(i=s1;i<=e1;i++){const prevChild=c1[i];if(patched>=toBePatched){unmount(prevChild,parentComponent,parentSuspense,!0);continue}let newIndex;if(null!=prevChild.key)newIndex=keyToNewIndexMap.get(prevChild.key);else for(j=s2;j<=e2;j++)if(0===newIndexToOldIndexMap[j-s2]&&isSameVNodeType(prevChild,c2[j])){newIndex=j;break}void 0===newIndex?unmount(prevChild,parentComponent,parentSuspense,!0):(newIndexToOldIndexMap[newIndex-s2]=i+1,newIndex>=maxNewIndexSoFar?maxNewIndexSoFar=newIndex:moved=!0,patch(prevChild,c2[newIndex],container,null,parentComponent,parentSuspense,isSVG,slotScopeIds,optimized),patched++)}const increasingNewIndexSequence=moved?function getSequence(arr){const p2=arr.slice(),result=[0];let i,j,u,v,c;const len=arr.length;for(i=0;i<len;i++){const arrI=arr[i];if(0!==arrI){if(j=result[result.length-1],arr[j]<arrI){p2[i]=j,result.push(i);continue}for(u=0,v=result.length-1;u<v;)c=u+v>>1,arr[result[c]]<arrI?u=c+1:v=c;arrI<arr[result[u]]&&(u>0&&(p2[i]=result[u-1]),result[u]=i)}}u=result.length,v=result[u-1];for(;u-- >0;)result[u]=v,v=p2[v];return result}(newIndexToOldIndexMap):EMPTY_ARR;for(j=increasingNewIndexSequence.length-1,i=toBePatched-1;i>=0;i--){const nextIndex=s2+i,nextChild=c2[nextIndex],anchor=nextIndex+1<l2?c2[nextIndex+1].el:parentAnchor;0===newIndexToOldIndexMap[i]?patch(null,nextChild,container,anchor,parentComponent,parentSuspense,isSVG,slotScopeIds,optimized):moved&&(j<0||i!==increasingNewIndexSequence[j]?move(nextChild,container,anchor,2):j--)}}},move=(vnode,container,anchor,moveType,parentSuspense=null)=>{const{el:el,type:type2,transition:transition,children:children,shapeFlag:shapeFlag}=vnode;if(6&shapeFlag)return void move(vnode.component.subTree,container,anchor,moveType);if(128&shapeFlag)return void vnode.suspense.move(container,anchor,moveType);if(64&shapeFlag)return void type2.move(vnode,container,anchor,internals);if(type2===Fragment){hostInsert(el,container,anchor);for(let i=0;i<children.length;i++)move(children[i],container,anchor,moveType);return void hostInsert(vnode.anchor,container,anchor)}if(type2===Static)return void moveStaticNode(vnode,container,anchor);if(2!==moveType&&1&shapeFlag&&transition)if(0===moveType)transition.beforeEnter(el),hostInsert(el,container,anchor),queuePostRenderEffect((()=>transition.enter(el)),parentSuspense);else{const{leave:leave,delayLeave:delayLeave,afterLeave:afterLeave}=transition,remove3=()=>hostInsert(el,container,anchor),performLeave=()=>{leave(el,(()=>{remove3(),afterLeave&&afterLeave()}))};delayLeave?delayLeave(el,remove3,performLeave):performLeave()}else hostInsert(el,container,anchor)},unmount=(vnode,parentComponent,parentSuspense,doRemove=!1,optimized=!1)=>{const{type:type2,props:props2,ref:ref,children:children,dynamicChildren:dynamicChildren,shapeFlag:shapeFlag,patchFlag:patchFlag,dirs:dirs}=vnode;if(null!=ref&&setRef(ref,null,parentSuspense,vnode,!0),256&shapeFlag)return void parentComponent.ctx.deactivate(vnode);const shouldInvokeDirs=1&shapeFlag&&dirs,shouldInvokeVnodeHook=!isAsyncWrapper(vnode);let vnodeHook;if(shouldInvokeVnodeHook&&(vnodeHook=props2&&props2.onVnodeBeforeUnmount)&&invokeVNodeHook(vnodeHook,parentComponent,vnode),6&shapeFlag)unmountComponent(vnode.component,parentSuspense,doRemove);else{if(128&shapeFlag)return void vnode.suspense.unmount(parentSuspense,doRemove);shouldInvokeDirs&&invokeDirectiveHook(vnode,null,parentComponent,"beforeUnmount"),64&shapeFlag?vnode.type.remove(vnode,parentComponent,parentSuspense,optimized,internals,doRemove):dynamicChildren&&(type2!==Fragment||patchFlag>0&&64&patchFlag)?unmountChildren(dynamicChildren,parentComponent,parentSuspense,!1,!0):(type2===Fragment&&384&patchFlag||!optimized&&16&shapeFlag)&&unmountChildren(children,parentComponent,parentSuspense),doRemove&&remove2(vnode)}(shouldInvokeVnodeHook&&(vnodeHook=props2&&props2.onVnodeUnmounted)||shouldInvokeDirs)&&queuePostRenderEffect((()=>{vnodeHook&&invokeVNodeHook(vnodeHook,parentComponent,vnode),shouldInvokeDirs&&invokeDirectiveHook(vnode,null,parentComponent,"unmounted")}),parentSuspense)},remove2=vnode=>{const{type:type2,el:el,anchor:anchor,transition:transition}=vnode;if(type2===Fragment)return void removeFragment(el,anchor);if(type2===Static)return void removeStaticNode(vnode);const performRemove=()=>{hostRemove(el),transition&&!transition.persisted&&transition.afterLeave&&transition.afterLeave()};if(1&vnode.shapeFlag&&transition&&!transition.persisted){const{leave:leave,delayLeave:delayLeave}=transition,performLeave=()=>leave(el,performRemove);delayLeave?delayLeave(vnode.el,performRemove,performLeave):performLeave()}else performRemove()},removeFragment=(cur,end)=>{let next;for(;cur!==end;)next=hostNextSibling(cur),hostRemove(cur),cur=next;hostRemove(end)},unmountComponent=(instance,parentSuspense,doRemove)=>{const{bum:bum,scope:scope,update:update2,subTree:subTree,um:um}=instance;bum&&invokeArrayFns(bum),scope.stop(),update2&&(update2.active=!1,unmount(subTree,instance,parentSuspense,doRemove)),um&&queuePostRenderEffect(um,parentSuspense),queuePostRenderEffect((()=>{instance.isUnmounted=!0}),parentSuspense),parentSuspense&&parentSuspense.pendingBranch&&!parentSuspense.isUnmounted&&instance.asyncDep&&!instance.asyncResolved&&instance.suspenseId===parentSuspense.pendingId&&(parentSuspense.deps--,0===parentSuspense.deps&&parentSuspense.resolve())},unmountChildren=(children,parentComponent,parentSuspense,doRemove=!1,optimized=!1,start=0)=>{for(let i=start;i<children.length;i++)unmount(children[i],parentComponent,parentSuspense,doRemove,optimized)},getNextHostNode=vnode=>6&vnode.shapeFlag?getNextHostNode(vnode.component.subTree):128&vnode.shapeFlag?vnode.suspense.next():hostNextSibling(vnode.anchor||vnode.el),render=(vnode,container,isSVG)=>{null==vnode?container._vnode&&unmount(container._vnode,null,null,!0):patch(container._vnode||null,vnode,container,null,null,null,isSVG),flushPreFlushCbs(),flushPostFlushCbs(),container._vnode=vnode},internals={p:patch,um:unmount,m:move,r:remove2,mt:mountComponent,mc:mountChildren,pc:patchChildren,pbc:patchBlockChildren,n:getNextHostNode,o:options};let hydrate,hydrateNode;createHydrationFns&&([hydrate,hydrateNode]=createHydrationFns(internals));return{render:render,hydrate:hydrate,createApp:createAppAPI(render,hydrate)}}(options)}function toggleRecurse({effect:effect,update:update2},allowed){effect.allowRecurse=update2.allowRecurse=allowed}function traverseStaticChildren(n1,n2,shallow=!1){const ch1=n1.children,ch2=n2.children;if(isArray$1(ch1)&&isArray$1(ch2))for(let i=0;i<ch1.length;i++){const c1=ch1[i];let c2=ch2[i];1&c2.shapeFlag&&!c2.dynamicChildren&&((c2.patchFlag<=0||32===c2.patchFlag)&&(c2=ch2[i]=cloneIfMounted(ch2[i]),c2.el=c1.el),shallow||traverseStaticChildren(c1,c2)),c2.type===Text&&(c2.el=c1.el)}}const Fragment=Symbol(void 0),Text=Symbol(void 0),Comment=Symbol(void 0),Static=Symbol(void 0),blockStack=[];let currentBlock=null;function openBlock(disableTracking=!1){blockStack.push(currentBlock=disableTracking?null:[])}let isBlockTreeEnabled=1;function setBlockTracking(value){isBlockTreeEnabled+=value}function setupBlock(vnode){return vnode.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(vnode),vnode}function createElementBlock(type2,props2,children,patchFlag,dynamicProps,shapeFlag){return setupBlock(createBaseVNode(type2,props2,children,patchFlag,dynamicProps,shapeFlag,!0))}function createBlock(type2,props2,children,patchFlag,dynamicProps){return setupBlock(createVNode(type2,props2,children,patchFlag,dynamicProps,!0))}function isVNode(value){return!!value&&!0===value.__v_isVNode}function isSameVNodeType(n1,n2){return n1.type===n2.type&&n1.key===n2.key}const InternalObjectKey="__vInternal",normalizeKey=({key:key})=>null!=key?key:null,normalizeRef=({ref:ref,ref_key:ref_key,ref_for:ref_for})=>null!=ref?isString(ref)||isRef(ref)||isFunction(ref)?{i:currentRenderingInstance,r:ref,k:ref_key,f:!!ref_for}:ref:null;function createBaseVNode(type2,props2=null,children=null,patchFlag=0,dynamicProps=null,shapeFlag=(type2===Fragment?0:1),isBlockNode=!1,needFullChildrenNormalization=!1){const vnode={__v_isVNode:!0,__v_skip:!0,type:type2,props:props2,key:props2&&normalizeKey(props2),ref:props2&&normalizeRef(props2),scopeId:currentScopeId,slotScopeIds:null,children:children,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:shapeFlag,patchFlag:patchFlag,dynamicProps:dynamicProps,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return needFullChildrenNormalization?(normalizeChildren(vnode,children),128&shapeFlag&&type2.normalize(vnode)):children&&(vnode.shapeFlag|=isString(children)?8:16),isBlockTreeEnabled>0&&!isBlockNode&&currentBlock&&(vnode.patchFlag>0||6&shapeFlag)&&32!==vnode.patchFlag&&currentBlock.push(vnode),vnode}const createVNode=function _createVNode(type2,props2=null,children=null,patchFlag=0,dynamicProps=null,isBlockNode=!1){type2&&type2!==NULL_DYNAMIC_COMPONENT||(type2=Comment);if(isVNode(type2)){const cloned=cloneVNode(type2,props2,!0);return children&&normalizeChildren(cloned,children),isBlockTreeEnabled>0&&!isBlockNode&&currentBlock&&(6&cloned.shapeFlag?currentBlock[currentBlock.indexOf(type2)]=cloned:currentBlock.push(cloned)),cloned.patchFlag|=-2,cloned}(function isClassComponent(value){return isFunction(value)&&"__vccOpts"in value})(type2)&&(type2=type2.__vccOpts);if(props2){props2=function guardReactiveProps(props2){return props2?isProxy(props2)||InternalObjectKey in props2?extend$1({},props2):props2:null}(props2);let{class:klass,style:style}=props2;klass&&!isString(klass)&&(props2.class=normalizeClass(klass)),isObject(style)&&(isProxy(style)&&!isArray$1(style)&&(style=extend$1({},style)),props2.style=normalizeStyle(style))}const shapeFlag=isString(type2)?1:(type2=>type2.__isSuspense)(type2)?128:(type2=>type2.__isTeleport)(type2)?64:isObject(type2)?4:isFunction(type2)?2:0;return createBaseVNode(type2,props2,children,patchFlag,dynamicProps,shapeFlag,isBlockNode,!0)};function cloneVNode(vnode,extraProps,mergeRef=!1){const{props:props2,ref:ref,patchFlag:patchFlag,children:children}=vnode,mergedProps=extraProps?function mergeProps(...args){const ret={};for(let i=0;i<args.length;i++){const toMerge=args[i];for(const key in toMerge)if("class"===key)ret.class!==toMerge.class&&(ret.class=normalizeClass([ret.class,toMerge.class]));else if("style"===key)ret.style=normalizeStyle([ret.style,toMerge.style]);else if(isOn(key)){const existing=ret[key],incoming=toMerge[key];!incoming||existing===incoming||isArray$1(existing)&&existing.includes(incoming)||(ret[key]=existing?[].concat(existing,incoming):incoming)}else""!==key&&(ret[key]=toMerge[key])}return ret}(props2||{},extraProps):props2;return{__v_isVNode:!0,__v_skip:!0,type:vnode.type,props:mergedProps,key:mergedProps&&normalizeKey(mergedProps),ref:extraProps&&extraProps.ref?mergeRef&&ref?isArray$1(ref)?ref.concat(normalizeRef(extraProps)):[ref,normalizeRef(extraProps)]:normalizeRef(extraProps):ref,scopeId:vnode.scopeId,slotScopeIds:vnode.slotScopeIds,children:children,target:vnode.target,targetAnchor:vnode.targetAnchor,staticCount:vnode.staticCount,shapeFlag:vnode.shapeFlag,patchFlag:extraProps&&vnode.type!==Fragment?-1===patchFlag?16:16|patchFlag:patchFlag,dynamicProps:vnode.dynamicProps,dynamicChildren:vnode.dynamicChildren,appContext:vnode.appContext,dirs:vnode.dirs,transition:vnode.transition,component:vnode.component,suspense:vnode.suspense,ssContent:vnode.ssContent&&cloneVNode(vnode.ssContent),ssFallback:vnode.ssFallback&&cloneVNode(vnode.ssFallback),el:vnode.el,anchor:vnode.anchor,ctx:vnode.ctx}}function createTextVNode(text=" ",flag=0){return createVNode(Text,null,text,flag)}function createCommentVNode(text="",asBlock=!1){return asBlock?(openBlock(),createBlock(Comment,null,text)):createVNode(Comment,null,text)}function normalizeVNode(child){return null==child||"boolean"==typeof child?createVNode(Comment):isArray$1(child)?createVNode(Fragment,null,child.slice()):"object"==typeof child?cloneIfMounted(child):createVNode(Text,null,String(child))}function cloneIfMounted(child){return null===child.el&&-1!==child.patchFlag||child.memo?child:cloneVNode(child)}function normalizeChildren(vnode,children){let type2=0;const{shapeFlag:shapeFlag}=vnode;if(null==children)children=null;else if(isArray$1(children))type2=16;else if("object"==typeof children){if(65&shapeFlag){const slot=children.default;return void(slot&&(slot._c&&(slot._d=!1),normalizeChildren(vnode,slot()),slot._c&&(slot._d=!0)))}{type2=32;const slotFlag=children._;slotFlag||InternalObjectKey in children?3===slotFlag&&currentRenderingInstance&&(1===currentRenderingInstance.slots._?children._=1:(children._=2,vnode.patchFlag|=1024)):children._ctx=currentRenderingInstance}}else isFunction(children)?(children={default:children,_ctx:currentRenderingInstance},type2=32):(children=String(children),64&shapeFlag?(type2=16,children=[createTextVNode(children)]):type2=8);vnode.children=children,vnode.shapeFlag|=type2}function invokeVNodeHook(hook,instance,vnode,prevVNode=null){callWithAsyncErrorHandling(hook,instance,7,[vnode,prevVNode])}const emptyAppContext=createAppContext();let uid$1=0;let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance,setCurrentInstance=instance=>{currentInstance=instance,instance.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),currentInstance=null};function isStatefulComponent(instance){return 4&instance.vnode.shapeFlag}let isInSSRComponentSetup=!1;function handleSetupResult(instance,setupResult,isSSR){isFunction(setupResult)?instance.type.__ssrInlineRender?instance.ssrRender=setupResult:instance.render=setupResult:isObject(setupResult)&&(instance.setupState=proxyRefs(setupResult)),finishComponentSetup(instance,isSSR)}function finishComponentSetup(instance,isSSR,skipOptions){const Component=instance.type;instance.render||(instance.render=Component.render||NOOP),setCurrentInstance(instance),pauseTracking(),applyOptions(instance),resetTracking(),unsetCurrentInstance()}function getExposeProxy(instance){if(instance.exposed)return instance.exposeProxy||(instance.exposeProxy=new Proxy(proxyRefs(markRaw(instance.exposed)),{get:(target,key)=>key in target?target[key]:key in publicPropertiesMap?publicPropertiesMap[key](instance):void 0,has:(target,key)=>key in target||key in publicPropertiesMap}))}const computed=(getterOrOptions,debugOptions)=>function computed$1(getterOrOptions,debugOptions,isSSR=!1){let getter,setter;const onlyGetter=isFunction(getterOrOptions);return onlyGetter?(getter=getterOrOptions,setter=NOOP):(getter=getterOrOptions.get,setter=getterOrOptions.set),new ComputedRefImpl(getter,setter,onlyGetter||!setter,isSSR)}(getterOrOptions,0,isInSSRComponentSetup),ssrContextKey=Symbol(""),useSSRContext=()=>inject(ssrContextKey),version="3.2.45",doc="undefined"!=typeof document?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(child,parent,anchor)=>{parent.insertBefore(child,anchor||null)},remove:child=>{const parent=child.parentNode;parent&&parent.removeChild(child)},createElement:(tag,isSVG,is,props2)=>{const el=isSVG?doc.createElementNS("http://www.w3.org/2000/svg",tag):doc.createElement(tag,is?{is:is}:void 0);return"select"===tag&&props2&&null!=props2.multiple&&el.setAttribute("multiple",props2.multiple),el},createText:text=>doc.createTextNode(text),createComment:text=>doc.createComment(text),setText:(node,text)=>{node.nodeValue=text},setElementText:(el,text)=>{el.textContent=text},parentNode:node=>node.parentNode,nextSibling:node=>node.nextSibling,querySelector:selector=>doc.querySelector(selector),setScopeId(el,id){el.setAttribute(id,"")},insertStaticContent(content,parent,anchor,isSVG,start,end){const before=anchor?anchor.previousSibling:parent.lastChild;if(start&&(start===end||start.nextSibling))for(;parent.insertBefore(start.cloneNode(!0),anchor),start!==end&&(start=start.nextSibling););else{templateContainer.innerHTML=isSVG?`<svg>${content}</svg>`:content;const template=templateContainer.content;if(isSVG){const wrapper=template.firstChild;for(;wrapper.firstChild;)template.appendChild(wrapper.firstChild);template.removeChild(wrapper)}parent.insertBefore(template,anchor)}return[before?before.nextSibling:parent.firstChild,anchor?anchor.previousSibling:parent.lastChild]}};const importantRE=/\s*!important$/;function setStyle(style,name,val){if(isArray$1(val))val.forEach((v=>setStyle(style,name,v)));else if(null==val&&(val=""),name.startsWith("--"))style.setProperty(name,val);else{const prefixed=function autoPrefix(style,rawName){const cached=prefixCache[rawName];if(cached)return cached;let name=camelize(rawName);if("filter"!==name&&name in style)return prefixCache[rawName]=name;name=capitalize(name);for(let i=0;i<prefixes.length;i++){const prefixed=prefixes[i]+name;if(prefixed in style)return prefixCache[rawName]=prefixed}return rawName}(style,name);importantRE.test(val)?style.setProperty(hyphenate(prefixed),val.replace(importantRE,""),"important"):style[prefixed]=val}}const prefixes=["Webkit","Moz","ms"],prefixCache={};const xlinkNS="http://www.w3.org/1999/xlink";function addEventListener$1(el,event,handler,options){el.addEventListener(event,handler,options)}function patchEvent(el,rawName,prevValue,nextValue,instance=null){const invokers=el._vei||(el._vei={}),existingInvoker=invokers[rawName];if(nextValue&&existingInvoker)existingInvoker.value=nextValue;else{const[name,options]=function parseName(name){let options;if(optionsModifierRE.test(name)){let m;for(options={};m=name.match(optionsModifierRE);)name=name.slice(0,name.length-m[0].length),options[m[0].toLowerCase()]=!0}const event=":"===name[2]?name.slice(3):hyphenate(name.slice(2));return[event,options]}(rawName);if(nextValue){const invoker=invokers[rawName]=function createInvoker(initialValue,instance){const invoker=e=>{if(e._vts){if(e._vts<=invoker.attached)return}else e._vts=Date.now();callWithAsyncErrorHandling(function patchStopImmediatePropagation(e,value){if(isArray$1(value)){const originalStop=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{originalStop.call(e),e._stopped=!0},value.map((fn=>e2=>!e2._stopped&&fn&&fn(e2)))}return value}(e,invoker.value),instance,5,[e])};return invoker.value=initialValue,invoker.attached=(()=>cachedNow||(p.then((()=>cachedNow=0)),cachedNow=Date.now()))(),invoker}(nextValue,instance);addEventListener$1(el,name,invoker,options)}else existingInvoker&&(!function removeEventListener(el,event,handler,options){el.removeEventListener(event,handler,options)}(el,name,existingInvoker,options),invokers[rawName]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;let cachedNow=0;const p=Promise.resolve();const nativeOnRE=/^on[a-z]/;Boolean;const getModelAssigner=vnode=>{const fn=vnode.props["onUpdate:modelValue"]||!1;return isArray$1(fn)?value=>invokeArrayFns(fn,value):fn},vModelSelect={deep:!0,created(el,{value:value,modifiers:{number:number}},vnode){const isSetModel=isSet(value);addEventListener$1(el,"change",(()=>{const selectedVal=Array.prototype.filter.call(el.options,(o=>o.selected)).map((o=>number?toNumber(getValue(o)):getValue(o)));el._assign(el.multiple?isSetModel?new Set(selectedVal):selectedVal:selectedVal[0])})),el._assign=getModelAssigner(vnode)},mounted(el,{value:value}){setSelected(el,value)},beforeUpdate(el,_binding,vnode){el._assign=getModelAssigner(vnode)},updated(el,{value:value}){setSelected(el,value)}};function setSelected(el,value){const isMultiple=el.multiple;if(!isMultiple||isArray$1(value)||isSet(value)){for(let i=0,l=el.options.length;i<l;i++){const option=el.options[i],optionValue=getValue(option);if(isMultiple)isArray$1(value)?option.selected=looseIndexOf(value,optionValue)>-1:option.selected=value.has(optionValue);else if(looseEqual(getValue(option),value))return void(el.selectedIndex!==i&&(el.selectedIndex=i))}isMultiple||-1===el.selectedIndex||(el.selectedIndex=-1)}}function getValue(el){return"_value"in el?el._value:el.value}const rendererOptions=extend$1({patchProp:(el,key,prevValue,nextValue,isSVG=!1,prevChildren,parentComponent,parentSuspense,unmountChildren)=>{"class"===key?function patchClass(el,value,isSVG){const transitionClasses=el._vtc;transitionClasses&&(value=(value?[value,...transitionClasses]:[...transitionClasses]).join(" ")),null==value?el.removeAttribute("class"):isSVG?el.setAttribute("class",value):el.className=value}(el,nextValue,isSVG):"style"===key?function patchStyle(el,prev,next){const style=el.style,isCssString=isString(next);if(next&&!isCssString){for(const key in next)setStyle(style,key,next[key]);if(prev&&!isString(prev))for(const key in prev)null==next[key]&&setStyle(style,key,"")}else{const currentDisplay=style.display;isCssString?prev!==next&&(style.cssText=next):prev&&el.removeAttribute("style"),"_vod"in el&&(style.display=currentDisplay)}}(el,prevValue,nextValue):isOn(key)?isModelListener(key)||patchEvent(el,key,0,nextValue,parentComponent):("."===key[0]?(key=key.slice(1),1):"^"===key[0]?(key=key.slice(1),0):function shouldSetAsProp(el,key,value,isSVG){if(isSVG)return"innerHTML"===key||"textContent"===key||!!(key in el&&nativeOnRE.test(key)&&isFunction(value));if("spellcheck"===key||"draggable"===key||"translate"===key)return!1;if("form"===key)return!1;if("list"===key&&"INPUT"===el.tagName)return!1;if("type"===key&&"TEXTAREA"===el.tagName)return!1;if(nativeOnRE.test(key)&&isString(value))return!1;return key in el}(el,key,nextValue,isSVG))?function patchDOMProp(el,key,value,prevChildren,parentComponent,parentSuspense,unmountChildren){if("innerHTML"===key||"textContent"===key)return prevChildren&&unmountChildren(prevChildren,parentComponent,parentSuspense),void(el[key]=null==value?"":value);if("value"===key&&"PROGRESS"!==el.tagName&&!el.tagName.includes("-")){el._value=value;const newValue=null==value?"":value;return el.value===newValue&&"OPTION"!==el.tagName||(el.value=newValue),void(null==value&&el.removeAttribute(key))}let needRemove=!1;if(""===value||null==value){const type2=typeof el[key];"boolean"===type2?value=includeBooleanAttr(value):null==value&&"string"===type2?(value="",needRemove=!0):"number"===type2&&(value=0,needRemove=!0)}try{el[key]=value}catch(e){}needRemove&&el.removeAttribute(key)}(el,key,nextValue,prevChildren,parentComponent,parentSuspense,unmountChildren):("true-value"===key?el._trueValue=nextValue:"false-value"===key&&(el._falseValue=nextValue),function patchAttr(el,key,value,isSVG,instance){if(isSVG&&key.startsWith("xlink:"))null==value?el.removeAttributeNS(xlinkNS,key.slice(6,key.length)):el.setAttributeNS(xlinkNS,key,value);else{const isBoolean=isSpecialBooleanAttr(key);null==value||isBoolean&&!includeBooleanAttr(value)?el.removeAttribute(key):el.setAttribute(key,isBoolean?"":value)}}(el,key,nextValue,isSVG))}},nodeOps);let renderer;var util,util2;(util2=util||(util={})).assertEqual=val=>val,util2.assertIs=function assertIs(_arg){},util2.assertNever=function assertNever(_x){throw new Error},util2.arrayToEnum=items=>{const obj={};for(const item of items)obj[item]=item;return obj},util2.getValidEnumValues=obj=>{const validKeys=util2.objectKeys(obj).filter((k=>"number"!=typeof obj[obj[k]])),filtered={};for(const k of validKeys)filtered[k]=obj[k];return util2.objectValues(filtered)},util2.objectValues=obj=>util2.objectKeys(obj).map((function(e){return obj[e]})),util2.objectKeys="function"==typeof Object.keys?obj=>Object.keys(obj):object=>{const keys2=[];for(const key in object)Object.prototype.hasOwnProperty.call(object,key)&&keys2.push(key);return keys2},util2.find=(arr,checker)=>{for(const item of arr)if(checker(item))return item},util2.isInteger="function"==typeof Number.isInteger?val=>Number.isInteger(val):val=>"number"==typeof val&&isFinite(val)&&Math.floor(val)===val,util2.joinValues=function joinValues(array,separator=" | "){return array.map((val=>"string"==typeof val?`'${val}'`:val)).join(separator)},util2.jsonStringifyReplacer=(_,value)=>"bigint"==typeof value?value.toString():value;const ZodParsedType=util.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),getParsedType=data2=>{switch(typeof data2){case"undefined":return ZodParsedType.undefined;case"string":return ZodParsedType.string;case"number":return isNaN(data2)?ZodParsedType.nan:ZodParsedType.number;case"boolean":return ZodParsedType.boolean;case"function":return ZodParsedType.function;case"bigint":return ZodParsedType.bigint;case"symbol":return ZodParsedType.symbol;case"object":return Array.isArray(data2)?ZodParsedType.array:null===data2?ZodParsedType.null:data2.then&&"function"==typeof data2.then&&data2.catch&&"function"==typeof data2.catch?ZodParsedType.promise:"undefined"!=typeof Map&&data2 instanceof Map?ZodParsedType.map:"undefined"!=typeof Set&&data2 instanceof Set?ZodParsedType.set:"undefined"!=typeof Date&&data2 instanceof Date?ZodParsedType.date:ZodParsedType.object;default:return ZodParsedType.unknown}},ZodIssueCode=util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ZodError extends Error{constructor(issues){super(),this.issues=[],this.addIssue=sub=>{this.issues=[...this.issues,sub]},this.addIssues=(subs=[])=>{this.issues=[...this.issues,...subs]};const actualProto=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,actualProto):this.__proto__=actualProto,this.name="ZodError",this.issues=issues}get errors(){return this.issues}format(_mapper){const mapper=_mapper||function(issue){return issue.message},fieldErrors={_errors:[]},processError=error=>{for(const issue of error.issues)if("invalid_union"===issue.code)issue.unionErrors.map(processError);else if("invalid_return_type"===issue.code)processError(issue.returnTypeError);else if("invalid_arguments"===issue.code)processError(issue.argumentsError);else if(0===issue.path.length)fieldErrors._errors.push(mapper(issue));else{let curr=fieldErrors,i=0;for(;i<issue.path.length;){const el=issue.path[i];i===issue.path.length-1?(curr[el]=curr[el]||{_errors:[]},curr[el]._errors.push(mapper(issue))):curr[el]=curr[el]||{_errors:[]},curr=curr[el],i++}}};return processError(this),fieldErrors}toString(){return this.message}get message(){return JSON.stringify(this.issues,util.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(mapper=(issue=>issue.message)){const fieldErrors={},formErrors=[];for(const sub of this.issues)sub.path.length>0?(fieldErrors[sub.path[0]]=fieldErrors[sub.path[0]]||[],fieldErrors[sub.path[0]].push(mapper(sub))):formErrors.push(mapper(sub));return{formErrors:formErrors,fieldErrors:fieldErrors}}get formErrors(){return this.flatten()}}ZodError.create=issues=>new ZodError(issues);const errorMap=(issue,_ctx)=>{let message;switch(issue.code){case ZodIssueCode.invalid_type:message=issue.received===ZodParsedType.undefined?"Required":`Expected ${issue.expected}, received ${issue.received}`;break;case ZodIssueCode.invalid_literal:message=`Invalid literal value, expected ${JSON.stringify(issue.expected,util.jsonStringifyReplacer)}`;break;case ZodIssueCode.unrecognized_keys:message=`Unrecognized key(s) in object: ${util.joinValues(issue.keys,", ")}`;break;case ZodIssueCode.invalid_union:message="Invalid input";break;case ZodIssueCode.invalid_union_discriminator:message=`Invalid discriminator value. Expected ${util.joinValues(issue.options)}`;break;case ZodIssueCode.invalid_enum_value:message=`Invalid enum value. Expected ${util.joinValues(issue.options)}, received '${issue.received}'`;break;case ZodIssueCode.invalid_arguments:message="Invalid function arguments";break;case ZodIssueCode.invalid_return_type:message="Invalid function return type";break;case ZodIssueCode.invalid_date:message="Invalid date";break;case ZodIssueCode.invalid_string:"object"==typeof issue.validation?"startsWith"in issue.validation?message=`Invalid input: must start with "${issue.validation.startsWith}"`:"endsWith"in issue.validation?message=`Invalid input: must end with "${issue.validation.endsWith}"`:util.assertNever(issue.validation):message="regex"!==issue.validation?`Invalid ${issue.validation}`:"Invalid";break;case ZodIssueCode.too_small:message="array"===issue.type?`Array must contain ${issue.exact?"exactly":issue.inclusive?"at least":"more than"} ${issue.minimum} element(s)`:"string"===issue.type?`String must contain ${issue.exact?"exactly":issue.inclusive?"at least":"over"} ${issue.minimum} character(s)`:"number"===issue.type?`Number must be ${issue.exact?"exactly equal to ":issue.inclusive?"greater than or equal to ":"greater than "}${issue.minimum}`:"date"===issue.type?`Date must be ${issue.exact?"exactly equal to ":issue.inclusive?"greater than or equal to ":"greater than "}${new Date(issue.minimum)}`:"Invalid input";break;case ZodIssueCode.too_big:message="array"===issue.type?`Array must contain ${issue.exact?"exactly":issue.inclusive?"at most":"less than"} ${issue.maximum} element(s)`:"string"===issue.type?`String must contain ${issue.exact?"exactly":issue.inclusive?"at most":"under"} ${issue.maximum} character(s)`:"number"===issue.type?`Number must be ${issue.exact?"exactly":issue.inclusive?"less than or equal to":"less than"} ${issue.maximum}`:"date"===issue.type?`Date must be ${issue.exact?"exactly":issue.inclusive?"smaller than or equal to":"smaller than"} ${new Date(issue.maximum)}`:"Invalid input";break;case ZodIssueCode.custom:message="Invalid input";break;case ZodIssueCode.invalid_intersection_types:message="Intersection results could not be merged";break;case ZodIssueCode.not_multiple_of:message=`Number must be a multiple of ${issue.multipleOf}`;break;case ZodIssueCode.not_finite:message="Number must be finite";break;default:message=_ctx.defaultError,util.assertNever(issue)}return{message:message}};let overrideErrorMap=errorMap;function getErrorMap(){return overrideErrorMap}const makeIssue=params=>{const{data:data2,path:path,errorMaps:errorMaps,issueData:issueData}=params,fullPath=[...path,...issueData.path||[]],fullIssue={...issueData,path:fullPath};let errorMessage="";const maps=errorMaps.filter((m=>!!m)).slice().reverse();for(const map of maps)errorMessage=map(fullIssue,{data:data2,defaultError:errorMessage}).message;return{...issueData,path:fullPath,message:issueData.message||errorMessage}};function addIssueToContext(ctx,issueData){const issue=makeIssue({issueData:issueData,data:ctx.data,path:ctx.path,errorMaps:[ctx.common.contextualErrorMap,ctx.schemaErrorMap,getErrorMap(),errorMap].filter((x=>!!x))});ctx.common.issues.push(issue)}class ParseStatus{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(status,results){const arrayValue=[];for(const s of results){if("aborted"===s.status)return INVALID;"dirty"===s.status&&status.dirty(),arrayValue.push(s.value)}return{status:status.value,value:arrayValue}}static async mergeObjectAsync(status,pairs){const syncPairs=[];for(const pair of pairs)syncPairs.push({key:await pair.key,value:await pair.value});return ParseStatus.mergeObjectSync(status,syncPairs)}static mergeObjectSync(status,pairs){const finalObject={};for(const pair of pairs){const{key:key,value:value}=pair;if("aborted"===key.status)return INVALID;if("aborted"===value.status)return INVALID;"dirty"===key.status&&status.dirty(),"dirty"===value.status&&status.dirty(),(void 0!==value.value||pair.alwaysSet)&&(finalObject[key.value]=value.value)}return{status:status.value,value:finalObject}}}const INVALID=Object.freeze({status:"aborted"}),DIRTY=value=>({status:"dirty",value:value}),OK=value=>({status:"valid",value:value}),isAborted=x=>"aborted"===x.status,isDirty=x=>"dirty"===x.status,isValid=x=>"valid"===x.status,isAsync=x=>void 0!==typeof Promise&&x instanceof Promise;var errorUtil,errorUtil2;(errorUtil2=errorUtil||(errorUtil={})).errToObj=message=>"string"==typeof message?{message:message}:message||{},errorUtil2.toString=message=>"string"==typeof message?message:null==message?void 0:message.message;class ParseInputLazyPath{constructor(parent,value,path,key){this.parent=parent,this.data=value,this._path=path,this._key=key}get path(){return this._path.concat(this._key)}}const handleResult=(ctx,result)=>{if(isValid(result))return{success:!0,data:result.value};if(!ctx.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,error:new ZodError(ctx.common.issues)}};function processCreateParams(params){if(!params)return{};const{errorMap:errorMap2,invalid_type_error:invalid_type_error,required_error:required_error,description:description}=params;if(errorMap2&&(invalid_type_error||required_error))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(errorMap2)return{errorMap:errorMap2,description:description};return{errorMap:(iss,ctx)=>"invalid_type"!==iss.code?{message:ctx.defaultError}:void 0===ctx.data?{message:null!=required_error?required_error:ctx.defaultError}:{message:null!=invalid_type_error?invalid_type_error:ctx.defaultError},description:description}}class ZodType{constructor(def2){this.spa=this.safeParseAsync,this._def=def2,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(input){return getParsedType(input.data)}_getOrReturnCtx(input,ctx){return ctx||{common:input.parent.common,data:input.data,parsedType:getParsedType(input.data),schemaErrorMap:this._def.errorMap,path:input.path,parent:input.parent}}_processInputParams(input){return{status:new ParseStatus,ctx:{common:input.parent.common,data:input.data,parsedType:getParsedType(input.data),schemaErrorMap:this._def.errorMap,path:input.path,parent:input.parent}}}_parseSync(input){const result=this._parse(input);if(isAsync(result))throw new Error("Synchronous parse encountered promise.");return result}_parseAsync(input){const result=this._parse(input);return Promise.resolve(result)}parse(data2,params){const result=this.safeParse(data2,params);if(result.success)return result.data;throw result.error}safeParse(data2,params){var _a3;const ctx={common:{issues:[],async:null!==(_a3=null==params?void 0:params.async)&&void 0!==_a3&&_a3,contextualErrorMap:null==params?void 0:params.errorMap},path:(null==params?void 0:params.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:data2,parsedType:getParsedType(data2)},result=this._parseSync({data:data2,path:ctx.path,parent:ctx});return handleResult(ctx,result)}async parseAsync(data2,params){const result=await this.safeParseAsync(data2,params);if(result.success)return result.data;throw result.error}async safeParseAsync(data2,params){const ctx={common:{issues:[],contextualErrorMap:null==params?void 0:params.errorMap,async:!0},path:(null==params?void 0:params.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:data2,parsedType:getParsedType(data2)},maybeAsyncResult=this._parse({data:data2,path:ctx.path,parent:ctx}),result=await(isAsync(maybeAsyncResult)?maybeAsyncResult:Promise.resolve(maybeAsyncResult));return handleResult(ctx,result)}refine(check,message){const getIssueProperties=val=>"string"==typeof message||void 0===message?{message:message}:"function"==typeof message?message(val):message;return this._refinement(((val,ctx)=>{const result=check(val),setError=()=>ctx.addIssue({code:ZodIssueCode.custom,...getIssueProperties(val)});return"undefined"!=typeof Promise&&result instanceof Promise?result.then((data2=>!!data2||(setError(),!1))):!!result||(setError(),!1)}))}refinement(check,refinementData){return this._refinement(((val,ctx)=>!!check(val)||(ctx.addIssue("function"==typeof refinementData?refinementData(val,ctx):refinementData),!1)))}_refinement(refinement){return new ZodEffects({schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"refinement",refinement:refinement}})}superRefine(refinement){return this._refinement(refinement)}optional(){return ZodOptional.create(this)}nullable(){return ZodNullable.create(this)}nullish(){return this.optional().nullable()}array(){return ZodArray.create(this)}promise(){return ZodPromise.create(this)}or(option){return ZodUnion.create([this,option])}and(incoming){return ZodIntersection.create(this,incoming)}transform(transform){return new ZodEffects({schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"transform",transform:transform}})}default(def2){return new ZodDefault({innerType:this,defaultValue:"function"==typeof def2?def2:()=>def2,typeName:ZodFirstPartyTypeKind.ZodDefault})}brand(){return new ZodBranded({typeName:ZodFirstPartyTypeKind.ZodBranded,type:this,...processCreateParams(void 0)})}catch(def2){return new ZodCatch({innerType:this,defaultValue:"function"==typeof def2?def2:()=>def2,typeName:ZodFirstPartyTypeKind.ZodCatch})}describe(description){return new(0,this.constructor)({...this._def,description:description})}pipe(target){return ZodPipeline.create(this,target)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const cuidRegex=/^c[^\s-]{8,}$/i,uuidRegex=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,emailRegex=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i;class ZodString extends ZodType{constructor(){super(...arguments),this._regex=(regex,validation,message)=>this.refinement((data2=>regex.test(data2)),{validation:validation,code:ZodIssueCode.invalid_string,...errorUtil.errToObj(message)}),this.nonempty=message=>this.min(1,errorUtil.errToObj(message)),this.trim=()=>new ZodString({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}_parse(input){this._def.coerce&&(input.data=String(input.data));if(this._getType(input)!==ZodParsedType.string){const ctx2=this._getOrReturnCtx(input);return addIssueToContext(ctx2,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.string,received:ctx2.parsedType}),INVALID}const status=new ParseStatus;let ctx;for(const check of this._def.checks)if("min"===check.kind)input.data.length<check.value&&(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{code:ZodIssueCode.too_small,minimum:check.value,type:"string",inclusive:!0,exact:!1,message:check.message}),status.dirty());else if("max"===check.kind)input.data.length>check.value&&(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{code:ZodIssueCode.too_big,maximum:check.value,type:"string",inclusive:!0,exact:!1,message:check.message}),status.dirty());else if("length"===check.kind){const tooBig=input.data.length>check.value,tooSmall=input.data.length<check.value;(tooBig||tooSmall)&&(ctx=this._getOrReturnCtx(input,ctx),tooBig?addIssueToContext(ctx,{code:ZodIssueCode.too_big,maximum:check.value,type:"string",inclusive:!0,exact:!0,message:check.message}):tooSmall&&addIssueToContext(ctx,{code:ZodIssueCode.too_small,minimum:check.value,type:"string",inclusive:!0,exact:!0,message:check.message}),status.dirty())}else if("email"===check.kind)emailRegex.test(input.data)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{validation:"email",code:ZodIssueCode.invalid_string,message:check.message}),status.dirty());else if("uuid"===check.kind)uuidRegex.test(input.data)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{validation:"uuid",code:ZodIssueCode.invalid_string,message:check.message}),status.dirty());else if("cuid"===check.kind)cuidRegex.test(input.data)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{validation:"cuid",code:ZodIssueCode.invalid_string,message:check.message}),status.dirty());else if("url"===check.kind)try{new URL(input.data)}catch(_a3){ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{validation:"url",code:ZodIssueCode.invalid_string,message:check.message}),status.dirty()}else if("regex"===check.kind){check.regex.lastIndex=0;check.regex.test(input.data)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{validation:"regex",code:ZodIssueCode.invalid_string,message:check.message}),status.dirty())}else if("trim"===check.kind)input.data=input.data.trim();else if("startsWith"===check.kind)input.data.startsWith(check.value)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{code:ZodIssueCode.invalid_string,validation:{startsWith:check.value},message:check.message}),status.dirty());else if("endsWith"===check.kind)input.data.endsWith(check.value)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{code:ZodIssueCode.invalid_string,validation:{endsWith:check.value},message:check.message}),status.dirty());else if("datetime"===check.kind){((args=check).precision?args.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${args.precision}}(([+-]\\d{2}:\\d{2})|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${args.precision}}Z$`):0===args.precision?args.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}:\\d{2})|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):args.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}:\\d{2})|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$")).test(input.data)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{code:ZodIssueCode.invalid_string,validation:"datetime",message:check.message}),status.dirty())}else util.assertNever(check);var args;return{status:status.value,value:input.data}}_addCheck(check){return new ZodString({...this._def,checks:[...this._def.checks,check]})}email(message){return this._addCheck({kind:"email",...errorUtil.errToObj(message)})}url(message){return this._addCheck({kind:"url",...errorUtil.errToObj(message)})}uuid(message){return this._addCheck({kind:"uuid",...errorUtil.errToObj(message)})}cuid(message){return this._addCheck({kind:"cuid",...errorUtil.errToObj(message)})}datetime(options){var _a3;return"string"==typeof options?this._addCheck({kind:"datetime",precision:null,offset:!1,message:options}):this._addCheck({kind:"datetime",precision:void 0===(null==options?void 0:options.precision)?null:null==options?void 0:options.precision,offset:null!==(_a3=null==options?void 0:options.offset)&&void 0!==_a3&&_a3,...errorUtil.errToObj(null==options?void 0:options.message)})}regex(regex,message){return this._addCheck({kind:"regex",regex:regex,...errorUtil.errToObj(message)})}startsWith(value,message){return this._addCheck({kind:"startsWith",value:value,...errorUtil.errToObj(message)})}endsWith(value,message){return this._addCheck({kind:"endsWith",value:value,...errorUtil.errToObj(message)})}min(minLength,message){return this._addCheck({kind:"min",value:minLength,...errorUtil.errToObj(message)})}max(maxLength,message){return this._addCheck({kind:"max",value:maxLength,...errorUtil.errToObj(message)})}length(len,message){return this._addCheck({kind:"length",value:len,...errorUtil.errToObj(message)})}get isDatetime(){return!!this._def.checks.find((ch=>"datetime"===ch.kind))}get isEmail(){return!!this._def.checks.find((ch=>"email"===ch.kind))}get isURL(){return!!this._def.checks.find((ch=>"url"===ch.kind))}get isUUID(){return!!this._def.checks.find((ch=>"uuid"===ch.kind))}get isCUID(){return!!this._def.checks.find((ch=>"cuid"===ch.kind))}get minLength(){let min=null;for(const ch of this._def.checks)"min"===ch.kind&&(null===min||ch.value>min)&&(min=ch.value);return min}get maxLength(){let max=null;for(const ch of this._def.checks)"max"===ch.kind&&(null===max||ch.value<max)&&(max=ch.value);return max}}function floatSafeRemainder(val,step){const valDecCount=(val.toString().split(".")[1]||"").length,stepDecCount=(step.toString().split(".")[1]||"").length,decCount=valDecCount>stepDecCount?valDecCount:stepDecCount;return parseInt(val.toFixed(decCount).replace(".",""))%parseInt(step.toFixed(decCount).replace(".",""))/Math.pow(10,decCount)}ZodString.create=params=>{var _a3;return new ZodString({checks:[],typeName:ZodFirstPartyTypeKind.ZodString,coerce:null!==(_a3=null==params?void 0:params.coerce)&&void 0!==_a3&&_a3,...processCreateParams(params)})};class ZodNumber extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(input){this._def.coerce&&(input.data=Number(input.data));if(this._getType(input)!==ZodParsedType.number){const ctx2=this._getOrReturnCtx(input);return addIssueToContext(ctx2,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.number,received:ctx2.parsedType}),INVALID}let ctx;const status=new ParseStatus;for(const check of this._def.checks)if("int"===check.kind)util.isInteger(input.data)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:"integer",received:"float",message:check.message}),status.dirty());else if("min"===check.kind){(check.inclusive?input.data<check.value:input.data<=check.value)&&(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{code:ZodIssueCode.too_small,minimum:check.value,type:"number",inclusive:check.inclusive,exact:!1,message:check.message}),status.dirty())}else if("max"===check.kind){(check.inclusive?input.data>check.value:input.data>=check.value)&&(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{code:ZodIssueCode.too_big,maximum:check.value,type:"number",inclusive:check.inclusive,exact:!1,message:check.message}),status.dirty())}else"multipleOf"===check.kind?0!==floatSafeRemainder(input.data,check.value)&&(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{code:ZodIssueCode.not_multiple_of,multipleOf:check.value,message:check.message}),status.dirty()):"finite"===check.kind?Number.isFinite(input.data)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{code:ZodIssueCode.not_finite,message:check.message}),status.dirty()):util.assertNever(check);return{status:status.value,value:input.data}}gte(value,message){return this.setLimit("min",value,!0,errorUtil.toString(message))}gt(value,message){return this.setLimit("min",value,!1,errorUtil.toString(message))}lte(value,message){return this.setLimit("max",value,!0,errorUtil.toString(message))}lt(value,message){return this.setLimit("max",value,!1,errorUtil.toString(message))}setLimit(kind,value,inclusive,message){return new ZodNumber({...this._def,checks:[...this._def.checks,{kind:kind,value:value,inclusive:inclusive,message:errorUtil.toString(message)}]})}_addCheck(check){return new ZodNumber({...this._def,checks:[...this._def.checks,check]})}int(message){return this._addCheck({kind:"int",message:errorUtil.toString(message)})}positive(message){return this._addCheck({kind:"min",value:0,inclusive:!1,message:errorUtil.toString(message)})}negative(message){return this._addCheck({kind:"max",value:0,inclusive:!1,message:errorUtil.toString(message)})}nonpositive(message){return this._addCheck({kind:"max",value:0,inclusive:!0,message:errorUtil.toString(message)})}nonnegative(message){return this._addCheck({kind:"min",value:0,inclusive:!0,message:errorUtil.toString(message)})}multipleOf(value,message){return this._addCheck({kind:"multipleOf",value:value,message:errorUtil.toString(message)})}finite(message){return this._addCheck({kind:"finite",message:errorUtil.toString(message)})}get minValue(){let min=null;for(const ch of this._def.checks)"min"===ch.kind&&(null===min||ch.value>min)&&(min=ch.value);return min}get maxValue(){let max=null;for(const ch of this._def.checks)"max"===ch.kind&&(null===max||ch.value<max)&&(max=ch.value);return max}get isInt(){return!!this._def.checks.find((ch=>"int"===ch.kind))}}ZodNumber.create=params=>new ZodNumber({checks:[],typeName:ZodFirstPartyTypeKind.ZodNumber,coerce:(null==params?void 0:params.coerce)||!1,...processCreateParams(params)});class ZodBigInt extends ZodType{_parse(input){this._def.coerce&&(input.data=BigInt(input.data));if(this._getType(input)!==ZodParsedType.bigint){const ctx=this._getOrReturnCtx(input);return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.bigint,received:ctx.parsedType}),INVALID}return OK(input.data)}}ZodBigInt.create=params=>{var _a3;return new ZodBigInt({typeName:ZodFirstPartyTypeKind.ZodBigInt,coerce:null!==(_a3=null==params?void 0:params.coerce)&&void 0!==_a3&&_a3,...processCreateParams(params)})};class ZodBoolean extends ZodType{_parse(input){this._def.coerce&&(input.data=Boolean(input.data));if(this._getType(input)!==ZodParsedType.boolean){const ctx=this._getOrReturnCtx(input);return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.boolean,received:ctx.parsedType}),INVALID}return OK(input.data)}}ZodBoolean.create=params=>new ZodBoolean({typeName:ZodFirstPartyTypeKind.ZodBoolean,coerce:(null==params?void 0:params.coerce)||!1,...processCreateParams(params)});class ZodDate extends ZodType{_parse(input){this._def.coerce&&(input.data=new Date(input.data));if(this._getType(input)!==ZodParsedType.date){const ctx2=this._getOrReturnCtx(input);return addIssueToContext(ctx2,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.date,received:ctx2.parsedType}),INVALID}if(isNaN(input.data.getTime())){return addIssueToContext(this._getOrReturnCtx(input),{code:ZodIssueCode.invalid_date}),INVALID}const status=new ParseStatus;let ctx;for(const check of this._def.checks)"min"===check.kind?input.data.getTime()<check.value&&(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{code:ZodIssueCode.too_small,message:check.message,inclusive:!0,exact:!1,minimum:check.value,type:"date"}),status.dirty()):"max"===check.kind?input.data.getTime()>check.value&&(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{code:ZodIssueCode.too_big,message:check.message,inclusive:!0,exact:!1,maximum:check.value,type:"date"}),status.dirty()):util.assertNever(check);return{status:status.value,value:new Date(input.data.getTime())}}_addCheck(check){return new ZodDate({...this._def,checks:[...this._def.checks,check]})}min(minDate,message){return this._addCheck({kind:"min",value:minDate.getTime(),message:errorUtil.toString(message)})}max(maxDate,message){return this._addCheck({kind:"max",value:maxDate.getTime(),message:errorUtil.toString(message)})}get minDate(){let min=null;for(const ch of this._def.checks)"min"===ch.kind&&(null===min||ch.value>min)&&(min=ch.value);return null!=min?new Date(min):null}get maxDate(){let max=null;for(const ch of this._def.checks)"max"===ch.kind&&(null===max||ch.value<max)&&(max=ch.value);return null!=max?new Date(max):null}}ZodDate.create=params=>new ZodDate({checks:[],coerce:(null==params?void 0:params.coerce)||!1,typeName:ZodFirstPartyTypeKind.ZodDate,...processCreateParams(params)});class ZodSymbol extends ZodType{_parse(input){if(this._getType(input)!==ZodParsedType.symbol){const ctx=this._getOrReturnCtx(input);return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.symbol,received:ctx.parsedType}),INVALID}return OK(input.data)}}ZodSymbol.create=params=>new ZodSymbol({typeName:ZodFirstPartyTypeKind.ZodSymbol,...processCreateParams(params)});class ZodUndefined extends ZodType{_parse(input){if(this._getType(input)!==ZodParsedType.undefined){const ctx=this._getOrReturnCtx(input);return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.undefined,received:ctx.parsedType}),INVALID}return OK(input.data)}}ZodUndefined.create=params=>new ZodUndefined({typeName:ZodFirstPartyTypeKind.ZodUndefined,...processCreateParams(params)});class ZodNull extends ZodType{_parse(input){if(this._getType(input)!==ZodParsedType.null){const ctx=this._getOrReturnCtx(input);return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.null,received:ctx.parsedType}),INVALID}return OK(input.data)}}ZodNull.create=params=>new ZodNull({typeName:ZodFirstPartyTypeKind.ZodNull,...processCreateParams(params)});class ZodAny extends ZodType{constructor(){super(...arguments),this._any=!0}_parse(input){return OK(input.data)}}ZodAny.create=params=>new ZodAny({typeName:ZodFirstPartyTypeKind.ZodAny,...processCreateParams(params)});class ZodUnknown extends ZodType{constructor(){super(...arguments),this._unknown=!0}_parse(input){return OK(input.data)}}ZodUnknown.create=params=>new ZodUnknown({typeName:ZodFirstPartyTypeKind.ZodUnknown,...processCreateParams(params)});class ZodNever extends ZodType{_parse(input){const ctx=this._getOrReturnCtx(input);return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.never,received:ctx.parsedType}),INVALID}}ZodNever.create=params=>new ZodNever({typeName:ZodFirstPartyTypeKind.ZodNever,...processCreateParams(params)});class ZodVoid extends ZodType{_parse(input){if(this._getType(input)!==ZodParsedType.undefined){const ctx=this._getOrReturnCtx(input);return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.void,received:ctx.parsedType}),INVALID}return OK(input.data)}}ZodVoid.create=params=>new ZodVoid({typeName:ZodFirstPartyTypeKind.ZodVoid,...processCreateParams(params)});class ZodArray extends ZodType{_parse(input){const{ctx:ctx,status:status}=this._processInputParams(input),def2=this._def;if(ctx.parsedType!==ZodParsedType.array)return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:ctx.parsedType}),INVALID;if(null!==def2.exactLength){const tooBig=ctx.data.length>def2.exactLength.value,tooSmall=ctx.data.length<def2.exactLength.value;(tooBig||tooSmall)&&(addIssueToContext(ctx,{code:tooBig?ZodIssueCode.too_big:ZodIssueCode.too_small,minimum:tooSmall?def2.exactLength.value:void 0,maximum:tooBig?def2.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:def2.exactLength.message}),status.dirty())}if(null!==def2.minLength&&ctx.data.length<def2.minLength.value&&(addIssueToContext(ctx,{code:ZodIssueCode.too_small,minimum:def2.minLength.value,type:"array",inclusive:!0,exact:!1,message:def2.minLength.message}),status.dirty()),null!==def2.maxLength&&ctx.data.length>def2.maxLength.value&&(addIssueToContext(ctx,{code:ZodIssueCode.too_big,maximum:def2.maxLength.value,type:"array",inclusive:!0,exact:!1,message:def2.maxLength.message}),status.dirty()),ctx.common.async)return Promise.all(ctx.data.map(((item,i)=>def2.type._parseAsync(new ParseInputLazyPath(ctx,item,ctx.path,i))))).then((result2=>ParseStatus.mergeArray(status,result2)));const result=ctx.data.map(((item,i)=>def2.type._parseSync(new ParseInputLazyPath(ctx,item,ctx.path,i))));return ParseStatus.mergeArray(status,result)}get element(){return this._def.type}min(minLength,message){return new ZodArray({...this._def,minLength:{value:minLength,message:errorUtil.toString(message)}})}max(maxLength,message){return new ZodArray({...this._def,maxLength:{value:maxLength,message:errorUtil.toString(message)}})}length(len,message){return new ZodArray({...this._def,exactLength:{value:len,message:errorUtil.toString(message)}})}nonempty(message){return this.min(1,message)}}var objectUtil;ZodArray.create=(schema,params)=>new ZodArray({type:schema,minLength:null,maxLength:null,exactLength:null,typeName:ZodFirstPartyTypeKind.ZodArray,...processCreateParams(params)}),(objectUtil||(objectUtil={})).mergeShapes=(first,second)=>({...first,...second});const AugmentFactory=def2=>augmentation=>new ZodObject({...def2,shape:()=>({...def2.shape(),...augmentation})});function deepPartialify(schema){if(schema instanceof ZodObject){const newShape={};for(const key in schema.shape){const fieldSchema=schema.shape[key];newShape[key]=ZodOptional.create(deepPartialify(fieldSchema))}return new ZodObject({...schema._def,shape:()=>newShape})}return schema instanceof ZodArray?ZodArray.create(deepPartialify(schema.element)):schema instanceof ZodOptional?ZodOptional.create(deepPartialify(schema.unwrap())):schema instanceof ZodNullable?ZodNullable.create(deepPartialify(schema.unwrap())):schema instanceof ZodTuple?ZodTuple.create(schema.items.map((item=>deepPartialify(item)))):schema}class ZodObject extends ZodType{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=AugmentFactory(this._def),this.extend=AugmentFactory(this._def)}_getCached(){if(null!==this._cached)return this._cached;const shape=this._def.shape(),keys2=util.objectKeys(shape);return this._cached={shape:shape,keys:keys2}}_parse(input){if(this._getType(input)!==ZodParsedType.object){const ctx2=this._getOrReturnCtx(input);return addIssueToContext(ctx2,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:ctx2.parsedType}),INVALID}const{status:status,ctx:ctx}=this._processInputParams(input),{shape:shape,keys:shapeKeys}=this._getCached(),extraKeys=[];if(!(this._def.catchall instanceof ZodNever&&"strip"===this._def.unknownKeys))for(const key in ctx.data)shapeKeys.includes(key)||extraKeys.push(key);const pairs=[];for(const key of shapeKeys){const keyValidator=shape[key],value=ctx.data[key];pairs.push({key:{status:"valid",value:key},value:keyValidator._parse(new ParseInputLazyPath(ctx,value,ctx.path,key)),alwaysSet:key in ctx.data})}if(this._def.catchall instanceof ZodNever){const unknownKeys=this._def.unknownKeys;if("passthrough"===unknownKeys)for(const key of extraKeys)pairs.push({key:{status:"valid",value:key},value:{status:"valid",value:ctx.data[key]}});else if("strict"===unknownKeys)extraKeys.length>0&&(addIssueToContext(ctx,{code:ZodIssueCode.unrecognized_keys,keys:extraKeys}),status.dirty());else if("strip"!==unknownKeys)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const catchall=this._def.catchall;for(const key of extraKeys){const value=ctx.data[key];pairs.push({key:{status:"valid",value:key},value:catchall._parse(new ParseInputLazyPath(ctx,value,ctx.path,key)),alwaysSet:key in ctx.data})}}return ctx.common.async?Promise.resolve().then((async()=>{const syncPairs=[];for(const pair of pairs){const key=await pair.key;syncPairs.push({key:key,value:await pair.value,alwaysSet:pair.alwaysSet})}return syncPairs})).then((syncPairs=>ParseStatus.mergeObjectSync(status,syncPairs))):ParseStatus.mergeObjectSync(status,pairs)}get shape(){return this._def.shape()}strict(message){return errorUtil.errToObj,new ZodObject({...this._def,unknownKeys:"strict",...void 0!==message?{errorMap:(issue,ctx)=>{var _a3,_b,_c,_d;const defaultError=null!==(_c=null===(_b=(_a3=this._def).errorMap)||void 0===_b?void 0:_b.call(_a3,issue,ctx).message)&&void 0!==_c?_c:ctx.defaultError;return"unrecognized_keys"===issue.code?{message:null!==(_d=errorUtil.errToObj(message).message)&&void 0!==_d?_d:defaultError}:{message:defaultError}}}:{}})}strip(){return new ZodObject({...this._def,unknownKeys:"strip"})}passthrough(){return new ZodObject({...this._def,unknownKeys:"passthrough"})}setKey(key,schema){return this.augment({[key]:schema})}merge(merging){return new ZodObject({unknownKeys:merging._def.unknownKeys,catchall:merging._def.catchall,shape:()=>objectUtil.mergeShapes(this._def.shape(),merging._def.shape()),typeName:ZodFirstPartyTypeKind.ZodObject})}catchall(index){return new ZodObject({...this._def,catchall:index})}pick(mask){const shape={};return util.objectKeys(mask).map((key=>{this.shape[key]&&(shape[key]=this.shape[key])})),new ZodObject({...this._def,shape:()=>shape})}omit(mask){const shape={};return util.objectKeys(this.shape).map((key=>{-1===util.objectKeys(mask).indexOf(key)&&(shape[key]=this.shape[key])})),new ZodObject({...this._def,shape:()=>shape})}deepPartial(){return deepPartialify(this)}partial(mask){const newShape={};if(mask)return util.objectKeys(this.shape).map((key=>{-1===util.objectKeys(mask).indexOf(key)?newShape[key]=this.shape[key]:newShape[key]=this.shape[key].optional()})),new ZodObject({...this._def,shape:()=>newShape});for(const key in this.shape){const fieldSchema=this.shape[key];newShape[key]=fieldSchema.optional()}return new ZodObject({...this._def,shape:()=>newShape})}required(mask){const newShape={};if(mask)util.objectKeys(this.shape).map((key=>{if(-1===util.objectKeys(mask).indexOf(key))newShape[key]=this.shape[key];else{let newField=this.shape[key];for(;newField instanceof ZodOptional;)newField=newField._def.innerType;newShape[key]=newField}}));else for(const key in this.shape){let newField=this.shape[key];for(;newField instanceof ZodOptional;)newField=newField._def.innerType;newShape[key]=newField}return new ZodObject({...this._def,shape:()=>newShape})}keyof(){return createZodEnum(util.objectKeys(this.shape))}}ZodObject.create=(shape,params)=>new ZodObject({shape:()=>shape,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(params)}),ZodObject.strictCreate=(shape,params)=>new ZodObject({shape:()=>shape,unknownKeys:"strict",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(params)}),ZodObject.lazycreate=(shape,params)=>new ZodObject({shape:shape,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(params)});class ZodUnion extends ZodType{_parse(input){const{ctx:ctx}=this._processInputParams(input),options=this._def.options;if(ctx.common.async)return Promise.all(options.map((async option=>{const childCtx={...ctx,common:{...ctx.common,issues:[]},parent:null};return{result:await option._parseAsync({data:ctx.data,path:ctx.path,parent:childCtx}),ctx:childCtx}}))).then((function handleResults(results){for(const result of results)if("valid"===result.result.status)return result.result;for(const result of results)if("dirty"===result.result.status)return ctx.common.issues.push(...result.ctx.common.issues),result.result;const unionErrors=results.map((result=>new ZodError(result.ctx.common.issues)));return addIssueToContext(ctx,{code:ZodIssueCode.invalid_union,unionErrors:unionErrors}),INVALID}));{let dirty;const issues=[];for(const option of options){const childCtx={...ctx,common:{...ctx.common,issues:[]},parent:null},result=option._parseSync({data:ctx.data,path:ctx.path,parent:childCtx});if("valid"===result.status)return result;"dirty"!==result.status||dirty||(dirty={result:result,ctx:childCtx}),childCtx.common.issues.length&&issues.push(childCtx.common.issues)}if(dirty)return ctx.common.issues.push(...dirty.ctx.common.issues),dirty.result;const unionErrors=issues.map((issues2=>new ZodError(issues2)));return addIssueToContext(ctx,{code:ZodIssueCode.invalid_union,unionErrors:unionErrors}),INVALID}}get options(){return this._def.options}}ZodUnion.create=(types,params)=>new ZodUnion({options:types,typeName:ZodFirstPartyTypeKind.ZodUnion,...processCreateParams(params)});const getDiscriminator=type2=>type2 instanceof ZodLazy?getDiscriminator(type2.schema):type2 instanceof ZodEffects?getDiscriminator(type2.innerType()):type2 instanceof ZodLiteral?[type2.value]:type2 instanceof ZodEnum?type2.options:type2 instanceof ZodNativeEnum?Object.keys(type2.enum):type2 instanceof ZodDefault?getDiscriminator(type2._def.innerType):type2 instanceof ZodUndefined?[void 0]:type2 instanceof ZodNull?[null]:null;class ZodDiscriminatedUnion extends ZodType{_parse(input){const{ctx:ctx}=this._processInputParams(input);if(ctx.parsedType!==ZodParsedType.object)return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:ctx.parsedType}),INVALID;const discriminator=this.discriminator,discriminatorValue=ctx.data[discriminator],option=this.optionsMap.get(discriminatorValue);return option?ctx.common.async?option._parseAsync({data:ctx.data,path:ctx.path,parent:ctx}):option._parseSync({data:ctx.data,path:ctx.path,parent:ctx}):(addIssueToContext(ctx,{code:ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[discriminator]}),INVALID)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(discriminator,options,params){const optionsMap=new Map;for(const type2 of options){const discriminatorValues=getDiscriminator(type2.shape[discriminator]);if(!discriminatorValues)throw new Error(`A discriminator value for key \`${discriminator}\` could not be extracted from all schema options`);for(const value of discriminatorValues){if(optionsMap.has(value))throw new Error(`Discriminator property ${String(discriminator)} has duplicate value ${String(value)}`);optionsMap.set(value,type2)}}return new ZodDiscriminatedUnion({typeName:ZodFirstPartyTypeKind.ZodDiscriminatedUnion,discriminator:discriminator,options:options,optionsMap:optionsMap,...processCreateParams(params)})}}function mergeValues(a,b){const aType=getParsedType(a),bType=getParsedType(b);if(a===b)return{valid:!0,data:a};if(aType===ZodParsedType.object&&bType===ZodParsedType.object){const bKeys=util.objectKeys(b),sharedKeys=util.objectKeys(a).filter((key=>-1!==bKeys.indexOf(key))),newObj={...a,...b};for(const key of sharedKeys){const sharedValue=mergeValues(a[key],b[key]);if(!sharedValue.valid)return{valid:!1};newObj[key]=sharedValue.data}return{valid:!0,data:newObj}}if(aType===ZodParsedType.array&&bType===ZodParsedType.array){if(a.length!==b.length)return{valid:!1};const newArray=[];for(let index=0;index<a.length;index++){const sharedValue=mergeValues(a[index],b[index]);if(!sharedValue.valid)return{valid:!1};newArray.push(sharedValue.data)}return{valid:!0,data:newArray}}return aType===ZodParsedType.date&&bType===ZodParsedType.date&&+a==+b?{valid:!0,data:a}:{valid:!1}}class ZodIntersection extends ZodType{_parse(input){const{status:status,ctx:ctx}=this._processInputParams(input),handleParsed=(parsedLeft,parsedRight)=>{if(isAborted(parsedLeft)||isAborted(parsedRight))return INVALID;const merged=mergeValues(parsedLeft.value,parsedRight.value);return merged.valid?((isDirty(parsedLeft)||isDirty(parsedRight))&&status.dirty(),{status:status.value,value:merged.data}):(addIssueToContext(ctx,{code:ZodIssueCode.invalid_intersection_types}),INVALID)};return ctx.common.async?Promise.all([this._def.left._parseAsync({data:ctx.data,path:ctx.path,parent:ctx}),this._def.right._parseAsync({data:ctx.data,path:ctx.path,parent:ctx})]).then((([left,right])=>handleParsed(left,right))):handleParsed(this._def.left._parseSync({data:ctx.data,path:ctx.path,parent:ctx}),this._def.right._parseSync({data:ctx.data,path:ctx.path,parent:ctx}))}}ZodIntersection.create=(left,right,params)=>new ZodIntersection({left:left,right:right,typeName:ZodFirstPartyTypeKind.ZodIntersection,...processCreateParams(params)});class ZodTuple extends ZodType{_parse(input){const{status:status,ctx:ctx}=this._processInputParams(input);if(ctx.parsedType!==ZodParsedType.array)return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:ctx.parsedType}),INVALID;if(ctx.data.length<this._def.items.length)return addIssueToContext(ctx,{code:ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),INVALID;!this._def.rest&&ctx.data.length>this._def.items.length&&(addIssueToContext(ctx,{code:ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),status.dirty());const items=ctx.data.map(((item,itemIndex)=>{const schema=this._def.items[itemIndex]||this._def.rest;return schema?schema._parse(new ParseInputLazyPath(ctx,item,ctx.path,itemIndex)):null})).filter((x=>!!x));return ctx.common.async?Promise.all(items).then((results=>ParseStatus.mergeArray(status,results))):ParseStatus.mergeArray(status,items)}get items(){return this._def.items}rest(rest){return new ZodTuple({...this._def,rest:rest})}}ZodTuple.create=(schemas,params)=>{if(!Array.isArray(schemas))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ZodTuple({items:schemas,typeName:ZodFirstPartyTypeKind.ZodTuple,rest:null,...processCreateParams(params)})};class ZodRecord extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(input){const{status:status,ctx:ctx}=this._processInputParams(input);if(ctx.parsedType!==ZodParsedType.object)return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:ctx.parsedType}),INVALID;const pairs=[],keyType=this._def.keyType,valueType=this._def.valueType;for(const key in ctx.data)pairs.push({key:keyType._parse(new ParseInputLazyPath(ctx,key,ctx.path,key)),value:valueType._parse(new ParseInputLazyPath(ctx,ctx.data[key],ctx.path,key))});return ctx.common.async?ParseStatus.mergeObjectAsync(status,pairs):ParseStatus.mergeObjectSync(status,pairs)}get element(){return this._def.valueType}static create(first,second,third){return new ZodRecord(second instanceof ZodType?{keyType:first,valueType:second,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(third)}:{keyType:ZodString.create(),valueType:first,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(second)})}}class ZodMap extends ZodType{_parse(input){const{status:status,ctx:ctx}=this._processInputParams(input);if(ctx.parsedType!==ZodParsedType.map)return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.map,received:ctx.parsedType}),INVALID;const keyType=this._def.keyType,valueType=this._def.valueType,pairs=[...ctx.data.entries()].map((([key,value],index)=>({key:keyType._parse(new ParseInputLazyPath(ctx,key,ctx.path,[index,"key"])),value:valueType._parse(new ParseInputLazyPath(ctx,value,ctx.path,[index,"value"]))})));if(ctx.common.async){const finalMap=new Map;return Promise.resolve().then((async()=>{for(const pair of pairs){const key=await pair.key,value=await pair.value;if("aborted"===key.status||"aborted"===value.status)return INVALID;"dirty"!==key.status&&"dirty"!==value.status||status.dirty(),finalMap.set(key.value,value.value)}return{status:status.value,value:finalMap}}))}{const finalMap=new Map;for(const pair of pairs){const key=pair.key,value=pair.value;if("aborted"===key.status||"aborted"===value.status)return INVALID;"dirty"!==key.status&&"dirty"!==value.status||status.dirty(),finalMap.set(key.value,value.value)}return{status:status.value,value:finalMap}}}}ZodMap.create=(keyType,valueType,params)=>new ZodMap({valueType:valueType,keyType:keyType,typeName:ZodFirstPartyTypeKind.ZodMap,...processCreateParams(params)});class ZodSet extends ZodType{_parse(input){const{status:status,ctx:ctx}=this._processInputParams(input);if(ctx.parsedType!==ZodParsedType.set)return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.set,received:ctx.parsedType}),INVALID;const def2=this._def;null!==def2.minSize&&ctx.data.size<def2.minSize.value&&(addIssueToContext(ctx,{code:ZodIssueCode.too_small,minimum:def2.minSize.value,type:"set",inclusive:!0,exact:!1,message:def2.minSize.message}),status.dirty()),null!==def2.maxSize&&ctx.data.size>def2.maxSize.value&&(addIssueToContext(ctx,{code:ZodIssueCode.too_big,maximum:def2.maxSize.value,type:"set",inclusive:!0,exact:!1,message:def2.maxSize.message}),status.dirty());const valueType=this._def.valueType;function finalizeSet(elements2){const parsedSet=new Set;for(const element of elements2){if("aborted"===element.status)return INVALID;"dirty"===element.status&&status.dirty(),parsedSet.add(element.value)}return{status:status.value,value:parsedSet}}const elements=[...ctx.data.values()].map(((item,i)=>valueType._parse(new ParseInputLazyPath(ctx,item,ctx.path,i))));return ctx.common.async?Promise.all(elements).then((elements2=>finalizeSet(elements2))):finalizeSet(elements)}min(minSize,message){return new ZodSet({...this._def,minSize:{value:minSize,message:errorUtil.toString(message)}})}max(maxSize,message){return new ZodSet({...this._def,maxSize:{value:maxSize,message:errorUtil.toString(message)}})}size(size2,message){return this.min(size2,message).max(size2,message)}nonempty(message){return this.min(1,message)}}ZodSet.create=(valueType,params)=>new ZodSet({valueType:valueType,minSize:null,maxSize:null,typeName:ZodFirstPartyTypeKind.ZodSet,...processCreateParams(params)});class ZodFunction extends ZodType{constructor(){super(...arguments),this.validate=this.implement}_parse(input){const{ctx:ctx}=this._processInputParams(input);if(ctx.parsedType!==ZodParsedType.function)return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.function,received:ctx.parsedType}),INVALID;function makeArgsIssue(args,error){return makeIssue({data:args,path:ctx.path,errorMaps:[ctx.common.contextualErrorMap,ctx.schemaErrorMap,getErrorMap(),errorMap].filter((x=>!!x)),issueData:{code:ZodIssueCode.invalid_arguments,argumentsError:error}})}function makeReturnsIssue(returns,error){return makeIssue({data:returns,path:ctx.path,errorMaps:[ctx.common.contextualErrorMap,ctx.schemaErrorMap,getErrorMap(),errorMap].filter((x=>!!x)),issueData:{code:ZodIssueCode.invalid_return_type,returnTypeError:error}})}const params={errorMap:ctx.common.contextualErrorMap},fn=ctx.data;return this._def.returns instanceof ZodPromise?OK((async(...args)=>{const error=new ZodError([]),parsedArgs=await this._def.args.parseAsync(args,params).catch((e=>{throw error.addIssue(makeArgsIssue(args,e)),error})),result=await fn(...parsedArgs);return await this._def.returns._def.type.parseAsync(result,params).catch((e=>{throw error.addIssue(makeReturnsIssue(result,e)),error}))})):OK(((...args)=>{const parsedArgs=this._def.args.safeParse(args,params);if(!parsedArgs.success)throw new ZodError([makeArgsIssue(args,parsedArgs.error)]);const result=fn(...parsedArgs.data),parsedReturns=this._def.returns.safeParse(result,params);if(!parsedReturns.success)throw new ZodError([makeReturnsIssue(result,parsedReturns.error)]);return parsedReturns.data}))}parameters(){return this._def.args}returnType(){return this._def.returns}args(...items){return new ZodFunction({...this._def,args:ZodTuple.create(items).rest(ZodUnknown.create())})}returns(returnType){return new ZodFunction({...this._def,returns:returnType})}implement(func){return this.parse(func)}strictImplement(func){return this.parse(func)}static create(args,returns,params){return new ZodFunction({args:args||ZodTuple.create([]).rest(ZodUnknown.create()),returns:returns||ZodUnknown.create(),typeName:ZodFirstPartyTypeKind.ZodFunction,...processCreateParams(params)})}}class ZodLazy extends ZodType{get schema(){return this._def.getter()}_parse(input){const{ctx:ctx}=this._processInputParams(input);return this._def.getter()._parse({data:ctx.data,path:ctx.path,parent:ctx})}}ZodLazy.create=(getter,params)=>new ZodLazy({getter:getter,typeName:ZodFirstPartyTypeKind.ZodLazy,...processCreateParams(params)});class ZodLiteral extends ZodType{_parse(input){if(input.data!==this._def.value){return addIssueToContext(this._getOrReturnCtx(input),{code:ZodIssueCode.invalid_literal,expected:this._def.value}),INVALID}return{status:"valid",value:input.data}}get value(){return this._def.value}}function createZodEnum(values,params){return new ZodEnum({values:values,typeName:ZodFirstPartyTypeKind.ZodEnum,...processCreateParams(params)})}ZodLiteral.create=(value,params)=>new ZodLiteral({value:value,typeName:ZodFirstPartyTypeKind.ZodLiteral,...processCreateParams(params)});class ZodEnum extends ZodType{_parse(input){if("string"!=typeof input.data){const ctx=this._getOrReturnCtx(input),expectedValues=this._def.values;return addIssueToContext(ctx,{expected:util.joinValues(expectedValues),received:ctx.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(-1===this._def.values.indexOf(input.data)){const ctx=this._getOrReturnCtx(input),expectedValues=this._def.values;return addIssueToContext(ctx,{received:ctx.data,code:ZodIssueCode.invalid_enum_value,options:expectedValues}),INVALID}return OK(input.data)}get options(){return this._def.values}get enum(){const enumValues={};for(const val of this._def.values)enumValues[val]=val;return enumValues}get Values(){const enumValues={};for(const val of this._def.values)enumValues[val]=val;return enumValues}get Enum(){const enumValues={};for(const val of this._def.values)enumValues[val]=val;return enumValues}}ZodEnum.create=createZodEnum;class ZodNativeEnum extends ZodType{_parse(input){const nativeEnumValues=util.getValidEnumValues(this._def.values),ctx=this._getOrReturnCtx(input);if(ctx.parsedType!==ZodParsedType.string&&ctx.parsedType!==ZodParsedType.number){const expectedValues=util.objectValues(nativeEnumValues);return addIssueToContext(ctx,{expected:util.joinValues(expectedValues),received:ctx.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(-1===nativeEnumValues.indexOf(input.data)){const expectedValues=util.objectValues(nativeEnumValues);return addIssueToContext(ctx,{received:ctx.data,code:ZodIssueCode.invalid_enum_value,options:expectedValues}),INVALID}return OK(input.data)}get enum(){return this._def.values}}ZodNativeEnum.create=(values,params)=>new ZodNativeEnum({values:values,typeName:ZodFirstPartyTypeKind.ZodNativeEnum,...processCreateParams(params)});class ZodPromise extends ZodType{_parse(input){const{ctx:ctx}=this._processInputParams(input);if(ctx.parsedType!==ZodParsedType.promise&&!1===ctx.common.async)return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.promise,received:ctx.parsedType}),INVALID;const promisified=ctx.parsedType===ZodParsedType.promise?ctx.data:Promise.resolve(ctx.data);return OK(promisified.then((data2=>this._def.type.parseAsync(data2,{path:ctx.path,errorMap:ctx.common.contextualErrorMap}))))}}ZodPromise.create=(schema,params)=>new ZodPromise({type:schema,typeName:ZodFirstPartyTypeKind.ZodPromise,...processCreateParams(params)});class ZodEffects extends ZodType{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ZodFirstPartyTypeKind.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(input){const{status:status,ctx:ctx}=this._processInputParams(input),effect=this._def.effect||null;if("preprocess"===effect.type){const processed=effect.transform(ctx.data);return ctx.common.async?Promise.resolve(processed).then((processed2=>this._def.schema._parseAsync({data:processed2,path:ctx.path,parent:ctx}))):this._def.schema._parseSync({data:processed,path:ctx.path,parent:ctx})}const checkCtx={addIssue:arg=>{addIssueToContext(ctx,arg),arg.fatal?status.abort():status.dirty()},get path(){return ctx.path}};if(checkCtx.addIssue=checkCtx.addIssue.bind(checkCtx),"refinement"===effect.type){const executeRefinement=acc=>{const result=effect.refinement(acc,checkCtx);if(ctx.common.async)return Promise.resolve(result);if(result instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return acc};if(!1===ctx.common.async){const inner=this._def.schema._parseSync({data:ctx.data,path:ctx.path,parent:ctx});return"aborted"===inner.status?INVALID:("dirty"===inner.status&&status.dirty(),executeRefinement(inner.value),{status:status.value,value:inner.value})}return this._def.schema._parseAsync({data:ctx.data,path:ctx.path,parent:ctx}).then((inner=>"aborted"===inner.status?INVALID:("dirty"===inner.status&&status.dirty(),executeRefinement(inner.value).then((()=>({status:status.value,value:inner.value}))))))}if("transform"===effect.type){if(!1===ctx.common.async){const base=this._def.schema._parseSync({data:ctx.data,path:ctx.path,parent:ctx});if(!isValid(base))return base;const result=effect.transform(base.value,checkCtx);if(result instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:status.value,value:result}}return this._def.schema._parseAsync({data:ctx.data,path:ctx.path,parent:ctx}).then((base=>isValid(base)?Promise.resolve(effect.transform(base.value,checkCtx)).then((result=>({status:status.value,value:result}))):base))}util.assertNever(effect)}}ZodEffects.create=(schema,effect,params)=>new ZodEffects({schema:schema,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:effect,...processCreateParams(params)}),ZodEffects.createWithPreprocess=(preprocess,schema,params)=>new ZodEffects({schema:schema,effect:{type:"preprocess",transform:preprocess},typeName:ZodFirstPartyTypeKind.ZodEffects,...processCreateParams(params)});class ZodOptional extends ZodType{_parse(input){return this._getType(input)===ZodParsedType.undefined?OK(void 0):this._def.innerType._parse(input)}unwrap(){return this._def.innerType}}ZodOptional.create=(type2,params)=>new ZodOptional({innerType:type2,typeName:ZodFirstPartyTypeKind.ZodOptional,...processCreateParams(params)});class ZodNullable extends ZodType{_parse(input){return this._getType(input)===ZodParsedType.null?OK(null):this._def.innerType._parse(input)}unwrap(){return this._def.innerType}}ZodNullable.create=(type2,params)=>new ZodNullable({innerType:type2,typeName:ZodFirstPartyTypeKind.ZodNullable,...processCreateParams(params)});class ZodDefault extends ZodType{_parse(input){const{ctx:ctx}=this._processInputParams(input);let data2=ctx.data;return ctx.parsedType===ZodParsedType.undefined&&(data2=this._def.defaultValue()),this._def.innerType._parse({data:data2,path:ctx.path,parent:ctx})}removeDefault(){return this._def.innerType}}ZodDefault.create=(type2,params)=>new ZodDefault({innerType:type2,typeName:ZodFirstPartyTypeKind.ZodDefault,defaultValue:"function"==typeof params.default?params.default:()=>params.default,...processCreateParams(params)});class ZodCatch extends ZodType{_parse(input){const{ctx:ctx}=this._processInputParams(input),result=this._def.innerType._parse({data:ctx.data,path:ctx.path,parent:ctx});return isAsync(result)?result.then((result2=>({status:"valid",value:"valid"===result2.status?result2.value:this._def.defaultValue()}))):{status:"valid",value:"valid"===result.status?result.value:this._def.defaultValue()}}removeDefault(){return this._def.innerType}}ZodCatch.create=(type2,params)=>new ZodCatch({innerType:type2,typeName:ZodFirstPartyTypeKind.ZodCatch,defaultValue:"function"==typeof params.default?params.default:()=>params.default,...processCreateParams(params)});class ZodNaN extends ZodType{_parse(input){if(this._getType(input)!==ZodParsedType.nan){const ctx=this._getOrReturnCtx(input);return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.nan,received:ctx.parsedType}),INVALID}return{status:"valid",value:input.data}}}ZodNaN.create=params=>new ZodNaN({typeName:ZodFirstPartyTypeKind.ZodNaN,...processCreateParams(params)});const BRAND=Symbol("zod_brand");class ZodBranded extends ZodType{_parse(input){const{ctx:ctx}=this._processInputParams(input),data2=ctx.data;return this._def.type._parse({data:data2,path:ctx.path,parent:ctx})}unwrap(){return this._def.type}}class ZodPipeline extends ZodType{_parse(input){const{status:status,ctx:ctx}=this._processInputParams(input);if(ctx.common.async){return(async()=>{const inResult=await this._def.in._parseAsync({data:ctx.data,path:ctx.path,parent:ctx});return"aborted"===inResult.status?INVALID:"dirty"===inResult.status?(status.dirty(),DIRTY(inResult.value)):this._def.out._parseAsync({data:inResult.value,path:ctx.path,parent:ctx})})()}{const inResult=this._def.in._parseSync({data:ctx.data,path:ctx.path,parent:ctx});return"aborted"===inResult.status?INVALID:"dirty"===inResult.status?(status.dirty(),{status:"dirty",value:inResult.value}):this._def.out._parseSync({data:inResult.value,path:ctx.path,parent:ctx})}}static create(a,b){return new ZodPipeline({in:a,out:b,typeName:ZodFirstPartyTypeKind.ZodPipeline})}}const custom=(check,params={},fatal)=>check?ZodAny.create().superRefine(((data2,ctx)=>{if(!check(data2)){const p2="function"==typeof params?params(data2):params,p22="string"==typeof p2?{message:p2}:p2;ctx.addIssue({code:"custom",...p22,fatal:fatal})}})):ZodAny.create(),late={object:ZodObject.lazycreate};var ZodFirstPartyTypeKind,ZodFirstPartyTypeKind2;(ZodFirstPartyTypeKind2=ZodFirstPartyTypeKind||(ZodFirstPartyTypeKind={})).ZodString="ZodString",ZodFirstPartyTypeKind2.ZodNumber="ZodNumber",ZodFirstPartyTypeKind2.ZodNaN="ZodNaN",ZodFirstPartyTypeKind2.ZodBigInt="ZodBigInt",ZodFirstPartyTypeKind2.ZodBoolean="ZodBoolean",ZodFirstPartyTypeKind2.ZodDate="ZodDate",ZodFirstPartyTypeKind2.ZodSymbol="ZodSymbol",ZodFirstPartyTypeKind2.ZodUndefined="ZodUndefined",ZodFirstPartyTypeKind2.ZodNull="ZodNull",ZodFirstPartyTypeKind2.ZodAny="ZodAny",ZodFirstPartyTypeKind2.ZodUnknown="ZodUnknown",ZodFirstPartyTypeKind2.ZodNever="ZodNever",ZodFirstPartyTypeKind2.ZodVoid="ZodVoid",ZodFirstPartyTypeKind2.ZodArray="ZodArray",ZodFirstPartyTypeKind2.ZodObject="ZodObject",ZodFirstPartyTypeKind2.ZodUnion="ZodUnion",ZodFirstPartyTypeKind2.ZodDiscriminatedUnion="ZodDiscriminatedUnion",ZodFirstPartyTypeKind2.ZodIntersection="ZodIntersection",ZodFirstPartyTypeKind2.ZodTuple="ZodTuple",ZodFirstPartyTypeKind2.ZodRecord="ZodRecord",ZodFirstPartyTypeKind2.ZodMap="ZodMap",ZodFirstPartyTypeKind2.ZodSet="ZodSet",ZodFirstPartyTypeKind2.ZodFunction="ZodFunction",ZodFirstPartyTypeKind2.ZodLazy="ZodLazy",ZodFirstPartyTypeKind2.ZodLiteral="ZodLiteral",ZodFirstPartyTypeKind2.ZodEnum="ZodEnum",ZodFirstPartyTypeKind2.ZodEffects="ZodEffects",ZodFirstPartyTypeKind2.ZodNativeEnum="ZodNativeEnum",ZodFirstPartyTypeKind2.ZodOptional="ZodOptional",ZodFirstPartyTypeKind2.ZodNullable="ZodNullable",ZodFirstPartyTypeKind2.ZodDefault="ZodDefault",ZodFirstPartyTypeKind2.ZodCatch="ZodCatch",ZodFirstPartyTypeKind2.ZodPromise="ZodPromise",ZodFirstPartyTypeKind2.ZodBranded="ZodBranded",ZodFirstPartyTypeKind2.ZodPipeline="ZodPipeline";const stringType=ZodString.create,numberType=ZodNumber.create,nanType=ZodNaN.create,bigIntType=ZodBigInt.create,booleanType=ZodBoolean.create,dateType=ZodDate.create,symbolType=ZodSymbol.create,undefinedType=ZodUndefined.create,nullType=ZodNull.create,anyType=ZodAny.create,unknownType=ZodUnknown.create,neverType=ZodNever.create,voidType=ZodVoid.create,arrayType=ZodArray.create,objectType=ZodObject.create,strictObjectType=ZodObject.strictCreate,unionType=ZodUnion.create,discriminatedUnionType=ZodDiscriminatedUnion.create,intersectionType=ZodIntersection.create,tupleType=ZodTuple.create,recordType=ZodRecord.create,mapType=ZodMap.create,setType=ZodSet.create,functionType=ZodFunction.create,lazyType=ZodLazy.create,literalType=ZodLiteral.create,enumType=ZodEnum.create,nativeEnumType=ZodNativeEnum.create,promiseType=ZodPromise.create,effectsType=ZodEffects.create,optionalType=ZodOptional.create,nullableType=ZodNullable.create,preprocessType=ZodEffects.createWithPreprocess,pipelineType=ZodPipeline.create,coerce={string:arg=>ZodString.create({...arg,coerce:!0}),number:arg=>ZodNumber.create({...arg,coerce:!0}),boolean:arg=>ZodBoolean.create({...arg,coerce:!0}),bigint:arg=>ZodBigInt.create({...arg,coerce:!0}),date:arg=>ZodDate.create({...arg,coerce:!0})},NEVER=INVALID;var Strings,Strings2,mod=Object.freeze({__proto__:null,defaultErrorMap:errorMap,setErrorMap:function setErrorMap(map){overrideErrorMap=map},getErrorMap:getErrorMap,makeIssue:makeIssue,EMPTY_PATH:[],addIssueToContext:addIssueToContext,ParseStatus:ParseStatus,INVALID:INVALID,DIRTY:DIRTY,OK:OK,isAborted:isAborted,isDirty:isDirty,isValid:isValid,isAsync:isAsync,get util(){return util},ZodParsedType:ZodParsedType,getParsedType:getParsedType,ZodType:ZodType,ZodString:ZodString,ZodNumber:ZodNumber,ZodBigInt:ZodBigInt,ZodBoolean:ZodBoolean,ZodDate:ZodDate,ZodSymbol:ZodSymbol,ZodUndefined:ZodUndefined,ZodNull:ZodNull,ZodAny:ZodAny,ZodUnknown:ZodUnknown,ZodNever:ZodNever,ZodVoid:ZodVoid,ZodArray:ZodArray,get objectUtil(){return objectUtil},ZodObject:ZodObject,ZodUnion:ZodUnion,ZodDiscriminatedUnion:ZodDiscriminatedUnion,ZodIntersection:ZodIntersection,ZodTuple:ZodTuple,ZodRecord:ZodRecord,ZodMap:ZodMap,ZodSet:ZodSet,ZodFunction:ZodFunction,ZodLazy:ZodLazy,ZodLiteral:ZodLiteral,ZodEnum:ZodEnum,ZodNativeEnum:ZodNativeEnum,ZodPromise:ZodPromise,ZodEffects:ZodEffects,ZodTransformer:ZodEffects,ZodOptional:ZodOptional,ZodNullable:ZodNullable,ZodDefault:ZodDefault,ZodCatch:ZodCatch,ZodNaN:ZodNaN,BRAND:BRAND,ZodBranded:ZodBranded,ZodPipeline:ZodPipeline,custom:custom,Schema:ZodType,ZodSchema:ZodType,late:late,get ZodFirstPartyTypeKind(){return ZodFirstPartyTypeKind},coerce:coerce,any:anyType,array:arrayType,bigint:bigIntType,boolean:booleanType,date:dateType,discriminatedUnion:discriminatedUnionType,effect:effectsType,enum:enumType,function:functionType,instanceof:(cls,params={message:`Input not instance of ${cls.name}`})=>custom((data2=>data2 instanceof cls),params,!0),intersection:intersectionType,lazy:lazyType,literal:literalType,map:mapType,nan:nanType,nativeEnum:nativeEnumType,never:neverType,null:nullType,nullable:nullableType,number:numberType,object:objectType,oboolean:()=>booleanType().optional(),onumber:()=>numberType().optional(),optional:optionalType,ostring:()=>stringType().optional(),pipeline:pipelineType,preprocess:preprocessType,promise:promiseType,record:recordType,set:setType,strictObject:strictObjectType,string:stringType,symbol:symbolType,transformer:effectsType,tuple:tupleType,undefined:undefinedType,union:unionType,unknown:unknownType,void:voidType,NEVER:NEVER,ZodIssueCode:ZodIssueCode,quotelessJson:obj=>JSON.stringify(obj,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:ZodError});class Purchase{constructor(name,cost,callback){__publicField(this,"_name"),__publicField(this,"_cost"),__publicField(this,"_callback"),this._name=name,this._cost=Math.floor(cost),this._callback=callback}get name(){return this._name}get cost(){return this._cost}get callback(){return this._callback}}class CostManager{constructor(initialCost,calculator,options){__publicField(this,"initialCost"),__publicField(this,"initialAmount"),__publicField(this,"calculator"),__publicField(this,"incrementer"),__publicField(this,"lastComputedAmount",null),__publicField(this,"lastComputedCost",0),this.initialCost=initialCost,this.initialAmount=(null==options?void 0:options.initialAmount)??0,this.calculator=calculator,this.incrementer=(null==options?void 0:options.incrementer)??(prevAmount=>prevAmount+1)}getNextCostAt(amount){if(!1===Number.isSafeInteger(amount))throw new Error("Amount must be a safe integer");return amount!==this.lastComputedAmount&&(this.lastComputedCost=this.calculateCost(amount),this.lastComputedAmount=amount),this.lastComputedCost}calculateCost(amount){if(!1===Number.isSafeInteger(amount))throw new Error("Amount must be a safe integer");let startAmount,cost;null===this.lastComputedAmount||amount<this.lastComputedAmount?(cost=this.initialCost,startAmount=this.initialAmount):(cost=this.lastComputedCost,startAmount=this.lastComputedAmount);for(let i=this.incrementer(startAmount);i<=amount;i=this.incrementer(i))cost=this.calculator(i,cost);return cost}}function formatUnit(num,unit,short){const prefixIndex=0===num?0:Math.floor(Math.log2(num)/10),significant=num/2**(10*prefixIndex),floored=Math.floor(1e3*significant)/1e3;return`${new Intl.NumberFormat(navigator.language,{minimumFractionDigits:short?0:3,maximumFractionDigits:short?0:3}).format(floored)} ${["","ki","Mi","Gi","Ti","Pi","Ei","Zi","Yi"][prefixIndex]}${unit}`}function formatBits(num,short=!1){if(num<8192){return`${new Intl.NumberFormat(navigator.language).format(num)} b`}return formatUnit(num/8,"B",short)}function formatTime(seconds){const secondsMod=Math.floor(seconds%60),minutes=Math.floor(seconds/60)%60,hours=Math.floor(seconds/3600),parts=[];return hours>0&&parts.push(hours+"h"),minutes>0&&parts.push(minutes+"m"),secondsMod>0&&parts.push(secondsMod+"s"),parts.join(", ")}(Strings2=Strings||(Strings={})).padStart=function padStart(str,targetLength,padString=" "){if(str.length>=targetLength)return str;let padding="";for(let i=0;i<targetLength-str.length;i++)padding+=padString;return padding+str},Strings2.insertEvery=function insertEvery(str,insert,interval){let result="";for(let i=0;i<str.length;i++)i%interval==0&&0!==i&&(result+=insert),result+=str[i];return result};const _Chip=class{constructor(){__publicField(this,"_clockSpeed",_Chip.DEFAULTS.clockSpeed),__publicField(this,"_overclock",_Chip.DEFAULTS.overclock),__publicField(this,"lastOverclockTime",_Chip.DEFAULTS.lastOverclockTime),__publicField(this,"targetDisk",_Chip.DEFAULTS.targetDisk),__publicField(this,"clockSpeedCostManager",new CostManager(110,((amount,prevCost)=>prevCost**1.09),{initialAmount:1,incrementer:prevAmount=>2*prevAmount})),__publicField(this,"overclockCostManager",new CostManager(8388608,((amount,prevCost)=>prevCost**1.5))),__publicField(this,"lastUpdate",-1)}static fromSchema(schema,disks){const chip=new _Chip;return chip.clockSpeed=schema.clockSpeed,chip.overclock=schema.overclock,chip.lastOverclockTime=schema.lastOverclockTime,chip.targetDisk=disks.find((disk=>disk.id===schema.targetDiskID))??null,chip}get clockSpeed(){return this._clockSpeed}set clockSpeed(clockSpeed){this._clockSpeed=clockSpeed}get overclock(){return this._overclock}set overclock(overclock){this._overclock=overclock}get targetDiskID(){var _a3;return(null==(_a3=this.targetDisk)?void 0:_a3.id)??null}get name(){return`${function formatHertz(num,short=!1){return formatUnit(num,"Hz",short)}(this.clockSpeed,!0)} Chip`}get clockSpeedPurchase(){return new Purchase("x2 Clock Speed",this.clockSpeedCostManager.getNextCostAt(this.clockSpeed),(()=>this.clockSpeed*=2))}get overclockPurchase(){return new Purchase("Overclocking",this.overclockCostManager.getNextCostAt(this.overclock),(()=>this.overclock++))}get schema(){return _Chip.CODEC.parse(this)}get activeClockSpeed(){const overclockMultiplier=this.isOverclocking?32**this.overclock:1;return this.clockSpeed*overclockMultiplier}get bitsPerSecond(){return null===this.targetDisk||this.targetDisk.isFull?0:this.activeClockSpeed}get isOverclocking(){return this.overclock>0&&Date.now()-this.lastOverclockTime<=_Chip.OVERCLOCK_LENGTH_MILLIS}get overclockProgress(){return Math.min(1,(Date.now()-this.lastOverclockTime)/_Chip.OVERCLOCK_LENGTH_MILLIS)}get overclockCooldownProgress(){return Math.min(1,(Date.now()-this.lastOverclockTime)/_Chip.OVERCLOCK_COOLDOWN_MILLIS)}cycle(){if(null===this.targetDisk)return;-1===this.lastUpdate&&(this.lastUpdate=Date.now());const millisPerCycle=1e3/this.activeClockSpeed,deltaMillis=Date.now()-this.lastUpdate;this.targetDisk.increment(deltaMillis/millisPerCycle),this.lastUpdate=Date.now()}activateOverclock(){Date.now()-this.lastOverclockTime<_Chip.OVERCLOCK_COOLDOWN_MILLIS||(this.lastOverclockTime=Date.now())}};let Chip=_Chip;__publicField(Chip,"OVERCLOCK_LENGTH_MILLIS",5e3),__publicField(Chip,"OVERCLOCK_COOLDOWN_MILLIS",15e3),__publicField(Chip,"DEFAULTS",{clockSpeed:1,overclock:0,lastOverclockTime:-1,targetDisk:null}),__publicField(Chip,"CODEC",mod.object({clockSpeed:mod.number().default(_Chip.DEFAULTS.clockSpeed),overclock:mod.number().default(_Chip.DEFAULTS.overclock),lastOverclockTime:mod.number().default(_Chip.DEFAULTS.lastOverclockTime),targetDiskID:mod.nullable(mod.number()).default((null==(_a2=_Chip.DEFAULTS)?void 0:_a2.targetDisk)??null)}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var __assign=function(){return __assign=Object.assign||function __assign2(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p2 in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p2)&&(t[p2]=s[p2]);return t},__assign.apply(this,arguments)};function __spreadArray(to,from,pack){if(pack||2===arguments.length)for(var ar,i=0,l=from.length;i<l;i++)!ar&&i in from||(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))}var _global="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,keys=Object.keys,isArray=Array.isArray;function extend(obj,extension){return"object"!=typeof extension||keys(extension).forEach((function(key){obj[key]=extension[key]})),obj}"undefined"==typeof Promise||_global.Promise||(_global.Promise=Promise);var getProto=Object.getPrototypeOf,_hasOwn={}.hasOwnProperty;function hasOwn(obj,prop){return _hasOwn.call(obj,prop)}function props(proto,extension){"function"==typeof extension&&(extension=extension(getProto(proto))),("undefined"==typeof Reflect?keys:Reflect.ownKeys)(extension).forEach((function(key){setProp(proto,key,extension[key])}))}var defineProperty=Object.defineProperty;function setProp(obj,prop,functionOrGetSet,options){defineProperty(obj,prop,extend(functionOrGetSet&&hasOwn(functionOrGetSet,"get")&&"function"==typeof functionOrGetSet.get?{get:functionOrGetSet.get,set:functionOrGetSet.set,configurable:!0}:{value:functionOrGetSet,configurable:!0,writable:!0},options))}function derive(Child){return{from:function(Parent){return Child.prototype=Object.create(Parent.prototype),setProp(Child.prototype,"constructor",Child),{extend:props.bind(null,Child.prototype)}}}}var getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;function getPropertyDescriptor(obj,prop){var proto;return getOwnPropertyDescriptor(obj,prop)||(proto=getProto(obj))&&getPropertyDescriptor(proto,prop)}var _slice=[].slice;function slice(args,start,end){return _slice.call(args,start,end)}function override(origFunc,overridedFactory){return overridedFactory(origFunc)}function assert(b){if(!b)throw new Error("Assertion Failed")}function asap$1(fn){_global.setImmediate?setImmediate(fn):setTimeout(fn,0)}function arrayToObject(array,extractor){return array.reduce((function(result,item,i){var nameAndValue=extractor(item,i);return nameAndValue&&(result[nameAndValue[0]]=nameAndValue[1]),result}),{})}function getByKeyPath(obj,keyPath){if(hasOwn(obj,keyPath))return obj[keyPath];if(!keyPath)return obj;if("string"!=typeof keyPath){for(var rv=[],i=0,l=keyPath.length;i<l;++i){var val=getByKeyPath(obj,keyPath[i]);rv.push(val)}return rv}var period=keyPath.indexOf(".");if(-1!==period){var innerObj=obj[keyPath.substr(0,period)];return void 0===innerObj?void 0:getByKeyPath(innerObj,keyPath.substr(period+1))}}function setByKeyPath(obj,keyPath,value){if(obj&&void 0!==keyPath&&(!("isFrozen"in Object)||!Object.isFrozen(obj)))if("string"!=typeof keyPath&&"length"in keyPath){assert("string"!=typeof value&&"length"in value);for(var i=0,l=keyPath.length;i<l;++i)setByKeyPath(obj,keyPath[i],value[i])}else{var period=keyPath.indexOf(".");if(-1!==period){var currentKeyPath=keyPath.substr(0,period),remainingKeyPath=keyPath.substr(period+1);if(""===remainingKeyPath)void 0===value?isArray(obj)&&!isNaN(parseInt(currentKeyPath))?obj.splice(currentKeyPath,1):delete obj[currentKeyPath]:obj[currentKeyPath]=value;else{var innerObj=obj[currentKeyPath];innerObj&&hasOwn(obj,currentKeyPath)||(innerObj=obj[currentKeyPath]={}),setByKeyPath(innerObj,remainingKeyPath,value)}}else void 0===value?isArray(obj)&&!isNaN(parseInt(keyPath))?obj.splice(keyPath,1):delete obj[keyPath]:obj[keyPath]=value}}function shallowClone(obj){var rv={};for(var m in obj)hasOwn(obj,m)&&(rv[m]=obj[m]);return rv}var concat=[].concat;function flatten(a){return concat.apply([],a)}var intrinsicTypeNames="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(flatten([8,16,32,64].map((function(num){return["Int","Uint","Float"].map((function(t){return t+num+"Array"}))})))).filter((function(t){return _global[t]})),intrinsicTypes=intrinsicTypeNames.map((function(t){return _global[t]}));arrayToObject(intrinsicTypeNames,(function(x){return[x,!0]}));var circularRefs=null;function deepClone(any){circularRefs="undefined"!=typeof WeakMap&&new WeakMap;var rv=innerDeepClone(any);return circularRefs=null,rv}function innerDeepClone(any){if(!any||"object"!=typeof any)return any;var rv=circularRefs&&circularRefs.get(any);if(rv)return rv;if(isArray(any)){rv=[],circularRefs&&circularRefs.set(any,rv);for(var i=0,l=any.length;i<l;++i)rv.push(innerDeepClone(any[i]))}else if(intrinsicTypes.indexOf(any.constructor)>=0)rv=any;else{var proto=getProto(any);for(var prop in rv=proto===Object.prototype?{}:Object.create(proto),circularRefs&&circularRefs.set(any,rv),any)hasOwn(any,prop)&&(rv[prop]=innerDeepClone(any[prop]))}return rv}var toString={}.toString;function toStringTag(o){return toString.call(o).slice(8,-1)}var iteratorSymbol="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",getIteratorOf="symbol"==typeof iteratorSymbol?function(x){var i;return null!=x&&(i=x[iteratorSymbol])&&i.apply(x)}:function(){return null},NO_CHAR_ARRAY={};function getArrayOf(arrayLike){var i,a,x,it;if(1===arguments.length){if(isArray(arrayLike))return arrayLike.slice();if(this===NO_CHAR_ARRAY&&"string"==typeof arrayLike)return[arrayLike];if(it=getIteratorOf(arrayLike)){for(a=[];!(x=it.next()).done;)a.push(x.value);return a}if(null==arrayLike)return[arrayLike];if("number"==typeof(i=arrayLike.length)){for(a=new Array(i);i--;)a[i]=arrayLike[i];return a}return[arrayLike]}for(i=arguments.length,a=new Array(i);i--;)a[i]=arguments[i];return a}var isAsyncFunction="undefined"!=typeof Symbol?function(fn){return"AsyncFunction"===fn[Symbol.toStringTag]}:function(){return!1},debug="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function setDebug(value,filter){debug=value,libraryFilter=filter}var libraryFilter=function(){return!0},NEEDS_THROW_FOR_STACK=!new Error("").stack;function getErrorWithStack(){if(NEEDS_THROW_FOR_STACK)try{throw getErrorWithStack.arguments,new Error}catch(e){return e}return new Error}function prettyStack(exception,numIgnoredFrames){var stack=exception.stack;return stack?(numIgnoredFrames=numIgnoredFrames||0,0===stack.indexOf(exception.name)&&(numIgnoredFrames+=(exception.name+exception.message).split("\n").length),stack.split("\n").slice(numIgnoredFrames).filter(libraryFilter).map((function(frame){return"\n"+frame})).join("")):""}var idbDomErrorNames=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],errorList=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(idbDomErrorNames),defaultTexts={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function DexieError(name,msg){this._e=getErrorWithStack(),this.name=name,this.message=msg}function getMultiErrorMessage(msg,failures){return msg+". Errors: "+Object.keys(failures).map((function(key){return failures[key].toString()})).filter((function(v,i,s){return s.indexOf(v)===i})).join("\n")}function ModifyError(msg,failures,successCount,failedKeys){this._e=getErrorWithStack(),this.failures=failures,this.failedKeys=failedKeys,this.successCount=successCount,this.message=getMultiErrorMessage(msg,failures)}function BulkError(msg,failures){this._e=getErrorWithStack(),this.name="BulkError",this.failures=Object.keys(failures).map((function(pos){return failures[pos]})),this.failuresByPos=failures,this.message=getMultiErrorMessage(msg,failures)}derive(DexieError).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+prettyStack(this._e,2))}},toString:function(){return this.name+": "+this.message}}),derive(ModifyError).from(DexieError),derive(BulkError).from(DexieError);var errnames=errorList.reduce((function(obj,name){return obj[name]=name+"Error",obj}),{}),BaseException=DexieError,exceptions=errorList.reduce((function(obj,name){var fullName=name+"Error";function DexieError2(msgOrInner,inner){this._e=getErrorWithStack(),this.name=fullName,msgOrInner?"string"==typeof msgOrInner?(this.message=msgOrInner+(inner?"\n "+inner:""),this.inner=inner||null):"object"==typeof msgOrInner&&(this.message=msgOrInner.name+" "+msgOrInner.message,this.inner=msgOrInner):(this.message=defaultTexts[name]||fullName,this.inner=null)}return derive(DexieError2).from(BaseException),obj[name]=DexieError2,obj}),{});exceptions.Syntax=SyntaxError,exceptions.Type=TypeError,exceptions.Range=RangeError;var exceptionMap=idbDomErrorNames.reduce((function(obj,name){return obj[name+"Error"]=exceptions[name],obj}),{});var fullNameExceptions=errorList.reduce((function(obj,name){return-1===["Syntax","Type","Range"].indexOf(name)&&(obj[name+"Error"]=exceptions[name]),obj}),{});function nop(){}function mirror(val){return val}function pureFunctionChain(f1,f2){return null==f1||f1===mirror?f2:function(val){return f2(f1(val))}}function callBoth(on1,on2){return function(){on1.apply(this,arguments),on2.apply(this,arguments)}}function hookCreatingChain(f1,f2){return f1===nop?f2:function(){var res=f1.apply(this,arguments);void 0!==res&&(arguments[0]=res);var onsuccess=this.onsuccess,onerror=this.onerror;this.onsuccess=null,this.onerror=null;var res2=f2.apply(this,arguments);return onsuccess&&(this.onsuccess=this.onsuccess?callBoth(onsuccess,this.onsuccess):onsuccess),onerror&&(this.onerror=this.onerror?callBoth(onerror,this.onerror):onerror),void 0!==res2?res2:res}}function hookDeletingChain(f1,f2){return f1===nop?f2:function(){f1.apply(this,arguments);var onsuccess=this.onsuccess,onerror=this.onerror;this.onsuccess=this.onerror=null,f2.apply(this,arguments),onsuccess&&(this.onsuccess=this.onsuccess?callBoth(onsuccess,this.onsuccess):onsuccess),onerror&&(this.onerror=this.onerror?callBoth(onerror,this.onerror):onerror)}}function hookUpdatingChain(f1,f2){return f1===nop?f2:function(modifications){var res=f1.apply(this,arguments);extend(modifications,res);var onsuccess=this.onsuccess,onerror=this.onerror;this.onsuccess=null,this.onerror=null;var res2=f2.apply(this,arguments);return onsuccess&&(this.onsuccess=this.onsuccess?callBoth(onsuccess,this.onsuccess):onsuccess),onerror&&(this.onerror=this.onerror?callBoth(onerror,this.onerror):onerror),void 0===res?void 0===res2?void 0:res2:extend(res,res2)}}function reverseStoppableEventChain(f1,f2){return f1===nop?f2:function(){return!1!==f2.apply(this,arguments)&&f1.apply(this,arguments)}}function promisableChain(f1,f2){return f1===nop?f2:function(){var res=f1.apply(this,arguments);if(res&&"function"==typeof res.then){for(var thiz=this,i=arguments.length,args=new Array(i);i--;)args[i]=arguments[i];return res.then((function(){return f2.apply(thiz,args)}))}return f2.apply(this,arguments)}}fullNameExceptions.ModifyError=ModifyError,fullNameExceptions.DexieError=DexieError,fullNameExceptions.BulkError=BulkError;var INTERNAL={},_a$1="undefined"==typeof Promise?[]:function(){var globalP=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[globalP,getProto(globalP),globalP];var nativeP=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[nativeP,getProto(nativeP),globalP]}(),resolvedNativePromise=_a$1[0],nativePromiseProto=_a$1[1],resolvedGlobalPromise=_a$1[2],nativePromiseThen=nativePromiseProto&&nativePromiseProto.then,NativePromise=resolvedNativePromise&&resolvedNativePromise.constructor,patchGlobalPromise=!!resolvedGlobalPromise,stack_being_generated=!1,schedulePhysicalTick=resolvedGlobalPromise?function(){resolvedGlobalPromise.then(physicalTick)}:_global.setImmediate?setImmediate.bind(null,physicalTick):_global.MutationObserver?function(){var hiddenDiv=document.createElement("div");new MutationObserver((function(){physicalTick(),hiddenDiv=null})).observe(hiddenDiv,{attributes:!0}),hiddenDiv.setAttribute("i","1")}:function(){setTimeout(physicalTick,0)},asap=function(callback,args){microtickQueue.push([callback,args]),needsNewPhysicalTick&&(schedulePhysicalTick(),needsNewPhysicalTick=!1)},isOutsideMicroTick=!0,needsNewPhysicalTick=!0,unhandledErrors=[],rejectingErrors=[],currentFulfiller=null,rejectionMapper=mirror,globalPSD={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:globalError,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((function(uh){try{globalError(uh[0],uh[1])}catch(e){}}))}},PSD=globalPSD,microtickQueue=[],numScheduledCalls=0,tickFinalizers=[];function DexiePromise(fn){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=nop,this._lib=!1;var psd=this._PSD=PSD;if(debug&&(this._stackHolder=getErrorWithStack(),this._prev=null,this._numPrev=0),"function"!=typeof fn){if(fn!==INTERNAL)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&handleRejection(this,this._value))}this._state=null,this._value=null,++psd.ref,executePromiseTask(this,fn)}var thenProp={get:function(){var psd=PSD,microTaskId=totalEchoes;function then(onFulfilled,onRejected){var _this=this,possibleAwait=!psd.global&&(psd!==PSD||microTaskId!==totalEchoes),cleanup=possibleAwait&&!decrementExpectedAwaits(),rv=new DexiePromise((function(resolve,reject){propagateToListener(_this,new Listener(nativeAwaitCompatibleWrap(onFulfilled,psd,possibleAwait,cleanup),nativeAwaitCompatibleWrap(onRejected,psd,possibleAwait,cleanup),resolve,reject,psd))}));return debug&&linkToPreviousPromise(rv,this),rv}return then.prototype=INTERNAL,then},set:function(value){setProp(this,"then",value&&value.prototype===INTERNAL?thenProp:{get:function(){return value},set:thenProp.set})}};function Listener(onFulfilled,onRejected,resolve,reject,zone){this.onFulfilled="function"==typeof onFulfilled?onFulfilled:null,this.onRejected="function"==typeof onRejected?onRejected:null,this.resolve=resolve,this.reject=reject,this.psd=zone}function executePromiseTask(promise,fn){try{fn((function(value){if(null===promise._state){if(value===promise)throw new TypeError("A promise cannot be resolved with itself.");var shouldExecuteTick=promise._lib&&beginMicroTickScope();value&&"function"==typeof value.then?executePromiseTask(promise,(function(resolve,reject){value instanceof DexiePromise?value._then(resolve,reject):value.then(resolve,reject)})):(promise._state=!0,promise._value=value,propagateAllListeners(promise)),shouldExecuteTick&&endMicroTickScope()}}),handleRejection.bind(null,promise))}catch(ex){handleRejection(promise,ex)}}function handleRejection(promise,reason){if(rejectingErrors.push(reason),null===promise._state){var shouldExecuteTick=promise._lib&&beginMicroTickScope();reason=rejectionMapper(reason),promise._state=!1,promise._value=reason,debug&&null!==reason&&"object"==typeof reason&&!reason._promise&&function tryCatch(fn,onerror,args){try{fn.apply(null,args)}catch(ex){onerror&&onerror(ex)}}((function(){var origProp=getPropertyDescriptor(reason,"stack");reason._promise=promise,setProp(reason,"stack",{get:function(){return stack_being_generated?origProp&&(origProp.get?origProp.get.apply(reason):origProp.value):promise.stack}})})),function addPossiblyUnhandledError(promise){unhandledErrors.some((function(p2){return p2._value===promise._value}))||unhandledErrors.push(promise)}(promise),propagateAllListeners(promise),shouldExecuteTick&&endMicroTickScope()}}function propagateAllListeners(promise){var listeners=promise._listeners;promise._listeners=[];for(var i=0,len=listeners.length;i<len;++i)propagateToListener(promise,listeners[i]);var psd=promise._PSD;--psd.ref||psd.finalize(),0===numScheduledCalls&&(++numScheduledCalls,asap((function(){0==--numScheduledCalls&&finalizePhysicalTick()}),[]))}function propagateToListener(promise,listener){if(null!==promise._state){var cb=promise._state?listener.onFulfilled:listener.onRejected;if(null===cb)return(promise._state?listener.resolve:listener.reject)(promise._value);++listener.psd.ref,++numScheduledCalls,asap(callListener,[cb,promise,listener])}else promise._listeners.push(listener)}function callListener(cb,promise,listener){try{currentFulfiller=promise;var ret,value=promise._value;promise._state?ret=cb(value):(rejectingErrors.length&&(rejectingErrors=[]),ret=cb(value),-1===rejectingErrors.indexOf(value)&&function markErrorAsHandled(promise){var i=unhandledErrors.length;for(;i;)if(unhandledErrors[--i]._value===promise._value)return void unhandledErrors.splice(i,1)}(promise)),listener.resolve(ret)}catch(e){listener.reject(e)}finally{currentFulfiller=null,0==--numScheduledCalls&&finalizePhysicalTick(),--listener.psd.ref||listener.psd.finalize()}}function getStack(promise,stacks,limit){if(stacks.length===limit)return stacks;var stack="";if(!1===promise._state){var errorName,message,failure=promise._value;null!=failure?(errorName=failure.name||"Error",message=failure.message||failure,stack=prettyStack(failure,0)):(errorName=failure,message=""),stacks.push(errorName+(message?": "+message:"")+stack)}return debug&&((stack=prettyStack(promise._stackHolder,2))&&-1===stacks.indexOf(stack)&&stacks.push(stack),promise._prev&&getStack(promise._prev,stacks,limit)),stacks}function linkToPreviousPromise(promise,prev){var numPrev=prev?prev._numPrev+1:0;numPrev<100&&(promise._prev=prev,promise._numPrev=numPrev)}function physicalTick(){beginMicroTickScope()&&endMicroTickScope()}function beginMicroTickScope(){var wasRootExec=isOutsideMicroTick;return isOutsideMicroTick=!1,needsNewPhysicalTick=!1,wasRootExec}function endMicroTickScope(){var callbacks,i,l;do{for(;microtickQueue.length>0;)for(callbacks=microtickQueue,microtickQueue=[],l=callbacks.length,i=0;i<l;++i){var item=callbacks[i];item[0].apply(null,item[1])}}while(microtickQueue.length>0);isOutsideMicroTick=!0,needsNewPhysicalTick=!0}function finalizePhysicalTick(){var unhandledErrs=unhandledErrors;unhandledErrors=[],unhandledErrs.forEach((function(p2){p2._PSD.onunhandled.call(null,p2._value,p2)}));for(var finalizers=tickFinalizers.slice(0),i=finalizers.length;i;)finalizers[--i]()}function PromiseReject(reason){return new DexiePromise(INTERNAL,!1,reason)}function wrap(fn,errorCatcher){var psd=PSD;return function(){var wasRootExec=beginMicroTickScope(),outerScope=PSD;try{return switchToZone(psd,!0),fn.apply(this,arguments)}catch(e){errorCatcher&&errorCatcher(e)}finally{switchToZone(outerScope,!1),wasRootExec&&endMicroTickScope()}}}props(DexiePromise.prototype,{then:thenProp,_then:function(onFulfilled,onRejected){propagateToListener(this,new Listener(null,null,onFulfilled,onRejected,PSD))},catch:function(onRejected){if(1===arguments.length)return this.then(null,onRejected);var type2=arguments[0],handler=arguments[1];return"function"==typeof type2?this.then(null,(function(err){return err instanceof type2?handler(err):PromiseReject(err)})):this.then(null,(function(err){return err&&err.name===type2?handler(err):PromiseReject(err)}))},finally:function(onFinally){return this.then((function(value){return onFinally(),value}),(function(err){return onFinally(),PromiseReject(err)}))},stack:{get:function(){if(this._stack)return this._stack;try{stack_being_generated=!0;var stack=getStack(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=stack),stack}finally{stack_being_generated=!1}}},timeout:function(ms,msg){var _this=this;return ms<1/0?new DexiePromise((function(resolve,reject){var handle=setTimeout((function(){return reject(new exceptions.Timeout(msg))}),ms);_this.then(resolve,reject).finally(clearTimeout.bind(null,handle))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&setProp(DexiePromise.prototype,Symbol.toStringTag,"Dexie.Promise"),globalPSD.env=snapShot(),props(DexiePromise,{all:function(){var values=getArrayOf.apply(null,arguments).map(onPossibleParallellAsync);return new DexiePromise((function(resolve,reject){0===values.length&&resolve([]);var remaining=values.length;values.forEach((function(a,i){return DexiePromise.resolve(a).then((function(x){values[i]=x,--remaining||resolve(values)}),reject)}))}))},resolve:function(value){if(value instanceof DexiePromise)return value;if(value&&"function"==typeof value.then)return new DexiePromise((function(resolve,reject){value.then(resolve,reject)}));var rv=new DexiePromise(INTERNAL,!0,value);return linkToPreviousPromise(rv,currentFulfiller),rv},reject:PromiseReject,race:function(){var values=getArrayOf.apply(null,arguments).map(onPossibleParallellAsync);return new DexiePromise((function(resolve,reject){values.map((function(value){return DexiePromise.resolve(value).then(resolve,reject)}))}))},PSD:{get:function(){return PSD},set:function(value){return PSD=value}},totalEchoes:{get:function(){return totalEchoes}},newPSD:newScope,usePSD:usePSD,scheduler:{get:function(){return asap},set:function(value){asap=value}},rejectionMapper:{get:function(){return rejectionMapper},set:function(value){rejectionMapper=value}},follow:function(fn,zoneProps){return new DexiePromise((function(resolve,reject){return newScope((function(resolve2,reject2){var psd=PSD;psd.unhandleds=[],psd.onunhandled=reject2,psd.finalize=callBoth((function(){var _this=this;!function run_at_end_of_this_or_next_physical_tick(fn){function finalizer(){fn(),tickFinalizers.splice(tickFinalizers.indexOf(finalizer),1)}tickFinalizers.push(finalizer),++numScheduledCalls,asap((function(){0==--numScheduledCalls&&finalizePhysicalTick()}),[])}((function(){0===_this.unhandleds.length?resolve2():reject2(_this.unhandleds[0])}))}),psd.finalize),fn()}),zoneProps,resolve,reject)}))}}),NativePromise&&(NativePromise.allSettled&&setProp(DexiePromise,"allSettled",(function(){var possiblePromises=getArrayOf.apply(null,arguments).map(onPossibleParallellAsync);return new DexiePromise((function(resolve){0===possiblePromises.length&&resolve([]);var remaining=possiblePromises.length,results=new Array(remaining);possiblePromises.forEach((function(p2,i){return DexiePromise.resolve(p2).then((function(value){return results[i]={status:"fulfilled",value:value}}),(function(reason){return results[i]={status:"rejected",reason:reason}})).then((function(){return--remaining||resolve(results)}))}))}))})),NativePromise.any&&"undefined"!=typeof AggregateError&&setProp(DexiePromise,"any",(function(){var possiblePromises=getArrayOf.apply(null,arguments).map(onPossibleParallellAsync);return new DexiePromise((function(resolve,reject){0===possiblePromises.length&&reject(new AggregateError([]));var remaining=possiblePromises.length,failures=new Array(remaining);possiblePromises.forEach((function(p2,i){return DexiePromise.resolve(p2).then((function(value){return resolve(value)}),(function(failure){failures[i]=failure,--remaining||reject(new AggregateError(failures))}))}))}))})));var task={awaits:0,echoes:0,id:0},taskCounter=0,zoneStack=[],zoneEchoes=0,totalEchoes=0,zone_id_counter=0;function newScope(fn,props2,a1,a2){var parent=PSD,psd=Object.create(parent);psd.parent=parent,psd.ref=0,psd.global=!1,psd.id=++zone_id_counter;var globalEnv=globalPSD.env;psd.env=patchGlobalPromise?{Promise:DexiePromise,PromiseProp:{value:DexiePromise,configurable:!0,writable:!0},all:DexiePromise.all,race:DexiePromise.race,allSettled:DexiePromise.allSettled,any:DexiePromise.any,resolve:DexiePromise.resolve,reject:DexiePromise.reject,nthen:getPatchedPromiseThen(globalEnv.nthen,psd),gthen:getPatchedPromiseThen(globalEnv.gthen,psd)}:{},props2&&extend(psd,props2),++parent.ref,psd.finalize=function(){--this.parent.ref||this.parent.finalize()};var rv=usePSD(psd,fn,a1,a2);return 0===psd.ref&&psd.finalize(),rv}function incrementExpectedAwaits(){return task.id||(task.id=++taskCounter),++task.awaits,task.echoes+=100,task.id}function decrementExpectedAwaits(){return!!task.awaits&&(0==--task.awaits&&(task.id=0),task.echoes=100*task.awaits,!0)}function onPossibleParallellAsync(possiblePromise){return task.echoes&&possiblePromise&&possiblePromise.constructor===NativePromise?(incrementExpectedAwaits(),possiblePromise.then((function(x){return decrementExpectedAwaits(),x}),(function(e){return decrementExpectedAwaits(),rejection(e)}))):possiblePromise}function zoneEnterEcho(targetZone){++totalEchoes,task.echoes&&0!=--task.echoes||(task.echoes=task.id=0),zoneStack.push(PSD),switchToZone(targetZone,!0)}function zoneLeaveEcho(){var zone=zoneStack[zoneStack.length-1];zoneStack.pop(),switchToZone(zone,!1)}function switchToZone(targetZone,bEnteringZone){var currentZone=PSD;if((bEnteringZone?!task.echoes||zoneEchoes++&&targetZone===PSD:!zoneEchoes||--zoneEchoes&&targetZone===PSD)||enqueueNativeMicroTask(bEnteringZone?zoneEnterEcho.bind(null,targetZone):zoneLeaveEcho),targetZone!==PSD&&(PSD=targetZone,currentZone===globalPSD&&(globalPSD.env=snapShot()),patchGlobalPromise)){var GlobalPromise_1=globalPSD.env.Promise,targetEnv=targetZone.env;nativePromiseProto.then=targetEnv.nthen,GlobalPromise_1.prototype.then=targetEnv.gthen,(currentZone.global||targetZone.global)&&(Object.defineProperty(_global,"Promise",targetEnv.PromiseProp),GlobalPromise_1.all=targetEnv.all,GlobalPromise_1.race=targetEnv.race,GlobalPromise_1.resolve=targetEnv.resolve,GlobalPromise_1.reject=targetEnv.reject,targetEnv.allSettled&&(GlobalPromise_1.allSettled=targetEnv.allSettled),targetEnv.any&&(GlobalPromise_1.any=targetEnv.any))}}function snapShot(){var GlobalPromise=_global.Promise;return patchGlobalPromise?{Promise:GlobalPromise,PromiseProp:Object.getOwnPropertyDescriptor(_global,"Promise"),all:GlobalPromise.all,race:GlobalPromise.race,allSettled:GlobalPromise.allSettled,any:GlobalPromise.any,resolve:GlobalPromise.resolve,reject:GlobalPromise.reject,nthen:nativePromiseProto.then,gthen:GlobalPromise.prototype.then}:{}}function usePSD(psd,fn,a1,a2,a3){var outerScope=PSD;try{return switchToZone(psd,!0),fn(a1,a2,a3)}finally{switchToZone(outerScope,!1)}}function enqueueNativeMicroTask(job){nativePromiseThen.call(resolvedNativePromise,job)}function nativeAwaitCompatibleWrap(fn,zone,possibleAwait,cleanup){return"function"!=typeof fn?fn:function(){var outerZone=PSD;possibleAwait&&incrementExpectedAwaits(),switchToZone(zone,!0);try{return fn.apply(this,arguments)}finally{switchToZone(outerZone,!1),cleanup&&enqueueNativeMicroTask(decrementExpectedAwaits)}}}function getPatchedPromiseThen(origThen,zone){return function(onResolved,onRejected){return origThen.call(this,nativeAwaitCompatibleWrap(onResolved,zone),nativeAwaitCompatibleWrap(onRejected,zone))}}-1===(""+nativePromiseThen).indexOf("[native code]")&&(incrementExpectedAwaits=decrementExpectedAwaits=nop);function globalError(err,promise){var rv;try{rv=promise.onuncatched(err)}catch(e){}if(!1!==rv)try{var event,eventData={promise:promise,reason:err};if(_global.document&&document.createEvent?((event=document.createEvent("Event")).initEvent("unhandledrejection",!0,!0),extend(event,eventData)):_global.CustomEvent&&extend(event=new CustomEvent("unhandledrejection",{detail:eventData}),eventData),event&&_global.dispatchEvent&&(dispatchEvent(event),!_global.PromiseRejectionEvent&&_global.onunhandledrejection))try{_global.onunhandledrejection(event)}catch(_){}debug&&event&&!event.defaultPrevented&&console.warn("Unhandled rejection: "+(err.stack||err))}catch(e){}}var rejection=DexiePromise.reject;function tempTransaction(db2,mode,storeNames,fn){if(db2.idbdb&&(db2._state.openComplete||PSD.letThrough||db2._vip)){var trans=db2._createTransaction(mode,storeNames,db2._dbSchema);try{trans.create(),db2._state.PR1398_maxLoop=3}catch(ex){return ex.name===errnames.InvalidState&&db2.isOpen()&&--db2._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),db2._close(),db2.open().then((function(){return tempTransaction(db2,mode,storeNames,fn)}))):rejection(ex)}return trans._promise(mode,(function(resolve,reject){return newScope((function(){return PSD.trans=trans,fn(resolve,reject,trans)}))})).then((function(result){return trans._completion.then((function(){return result}))}))}if(db2._state.openComplete)return rejection(new exceptions.DatabaseClosed(db2._state.dbOpenError));if(!db2._state.isBeingOpened){if(!db2._options.autoOpen)return rejection(new exceptions.DatabaseClosed);db2.open().catch(nop)}return db2._state.dbReadyPromise.then((function(){return tempTransaction(db2,mode,storeNames,fn)}))}var maxString=String.fromCharCode(65535),INVALID_KEY_ARGUMENT="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",connections=[],isIEOrEdge="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),hasIEDeleteObjectStoreBug=isIEOrEdge,hangsOnDeleteLargeKeyRange=isIEOrEdge,dexieStackFrameFilter=function(frame){return!/(dexie\.js|dexie\.min\.js)/.test(frame)};function combine(filter1,filter2){return filter1?filter2?function(){return filter1.apply(this,arguments)&&filter2.apply(this,arguments)}:filter1:filter2}var AnyRange={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function workaroundForUndefinedPrimKey(keyPath){return"string"!=typeof keyPath||/\./.test(keyPath)?function(obj){return obj}:function(obj){return void 0===obj[keyPath]&&keyPath in obj&&delete(obj=deepClone(obj))[keyPath],obj}}var Table=function(){function Table2(){}return Table2.prototype._trans=function(mode,fn,writeLocked){var trans=this._tx||PSD.trans,tableName=this.name;function checkTableInTransaction(resolve,reject,trans2){if(!trans2.schema[tableName])throw new exceptions.NotFound("Table "+tableName+" not part of transaction");return fn(trans2.idbtrans,trans2)}var wasRootExec=beginMicroTickScope();try{return trans&&trans.db===this.db?trans===PSD.trans?trans._promise(mode,checkTableInTransaction,writeLocked):newScope((function(){return trans._promise(mode,checkTableInTransaction,writeLocked)}),{trans:trans,transless:PSD.transless||PSD}):tempTransaction(this.db,mode,[this.name],checkTableInTransaction)}finally{wasRootExec&&endMicroTickScope()}},Table2.prototype.get=function(keyOrCrit,cb){var _this=this;return keyOrCrit&&keyOrCrit.constructor===Object?this.where(keyOrCrit).first(cb):this._trans("readonly",(function(trans){return _this.core.get({trans:trans,key:keyOrCrit}).then((function(res){return _this.hook.reading.fire(res)}))})).then(cb)},Table2.prototype.where=function(indexOrCrit){if("string"==typeof indexOrCrit)return new this.db.WhereClause(this,indexOrCrit);if(isArray(indexOrCrit))return new this.db.WhereClause(this,"["+indexOrCrit.join("+")+"]");var keyPaths=keys(indexOrCrit);if(1===keyPaths.length)return this.where(keyPaths[0]).equals(indexOrCrit[keyPaths[0]]);var compoundIndex=this.schema.indexes.concat(this.schema.primKey).filter((function(ix){return ix.compound&&keyPaths.every((function(keyPath){return ix.keyPath.indexOf(keyPath)>=0}))&&ix.keyPath.every((function(keyPath){return keyPaths.indexOf(keyPath)>=0}))}))[0];if(compoundIndex&&this.db._maxKey!==maxString)return this.where(compoundIndex.name).equals(compoundIndex.keyPath.map((function(kp){return indexOrCrit[kp]})));!compoundIndex&&debug&&console.warn("The query "+JSON.stringify(indexOrCrit)+" on "+this.name+" would benefit of a compound index ["+keyPaths.join("+")+"]");var idxByName=this.schema.idxByName,idb=this.db._deps.indexedDB;function equals(a,b){try{return 0===idb.cmp(a,b)}catch(e){return!1}}var _a3=keyPaths.reduce((function(_a4,keyPath){var prevIndex=_a4[0],prevFilterFn=_a4[1],index=idxByName[keyPath],value=indexOrCrit[keyPath];return[prevIndex||index,prevIndex||!index?combine(prevFilterFn,index&&index.multi?function(x){var prop=getByKeyPath(x,keyPath);return isArray(prop)&&prop.some((function(item){return equals(value,item)}))}:function(x){return equals(value,getByKeyPath(x,keyPath))}):prevFilterFn]}),[null,null]),idx=_a3[0],filterFunction=_a3[1];return idx?this.where(idx.name).equals(indexOrCrit[idx.keyPath]).filter(filterFunction):compoundIndex?this.filter(filterFunction):this.where(keyPaths).equals("")},Table2.prototype.filter=function(filterFunction){return this.toCollection().and(filterFunction)},Table2.prototype.count=function(thenShortcut){return this.toCollection().count(thenShortcut)},Table2.prototype.offset=function(offset){return this.toCollection().offset(offset)},Table2.prototype.limit=function(numRows){return this.toCollection().limit(numRows)},Table2.prototype.each=function(callback){return this.toCollection().each(callback)},Table2.prototype.toArray=function(thenShortcut){return this.toCollection().toArray(thenShortcut)},Table2.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Table2.prototype.orderBy=function(index){return new this.db.Collection(new this.db.WhereClause(this,isArray(index)?"["+index.join("+")+"]":index))},Table2.prototype.reverse=function(){return this.toCollection().reverse()},Table2.prototype.mapToClass=function(constructor){this.schema.mappedClass=constructor;var readHook=function(obj){if(!obj)return obj;var res=Object.create(constructor.prototype);for(var m in obj)if(hasOwn(obj,m))try{res[m]=obj[m]}catch(_){}return res};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=readHook,this.hook("reading",readHook),constructor},Table2.prototype.defineClass=function(){return this.mapToClass((function Class(content){extend(this,content)}))},Table2.prototype.add=function(obj,key){var _this=this,_a3=this.schema.primKey,auto=_a3.auto,keyPath=_a3.keyPath,objToAdd=obj;return keyPath&&auto&&(objToAdd=workaroundForUndefinedPrimKey(keyPath)(obj)),this._trans("readwrite",(function(trans){return _this.core.mutate({trans:trans,type:"add",keys:null!=key?[key]:null,values:[objToAdd]})})).then((function(res){return res.numFailures?DexiePromise.reject(res.failures[0]):res.lastResult})).then((function(lastResult){if(keyPath)try{setByKeyPath(obj,keyPath,lastResult)}catch(_){}return lastResult}))},Table2.prototype.update=function(keyOrObject,modifications){if("object"!=typeof keyOrObject||isArray(keyOrObject))return this.where(":id").equals(keyOrObject).modify(modifications);var key=getByKeyPath(keyOrObject,this.schema.primKey.keyPath);if(void 0===key)return rejection(new exceptions.InvalidArgument("Given object does not contain its primary key"));try{"function"!=typeof modifications?keys(modifications).forEach((function(keyPath){setByKeyPath(keyOrObject,keyPath,modifications[keyPath])})):modifications(keyOrObject,{value:keyOrObject,primKey:key})}catch(_a3){}return this.where(":id").equals(key).modify(modifications)},Table2.prototype.put=function(obj,key){var _this=this,_a3=this.schema.primKey,auto=_a3.auto,keyPath=_a3.keyPath,objToAdd=obj;return keyPath&&auto&&(objToAdd=workaroundForUndefinedPrimKey(keyPath)(obj)),this._trans("readwrite",(function(trans){return _this.core.mutate({trans:trans,type:"put",values:[objToAdd],keys:null!=key?[key]:null})})).then((function(res){return res.numFailures?DexiePromise.reject(res.failures[0]):res.lastResult})).then((function(lastResult){if(keyPath)try{setByKeyPath(obj,keyPath,lastResult)}catch(_){}return lastResult}))},Table2.prototype.delete=function(key){var _this=this;return this._trans("readwrite",(function(trans){return _this.core.mutate({trans:trans,type:"delete",keys:[key]})})).then((function(res){return res.numFailures?DexiePromise.reject(res.failures[0]):void 0}))},Table2.prototype.clear=function(){var _this=this;return this._trans("readwrite",(function(trans){return _this.core.mutate({trans:trans,type:"deleteRange",range:AnyRange})})).then((function(res){return res.numFailures?DexiePromise.reject(res.failures[0]):void 0}))},Table2.prototype.bulkGet=function(keys2){var _this=this;return this._trans("readonly",(function(trans){return _this.core.getMany({keys:keys2,trans:trans}).then((function(result){return result.map((function(res){return _this.hook.reading.fire(res)}))}))}))},Table2.prototype.bulkAdd=function(objects,keysOrOptions,options){var _this=this,keys2=Array.isArray(keysOrOptions)?keysOrOptions:void 0,wantResults=(options=options||(keys2?void 0:keysOrOptions))?options.allKeys:void 0;return this._trans("readwrite",(function(trans){var _a3=_this.schema.primKey,auto=_a3.auto,keyPath=_a3.keyPath;if(keyPath&&keys2)throw new exceptions.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(keys2&&keys2.length!==objects.length)throw new exceptions.InvalidArgument("Arguments objects and keys must have the same length");var numObjects=objects.length,objectsToAdd=keyPath&&auto?objects.map(workaroundForUndefinedPrimKey(keyPath)):objects;return _this.core.mutate({trans:trans,type:"add",keys:keys2,values:objectsToAdd,wantResults:wantResults}).then((function(_a4){var numFailures=_a4.numFailures,results=_a4.results,lastResult=_a4.lastResult,failures=_a4.failures;if(0===numFailures)return wantResults?results:lastResult;throw new BulkError(_this.name+".bulkAdd(): "+numFailures+" of "+numObjects+" operations failed",failures)}))}))},Table2.prototype.bulkPut=function(objects,keysOrOptions,options){var _this=this,keys2=Array.isArray(keysOrOptions)?keysOrOptions:void 0,wantResults=(options=options||(keys2?void 0:keysOrOptions))?options.allKeys:void 0;return this._trans("readwrite",(function(trans){var _a3=_this.schema.primKey,auto=_a3.auto,keyPath=_a3.keyPath;if(keyPath&&keys2)throw new exceptions.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(keys2&&keys2.length!==objects.length)throw new exceptions.InvalidArgument("Arguments objects and keys must have the same length");var numObjects=objects.length,objectsToPut=keyPath&&auto?objects.map(workaroundForUndefinedPrimKey(keyPath)):objects;return _this.core.mutate({trans:trans,type:"put",keys:keys2,values:objectsToPut,wantResults:wantResults}).then((function(_a4){var numFailures=_a4.numFailures,results=_a4.results,lastResult=_a4.lastResult,failures=_a4.failures;if(0===numFailures)return wantResults?results:lastResult;throw new BulkError(_this.name+".bulkPut(): "+numFailures+" of "+numObjects+" operations failed",failures)}))}))},Table2.prototype.bulkDelete=function(keys2){var _this=this,numKeys=keys2.length;return this._trans("readwrite",(function(trans){return _this.core.mutate({trans:trans,type:"delete",keys:keys2})})).then((function(_a3){var numFailures=_a3.numFailures,lastResult=_a3.lastResult,failures=_a3.failures;if(0===numFailures)return lastResult;throw new BulkError(_this.name+".bulkDelete(): "+numFailures+" of "+numKeys+" operations failed",failures)}))},Table2}();function Events(ctx){var evs={},rv=function(eventName,subscriber){if(subscriber){for(var i2=arguments.length,args=new Array(i2-1);--i2;)args[i2-1]=arguments[i2];return evs[eventName].subscribe.apply(null,args),ctx}if("string"==typeof eventName)return evs[eventName]};rv.addEventType=add2;for(var i=1,l=arguments.length;i<l;++i)add2(arguments[i]);return rv;function add2(eventName,chainFunction,defaultFunction){if("object"==typeof eventName)return addConfiguredEvents(eventName);chainFunction||(chainFunction=reverseStoppableEventChain),defaultFunction||(defaultFunction=nop);var context={subscribers:[],fire:defaultFunction,subscribe:function(cb){-1===context.subscribers.indexOf(cb)&&(context.subscribers.push(cb),context.fire=chainFunction(context.fire,cb))},unsubscribe:function(cb){context.subscribers=context.subscribers.filter((function(fn){return fn!==cb})),context.fire=context.subscribers.reduce(chainFunction,defaultFunction)}};return evs[eventName]=rv[eventName]=context,context}function addConfiguredEvents(cfg){keys(cfg).forEach((function(eventName){var args=cfg[eventName];if(isArray(args))add2(eventName,cfg[eventName][0],cfg[eventName][1]);else{if("asap"!==args)throw new exceptions.InvalidArgument("Invalid event config");var context=add2(eventName,mirror,(function fire(){for(var i2=arguments.length,args2=new Array(i2);i2--;)args2[i2]=arguments[i2];context.subscribers.forEach((function(fn){asap$1((function fireEvent(){fn.apply(null,args2)}))}))}))}}))}}function makeClassConstructor(prototype,constructor){return derive(constructor).from({prototype:prototype}),constructor}function isPlainKeyRange(ctx,ignoreLimitFilter){return!(ctx.filter||ctx.algorithm||ctx.or)&&(ignoreLimitFilter?ctx.justLimit:!ctx.replayFilter)}function addFilter(ctx,fn){ctx.filter=combine(ctx.filter,fn)}function addReplayFilter(ctx,factory,isLimitFilter){var curr=ctx.replayFilter;ctx.replayFilter=curr?function(){return combine(curr(),factory())}:factory,ctx.justLimit=isLimitFilter&&!curr}function getIndexOrStore(ctx,coreSchema){if(ctx.isPrimKey)return coreSchema.primaryKey;var index=coreSchema.getIndexByKeyPath(ctx.index);if(!index)throw new exceptions.Schema("KeyPath "+ctx.index+" on object store "+coreSchema.name+" is not indexed");return index}function openCursor(ctx,coreTable,trans){var index=getIndexOrStore(ctx,coreTable.schema);return coreTable.openCursor({trans:trans,values:!ctx.keysOnly,reverse:"prev"===ctx.dir,unique:!!ctx.unique,query:{index:index,range:ctx.range}})}function iter(ctx,fn,coreTrans,coreTable){var filter=ctx.replayFilter?combine(ctx.filter,ctx.replayFilter()):ctx.filter;if(ctx.or){var set_1={},union=function(item,cursor,advance){if(!filter||filter(cursor,advance,(function(result){return cursor.stop(result)}),(function(err){return cursor.fail(err)}))){var primaryKey=cursor.primaryKey,key=""+primaryKey;"[object ArrayBuffer]"===key&&(key=""+new Uint8Array(primaryKey)),hasOwn(set_1,key)||(set_1[key]=!0,fn(item,cursor,advance))}};return Promise.all([ctx.or._iterate(union,coreTrans),iterate(openCursor(ctx,coreTable,coreTrans),ctx.algorithm,union,!ctx.keysOnly&&ctx.valueMapper)])}return iterate(openCursor(ctx,coreTable,coreTrans),combine(ctx.algorithm,filter),fn,!ctx.keysOnly&&ctx.valueMapper)}function iterate(cursorPromise,filter,fn,valueMapper){var wrappedFn=wrap(valueMapper?function(x,c,a){return fn(valueMapper(x),c,a)}:fn);return cursorPromise.then((function(cursor){if(cursor)return cursor.start((function(){var c=function(){return cursor.continue()};filter&&!filter(cursor,(function(advancer){return c=advancer}),(function(val){cursor.stop(val),c=nop}),(function(e){cursor.fail(e),c=nop}))||wrappedFn(cursor.value,cursor,(function(advancer){return c=advancer})),c()}))}))}function cmp(a,b){try{var ta=type(a),tb=type(b);if(ta!==tb)return"Array"===ta?1:"Array"===tb?-1:"binary"===ta?1:"binary"===tb?-1:"string"===ta?1:"string"===tb?-1:"Date"===ta?1:"Date"!==tb?NaN:-1;switch(ta){case"number":case"Date":case"string":return a>b?1:a<b?-1:0;case"binary":return function compareUint8Arrays(a,b){for(var al=a.length,bl=b.length,l=al<bl?al:bl,i=0;i<l;++i)if(a[i]!==b[i])return a[i]<b[i]?-1:1;return al===bl?0:al<bl?-1:1}(getUint8Array(a),getUint8Array(b));case"Array":return function compareArrays(a,b){for(var al=a.length,bl=b.length,l=al<bl?al:bl,i=0;i<l;++i){var res=cmp(a[i],b[i]);if(0!==res)return res}return al===bl?0:al<bl?-1:1}(a,b)}}catch(_a3){}return NaN}function type(x){var t=typeof x;if("object"!==t)return t;if(ArrayBuffer.isView(x))return"binary";var tsTag=toStringTag(x);return"ArrayBuffer"===tsTag?"binary":tsTag}function getUint8Array(a){return a instanceof Uint8Array?a:ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength):new Uint8Array(a)}var Collection=function(){function Collection2(){}return Collection2.prototype._read=function(fn,cb){var ctx=this._ctx;return ctx.error?ctx.table._trans(null,rejection.bind(null,ctx.error)):ctx.table._trans("readonly",fn).then(cb)},Collection2.prototype._write=function(fn){var ctx=this._ctx;return ctx.error?ctx.table._trans(null,rejection.bind(null,ctx.error)):ctx.table._trans("readwrite",fn,"locked")},Collection2.prototype._addAlgorithm=function(fn){var ctx=this._ctx;ctx.algorithm=combine(ctx.algorithm,fn)},Collection2.prototype._iterate=function(fn,coreTrans){return iter(this._ctx,fn,coreTrans,this._ctx.table.core)},Collection2.prototype.clone=function(props2){var rv=Object.create(this.constructor.prototype),ctx=Object.create(this._ctx);return props2&&extend(ctx,props2),rv._ctx=ctx,rv},Collection2.prototype.raw=function(){return this._ctx.valueMapper=null,this},Collection2.prototype.each=function(fn){var ctx=this._ctx;return this._read((function(trans){return iter(ctx,fn,trans,ctx.table.core)}))},Collection2.prototype.count=function(cb){var _this=this;return this._read((function(trans){var ctx=_this._ctx,coreTable=ctx.table.core;if(isPlainKeyRange(ctx,!0))return coreTable.count({trans:trans,query:{index:getIndexOrStore(ctx,coreTable.schema),range:ctx.range}}).then((function(count2){return Math.min(count2,ctx.limit)}));var count=0;return iter(ctx,(function(){return++count,!1}),trans,coreTable).then((function(){return count}))})).then(cb)},Collection2.prototype.sortBy=function(keyPath,cb){var parts=keyPath.split(".").reverse(),lastPart=parts[0],lastIndex=parts.length-1;function getval(obj,i){return i?getval(obj[parts[i]],i-1):obj[lastPart]}var order="next"===this._ctx.dir?1:-1;function sorter(a,b){var aVal=getval(a,lastIndex),bVal=getval(b,lastIndex);return aVal<bVal?-order:aVal>bVal?order:0}return this.toArray((function(a){return a.sort(sorter)})).then(cb)},Collection2.prototype.toArray=function(cb){var _this=this;return this._read((function(trans){var ctx=_this._ctx;if("next"===ctx.dir&&isPlainKeyRange(ctx,!0)&&ctx.limit>0){var valueMapper_1=ctx.valueMapper,index=getIndexOrStore(ctx,ctx.table.core.schema);return ctx.table.core.query({trans:trans,limit:ctx.limit,values:!0,query:{index:index,range:ctx.range}}).then((function(_a3){var result=_a3.result;return valueMapper_1?result.map(valueMapper_1):result}))}var a_1=[];return iter(ctx,(function(item){return a_1.push(item)}),trans,ctx.table.core).then((function(){return a_1}))}),cb)},Collection2.prototype.offset=function(offset){var ctx=this._ctx;return offset<=0||(ctx.offset+=offset,isPlainKeyRange(ctx)?addReplayFilter(ctx,(function(){var offsetLeft=offset;return function(cursor,advance){return 0===offsetLeft||(1===offsetLeft?(--offsetLeft,!1):(advance((function(){cursor.advance(offsetLeft),offsetLeft=0})),!1))}})):addReplayFilter(ctx,(function(){var offsetLeft=offset;return function(){return--offsetLeft<0}}))),this},Collection2.prototype.limit=function(numRows){return this._ctx.limit=Math.min(this._ctx.limit,numRows),addReplayFilter(this._ctx,(function(){var rowsLeft=numRows;return function(cursor,advance,resolve){return--rowsLeft<=0&&advance(resolve),rowsLeft>=0}}),!0),this},Collection2.prototype.until=function(filterFunction,bIncludeStopEntry){return addFilter(this._ctx,(function(cursor,advance,resolve){return!filterFunction(cursor.value)||(advance(resolve),bIncludeStopEntry)})),this},Collection2.prototype.first=function(cb){return this.limit(1).toArray((function(a){return a[0]})).then(cb)},Collection2.prototype.last=function(cb){return this.reverse().first(cb)},Collection2.prototype.filter=function(filterFunction){return addFilter(this._ctx,(function(cursor){return filterFunction(cursor.value)})),function addMatchFilter(ctx,fn){ctx.isMatch=combine(ctx.isMatch,fn)}(this._ctx,filterFunction),this},Collection2.prototype.and=function(filter){return this.filter(filter)},Collection2.prototype.or=function(indexName){return new this.db.WhereClause(this._ctx.table,indexName,this)},Collection2.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Collection2.prototype.desc=function(){return this.reverse()},Collection2.prototype.eachKey=function(cb){var ctx=this._ctx;return ctx.keysOnly=!ctx.isMatch,this.each((function(val,cursor){cb(cursor.key,cursor)}))},Collection2.prototype.eachUniqueKey=function(cb){return this._ctx.unique="unique",this.eachKey(cb)},Collection2.prototype.eachPrimaryKey=function(cb){var ctx=this._ctx;return ctx.keysOnly=!ctx.isMatch,this.each((function(val,cursor){cb(cursor.primaryKey,cursor)}))},Collection2.prototype.keys=function(cb){var ctx=this._ctx;ctx.keysOnly=!ctx.isMatch;var a=[];return this.each((function(item,cursor){a.push(cursor.key)})).then((function(){return a})).then(cb)},Collection2.prototype.primaryKeys=function(cb){var ctx=this._ctx;if("next"===ctx.dir&&isPlainKeyRange(ctx,!0)&&ctx.limit>0)return this._read((function(trans){var index=getIndexOrStore(ctx,ctx.table.core.schema);return ctx.table.core.query({trans:trans,values:!1,limit:ctx.limit,query:{index:index,range:ctx.range}})})).then((function(_a3){return _a3.result})).then(cb);ctx.keysOnly=!ctx.isMatch;var a=[];return this.each((function(item,cursor){a.push(cursor.primaryKey)})).then((function(){return a})).then(cb)},Collection2.prototype.uniqueKeys=function(cb){return this._ctx.unique="unique",this.keys(cb)},Collection2.prototype.firstKey=function(cb){return this.limit(1).keys((function(a){return a[0]})).then(cb)},Collection2.prototype.lastKey=function(cb){return this.reverse().firstKey(cb)},Collection2.prototype.distinct=function(){var ctx=this._ctx,idx=ctx.index&&ctx.table.schema.idxByName[ctx.index];if(!idx||!idx.multi)return this;var set2={};return addFilter(this._ctx,(function(cursor){var strKey=cursor.primaryKey.toString(),found=hasOwn(set2,strKey);return set2[strKey]=!0,!found})),this},Collection2.prototype.modify=function(changes){var _this=this,ctx=this._ctx;return this._write((function(trans){var modifyer;if("function"==typeof changes)modifyer=changes;else{var keyPaths=keys(changes),numKeys=keyPaths.length;modifyer=function(item){for(var anythingModified=!1,i=0;i<numKeys;++i){var keyPath=keyPaths[i],val=changes[keyPath];getByKeyPath(item,keyPath)!==val&&(setByKeyPath(item,keyPath,val),anythingModified=!0)}return anythingModified}}var coreTable=ctx.table.core,_a3=coreTable.schema.primaryKey,outbound=_a3.outbound,extractKey=_a3.extractKey,limit=_this.db._options.modifyChunkSize||200,totalFailures=[],successCount=0,failedKeys=[],applyMutateResult=function(expectedCount,res){var failures=res.failures,numFailures=res.numFailures;successCount+=expectedCount-numFailures;for(var _i=0,_a4=keys(failures);_i<_a4.length;_i++){var pos=_a4[_i];totalFailures.push(failures[pos])}};return _this.clone().primaryKeys().then((function(keys2){var nextChunk=function(offset){var count=Math.min(limit,keys2.length-offset);return coreTable.getMany({trans:trans,keys:keys2.slice(offset,offset+count),cache:"immutable"}).then((function(values){for(var addValues=[],putValues=[],putKeys=outbound?[]:null,deleteKeys=[],i=0;i<count;++i){var origValue=values[i],ctx_1={value:deepClone(origValue),primKey:keys2[offset+i]};!1!==modifyer.call(ctx_1,ctx_1.value,ctx_1)&&(null==ctx_1.value?deleteKeys.push(keys2[offset+i]):outbound||0===cmp(extractKey(origValue),extractKey(ctx_1.value))?(putValues.push(ctx_1.value),outbound&&putKeys.push(keys2[offset+i])):(deleteKeys.push(keys2[offset+i]),addValues.push(ctx_1.value)))}var criteria=isPlainKeyRange(ctx)&&ctx.limit===1/0&&("function"!=typeof changes||changes===deleteCallback)&&{index:ctx.index,range:ctx.range};return Promise.resolve(addValues.length>0&&coreTable.mutate({trans:trans,type:"add",values:addValues}).then((function(res){for(var pos in res.failures)deleteKeys.splice(parseInt(pos),1);applyMutateResult(addValues.length,res)}))).then((function(){return(putValues.length>0||criteria&&"object"==typeof changes)&&coreTable.mutate({trans:trans,type:"put",keys:putKeys,values:putValues,criteria:criteria,changeSpec:"function"!=typeof changes&&changes}).then((function(res){return applyMutateResult(putValues.length,res)}))})).then((function(){return(deleteKeys.length>0||criteria&&changes===deleteCallback)&&coreTable.mutate({trans:trans,type:"delete",keys:deleteKeys,criteria:criteria}).then((function(res){return applyMutateResult(deleteKeys.length,res)}))})).then((function(){return keys2.length>offset+count&&nextChunk(offset+limit)}))}))};return nextChunk(0).then((function(){if(totalFailures.length>0)throw new ModifyError("Error modifying one or more objects",totalFailures,successCount,failedKeys);return keys2.length}))}))}))},Collection2.prototype.delete=function(){var ctx=this._ctx,range=ctx.range;return isPlainKeyRange(ctx)&&(ctx.isPrimKey&&!hangsOnDeleteLargeKeyRange||3===range.type)?this._write((function(trans){var primaryKey=ctx.table.core.schema.primaryKey,coreRange=range;return ctx.table.core.count({trans:trans,query:{index:primaryKey,range:coreRange}}).then((function(count){return ctx.table.core.mutate({trans:trans,type:"deleteRange",range:coreRange}).then((function(_a3){var failures=_a3.failures;_a3.lastResult,_a3.results;var numFailures=_a3.numFailures;if(numFailures)throw new ModifyError("Could not delete some values",Object.keys(failures).map((function(pos){return failures[pos]})),count-numFailures);return count-numFailures}))}))})):this.modify(deleteCallback)},Collection2}(),deleteCallback=function(value,ctx){return ctx.value=null};function simpleCompare(a,b){return a<b?-1:a===b?0:1}function simpleCompareReverse(a,b){return a>b?-1:a===b?0:1}function fail(collectionOrWhereClause,err,T){var collection=collectionOrWhereClause instanceof WhereClause?new collectionOrWhereClause.Collection(collectionOrWhereClause):collectionOrWhereClause;return collection._ctx.error=T?new T(err):new TypeError(err),collection}function emptyCollection(whereClause){return new whereClause.Collection(whereClause,(function(){return rangeEqual("")})).limit(0)}function nextCasing(key,lowerKey,upperNeedle,lowerNeedle,cmp2,dir){for(var length=Math.min(key.length,lowerNeedle.length),llp=-1,i=0;i<length;++i){var lwrKeyChar=lowerKey[i];if(lwrKeyChar!==lowerNeedle[i])return cmp2(key[i],upperNeedle[i])<0?key.substr(0,i)+upperNeedle[i]+upperNeedle.substr(i+1):cmp2(key[i],lowerNeedle[i])<0?key.substr(0,i)+lowerNeedle[i]+upperNeedle.substr(i+1):llp>=0?key.substr(0,llp)+lowerKey[llp]+upperNeedle.substr(llp+1):null;cmp2(key[i],lwrKeyChar)<0&&(llp=i)}return length<lowerNeedle.length&&"next"===dir?key+upperNeedle.substr(key.length):length<key.length&&"prev"===dir?key.substr(0,upperNeedle.length):llp<0?null:key.substr(0,llp)+lowerNeedle[llp]+upperNeedle.substr(llp+1)}function addIgnoreCaseAlgorithm(whereClause,match,needles,suffix){var upper,lower,compare,upperNeedles,lowerNeedles,direction,nextKeySuffix,needlesLen=needles.length;if(!needles.every((function(s){return"string"==typeof s})))return fail(whereClause,"String expected.");function initDirection(dir){upper=function upperFactory(dir){return"next"===dir?function(s){return s.toUpperCase()}:function(s){return s.toLowerCase()}}(dir),lower=function lowerFactory(dir){return"next"===dir?function(s){return s.toLowerCase()}:function(s){return s.toUpperCase()}}(dir),compare="next"===dir?simpleCompare:simpleCompareReverse;var needleBounds=needles.map((function(needle){return{lower:lower(needle),upper:upper(needle)}})).sort((function(a,b){return compare(a.lower,b.lower)}));upperNeedles=needleBounds.map((function(nb){return nb.upper})),lowerNeedles=needleBounds.map((function(nb){return nb.lower})),direction=dir,nextKeySuffix="next"===dir?"":suffix}initDirection("next");var c=new whereClause.Collection(whereClause,(function(){return createRange(upperNeedles[0],lowerNeedles[needlesLen-1]+suffix)}));c._ondirectionchange=function(direction2){initDirection(direction2)};var firstPossibleNeedle=0;return c._addAlgorithm((function(cursor,advance,resolve){var key=cursor.key;if("string"!=typeof key)return!1;var lowerKey=lower(key);if(match(lowerKey,lowerNeedles,firstPossibleNeedle))return!0;for(var lowestPossibleCasing=null,i=firstPossibleNeedle;i<needlesLen;++i){var casing=nextCasing(key,lowerKey,upperNeedles[i],lowerNeedles[i],compare,direction);null===casing&&null===lowestPossibleCasing?firstPossibleNeedle=i+1:(null===lowestPossibleCasing||compare(lowestPossibleCasing,casing)>0)&&(lowestPossibleCasing=casing)}return advance(null!==lowestPossibleCasing?function(){cursor.continue(lowestPossibleCasing+nextKeySuffix)}:resolve),!1})),c}function createRange(lower,upper,lowerOpen,upperOpen){return{type:2,lower:lower,upper:upper,lowerOpen:lowerOpen,upperOpen:upperOpen}}function rangeEqual(value){return{type:1,lower:value,upper:value}}var WhereClause=function(){function WhereClause2(){}return Object.defineProperty(WhereClause2.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),WhereClause2.prototype.between=function(lower,upper,includeLower,includeUpper){includeLower=!1!==includeLower,includeUpper=!0===includeUpper;try{return this._cmp(lower,upper)>0||0===this._cmp(lower,upper)&&(includeLower||includeUpper)&&(!includeLower||!includeUpper)?emptyCollection(this):new this.Collection(this,(function(){return createRange(lower,upper,!includeLower,!includeUpper)}))}catch(e){return fail(this,INVALID_KEY_ARGUMENT)}},WhereClause2.prototype.equals=function(value){return null==value?fail(this,INVALID_KEY_ARGUMENT):new this.Collection(this,(function(){return rangeEqual(value)}))},WhereClause2.prototype.above=function(value){return null==value?fail(this,INVALID_KEY_ARGUMENT):new this.Collection(this,(function(){return createRange(value,void 0,!0)}))},WhereClause2.prototype.aboveOrEqual=function(value){return null==value?fail(this,INVALID_KEY_ARGUMENT):new this.Collection(this,(function(){return createRange(value,void 0,!1)}))},WhereClause2.prototype.below=function(value){return null==value?fail(this,INVALID_KEY_ARGUMENT):new this.Collection(this,(function(){return createRange(void 0,value,!1,!0)}))},WhereClause2.prototype.belowOrEqual=function(value){return null==value?fail(this,INVALID_KEY_ARGUMENT):new this.Collection(this,(function(){return createRange(void 0,value)}))},WhereClause2.prototype.startsWith=function(str){return"string"!=typeof str?fail(this,"String expected."):this.between(str,str+maxString,!0,!0)},WhereClause2.prototype.startsWithIgnoreCase=function(str){return""===str?this.startsWith(str):addIgnoreCaseAlgorithm(this,(function(x,a){return 0===x.indexOf(a[0])}),[str],maxString)},WhereClause2.prototype.equalsIgnoreCase=function(str){return addIgnoreCaseAlgorithm(this,(function(x,a){return x===a[0]}),[str],"")},WhereClause2.prototype.anyOfIgnoreCase=function(){var set2=getArrayOf.apply(NO_CHAR_ARRAY,arguments);return 0===set2.length?emptyCollection(this):addIgnoreCaseAlgorithm(this,(function(x,a){return-1!==a.indexOf(x)}),set2,"")},WhereClause2.prototype.startsWithAnyOfIgnoreCase=function(){var set2=getArrayOf.apply(NO_CHAR_ARRAY,arguments);return 0===set2.length?emptyCollection(this):addIgnoreCaseAlgorithm(this,(function(x,a){return a.some((function(n){return 0===x.indexOf(n)}))}),set2,maxString)},WhereClause2.prototype.anyOf=function(){var _this=this,set2=getArrayOf.apply(NO_CHAR_ARRAY,arguments),compare=this._cmp;try{set2.sort(compare)}catch(e){return fail(this,INVALID_KEY_ARGUMENT)}if(0===set2.length)return emptyCollection(this);var c=new this.Collection(this,(function(){return createRange(set2[0],set2[set2.length-1])}));c._ondirectionchange=function(direction){compare="next"===direction?_this._ascending:_this._descending,set2.sort(compare)};var i=0;return c._addAlgorithm((function(cursor,advance,resolve){for(var key=cursor.key;compare(key,set2[i])>0;)if(++i===set2.length)return advance(resolve),!1;return 0===compare(key,set2[i])||(advance((function(){cursor.continue(set2[i])})),!1)})),c},WhereClause2.prototype.notEqual=function(value){return this.inAnyRange([[-(1/0),value],[value,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},WhereClause2.prototype.noneOf=function(){var set2=getArrayOf.apply(NO_CHAR_ARRAY,arguments);if(0===set2.length)return new this.Collection(this);try{set2.sort(this._ascending)}catch(e){return fail(this,INVALID_KEY_ARGUMENT)}var ranges=set2.reduce((function(res,val){return res?res.concat([[res[res.length-1][1],val]]):[[-(1/0),val]]}),null);return ranges.push([set2[set2.length-1],this.db._maxKey]),this.inAnyRange(ranges,{includeLowers:!1,includeUppers:!1})},WhereClause2.prototype.inAnyRange=function(ranges,options){var _this=this,cmp2=this._cmp,ascending=this._ascending,descending=this._descending,min=this._min,max=this._max;if(0===ranges.length)return emptyCollection(this);if(!ranges.every((function(range){return void 0!==range[0]&&void 0!==range[1]&&ascending(range[0],range[1])<=0})))return fail(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",exceptions.InvalidArgument);var includeLowers=!options||!1!==options.includeLowers,includeUppers=options&&!0===options.includeUppers;var set2,sortDirection=ascending;function rangeSorter(a,b){return sortDirection(a[0],b[0])}try{(set2=ranges.reduce((function addRange2(ranges2,newRange){for(var i=0,l=ranges2.length;i<l;++i){var range=ranges2[i];if(cmp2(newRange[0],range[1])<0&&cmp2(newRange[1],range[0])>0){range[0]=min(range[0],newRange[0]),range[1]=max(range[1],newRange[1]);break}}return i===l&&ranges2.push(newRange),ranges2}),[])).sort(rangeSorter)}catch(ex){return fail(this,INVALID_KEY_ARGUMENT)}var rangePos=0,keyIsBeyondCurrentEntry=includeUppers?function(key){return ascending(key,set2[rangePos][1])>0}:function(key){return ascending(key,set2[rangePos][1])>=0},keyIsBeforeCurrentEntry=includeLowers?function(key){return descending(key,set2[rangePos][0])>0}:function(key){return descending(key,set2[rangePos][0])>=0};var checkKey=keyIsBeyondCurrentEntry,c=new this.Collection(this,(function(){return createRange(set2[0][0],set2[set2.length-1][1],!includeLowers,!includeUppers)}));return c._ondirectionchange=function(direction){"next"===direction?(checkKey=keyIsBeyondCurrentEntry,sortDirection=ascending):(checkKey=keyIsBeforeCurrentEntry,sortDirection=descending),set2.sort(rangeSorter)},c._addAlgorithm((function(cursor,advance,resolve){for(var key=cursor.key;checkKey(key);)if(++rangePos===set2.length)return advance(resolve),!1;return!!function keyWithinCurrentRange(key){return!keyIsBeyondCurrentEntry(key)&&!keyIsBeforeCurrentEntry(key)}(key)||(0===_this._cmp(key,set2[rangePos][1])||0===_this._cmp(key,set2[rangePos][0])||advance((function(){sortDirection===ascending?cursor.continue(set2[rangePos][0]):cursor.continue(set2[rangePos][1])})),!1)})),c},WhereClause2.prototype.startsWithAnyOf=function(){var set2=getArrayOf.apply(NO_CHAR_ARRAY,arguments);return set2.every((function(s){return"string"==typeof s}))?0===set2.length?emptyCollection(this):this.inAnyRange(set2.map((function(str){return[str,str+maxString]}))):fail(this,"startsWithAnyOf() only works with strings")},WhereClause2}();function eventRejectHandler(reject){return wrap((function(event){return preventDefault(event),reject(event.target.error),!1}))}function preventDefault(event){event.stopPropagation&&event.stopPropagation(),event.preventDefault&&event.preventDefault()}var globalEvents=Events(null,"storagemutated"),Transaction=function(){function Transaction2(){}return Transaction2.prototype._lock=function(){return assert(!PSD.global),++this._reculock,1!==this._reculock||PSD.global||(PSD.lockOwnerFor=this),this},Transaction2.prototype._unlock=function(){if(assert(!PSD.global),0==--this._reculock)for(PSD.global||(PSD.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var fnAndPSD=this._blockedFuncs.shift();try{usePSD(fnAndPSD[1],fnAndPSD[0])}catch(e){}}return this},Transaction2.prototype._locked=function(){return this._reculock&&PSD.lockOwnerFor!==this},Transaction2.prototype.create=function(idbtrans){var _this=this;if(!this.mode)return this;var idbdb=this.db.idbdb,dbOpenError=this.db._state.dbOpenError;if(assert(!this.idbtrans),!idbtrans&&!idbdb)switch(dbOpenError&&dbOpenError.name){case"DatabaseClosedError":throw new exceptions.DatabaseClosed(dbOpenError);case"MissingAPIError":throw new exceptions.MissingAPI(dbOpenError.message,dbOpenError);default:throw new exceptions.OpenFailed(dbOpenError)}if(!this.active)throw new exceptions.TransactionInactive;return assert(null===this._completion._state),(idbtrans=this.idbtrans=idbtrans||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):idbdb.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=wrap((function(ev){preventDefault(ev),_this._reject(idbtrans.error)})),idbtrans.onabort=wrap((function(ev){preventDefault(ev),_this.active&&_this._reject(new exceptions.Abort(idbtrans.error)),_this.active=!1,_this.on("abort").fire(ev)})),idbtrans.oncomplete=wrap((function(){_this.active=!1,_this._resolve(),"mutatedParts"in idbtrans&&globalEvents.storagemutated.fire(idbtrans.mutatedParts)})),this},Transaction2.prototype._promise=function(mode,fn,bWriteLock){var _this=this;if("readwrite"===mode&&"readwrite"!==this.mode)return rejection(new exceptions.ReadOnly("Transaction is readonly"));if(!this.active)return rejection(new exceptions.TransactionInactive);if(this._locked())return new DexiePromise((function(resolve,reject){_this._blockedFuncs.push([function(){_this._promise(mode,fn,bWriteLock).then(resolve,reject)},PSD])}));if(bWriteLock)return newScope((function(){var p3=new DexiePromise((function(resolve,reject){_this._lock();var rv=fn(resolve,reject,_this);rv&&rv.then&&rv.then(resolve,reject)}));return p3.finally((function(){return _this._unlock()})),p3._lib=!0,p3}));var p2=new DexiePromise((function(resolve,reject){var rv=fn(resolve,reject,_this);rv&&rv.then&&rv.then(resolve,reject)}));return p2._lib=!0,p2},Transaction2.prototype._root=function(){return this.parent?this.parent._root():this},Transaction2.prototype.waitFor=function(promiseLike){var root=this._root(),promise=DexiePromise.resolve(promiseLike);if(root._waitingFor)root._waitingFor=root._waitingFor.then((function(){return promise}));else{root._waitingFor=promise,root._waitingQueue=[];var store=root.idbtrans.objectStore(root.storeNames[0]);!function spin(){for(++root._spinCount;root._waitingQueue.length;)root._waitingQueue.shift()();root._waitingFor&&(store.get(-1/0).onsuccess=spin)}()}var currentWaitPromise=root._waitingFor;return new DexiePromise((function(resolve,reject){promise.then((function(res){return root._waitingQueue.push(wrap(resolve.bind(null,res)))}),(function(err){return root._waitingQueue.push(wrap(reject.bind(null,err)))})).finally((function(){root._waitingFor===currentWaitPromise&&(root._waitingFor=null)}))}))},Transaction2.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new exceptions.Abort))},Transaction2.prototype.table=function(tableName){var memoizedTables=this._memoizedTables||(this._memoizedTables={});if(hasOwn(memoizedTables,tableName))return memoizedTables[tableName];var tableSchema=this.schema[tableName];if(!tableSchema)throw new exceptions.NotFound("Table "+tableName+" not part of transaction");var transactionBoundTable=new this.db.Table(tableName,tableSchema,this);return transactionBoundTable.core=this.db.core.table(tableName),memoizedTables[tableName]=transactionBoundTable,transactionBoundTable},Transaction2}();function createIndexSpec(name,keyPath,unique,multi,auto,compound,isPrimKey){return{name:name,keyPath:keyPath,unique:unique,multi:multi,auto:auto,compound:compound,src:(unique&&!isPrimKey?"&":"")+(multi?"*":"")+(auto?"++":"")+nameFromKeyPath(keyPath)}}function nameFromKeyPath(keyPath){return"string"==typeof keyPath?keyPath:keyPath?"["+[].join.call(keyPath,"+")+"]":""}function createTableSchema(name,primKey,indexes){return{name:name,primKey:primKey,indexes:indexes,mappedClass:null,idxByName:arrayToObject(indexes,(function(index){return[index.name,index]}))}}var getMaxKey=function(IdbKeyRange){try{return IdbKeyRange.only([[]]),getMaxKey=function(){return[[]]},[[]]}catch(e){return getMaxKey=function(){return maxString},maxString}};function getKeyExtractor(keyPath){return null==keyPath?function(){}:"string"==typeof keyPath?function getSinglePathKeyExtractor(keyPath){var split=keyPath.split(".");return 1===split.length?function(obj){return obj[keyPath]}:function(obj){return getByKeyPath(obj,keyPath)}}(keyPath):function(obj){return getByKeyPath(obj,keyPath)}}function arrayify(arrayLike){return[].slice.call(arrayLike)}var _id_counter=0;function getKeyPathAlias(keyPath){return null==keyPath?":id":"string"==typeof keyPath?keyPath:"["+keyPath.join("+")+"]"}function createDBCore(db2,IdbKeyRange,tmpTrans){function makeIDBKeyRange(range){if(3===range.type)return null;if(4===range.type)throw new Error("Cannot convert never type to IDBKeyRange");var lower=range.lower,upper=range.upper,lowerOpen=range.lowerOpen,upperOpen=range.upperOpen;return void 0===lower?void 0===upper?null:IdbKeyRange.upperBound(upper,!!upperOpen):void 0===upper?IdbKeyRange.lowerBound(lower,!!lowerOpen):IdbKeyRange.bound(lower,upper,!!lowerOpen,!!upperOpen)}var _a3=function extractSchema(db3,trans){var tables2=arrayify(db3.objectStoreNames);return{schema:{name:db3.name,tables:tables2.map((function(table){return trans.objectStore(table)})).map((function(store){var keyPath=store.keyPath,autoIncrement=store.autoIncrement,compound=isArray(keyPath),outbound=null==keyPath,indexByKeyPath={},result={name:store.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:outbound,compound:compound,keyPath:keyPath,autoIncrement:autoIncrement,unique:!0,extractKey:getKeyExtractor(keyPath)},indexes:arrayify(store.indexNames).map((function(indexName){return store.index(indexName)})).map((function(index){var name=index.name,unique=index.unique,multiEntry=index.multiEntry,keyPath2=index.keyPath,result2={name:name,compound:isArray(keyPath2),keyPath:keyPath2,unique:unique,multiEntry:multiEntry,extractKey:getKeyExtractor(keyPath2)};return indexByKeyPath[getKeyPathAlias(keyPath2)]=result2,result2})),getIndexByKeyPath:function(keyPath2){return indexByKeyPath[getKeyPathAlias(keyPath2)]}};return indexByKeyPath[":id"]=result.primaryKey,null!=keyPath&&(indexByKeyPath[getKeyPathAlias(keyPath)]=result.primaryKey),result}))},hasGetAll:tables2.length>0&&"getAll"in trans.objectStore(tables2[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(db2,tmpTrans),schema=_a3.schema,hasGetAll=_a3.hasGetAll,tables=schema.tables.map((function(tableSchema){return function createDbCoreTable(tableSchema){var tableName=tableSchema.name;return{name:tableName,schema:tableSchema,mutate:function mutate(_a4){var trans=_a4.trans,type2=_a4.type,keys2=_a4.keys,values=_a4.values,range=_a4.range;return new Promise((function(resolve,reject){resolve=wrap(resolve);var store=trans.objectStore(tableName),outbound=null==store.keyPath,isAddOrPut="put"===type2||"add"===type2;if(!isAddOrPut&&"delete"!==type2&&"deleteRange"!==type2)throw new Error("Invalid operation type: "+type2);var req,length=(keys2||values||{length:1}).length;if(keys2&&values&&keys2.length!==values.length)throw new Error("Given keys array must have same length as given values array.");if(0===length)return resolve({numFailures:0,failures:{},results:[],lastResult:void 0});var reqs=[],failures=[],numFailures=0,errorHandler=function(event){++numFailures,preventDefault(event)};if("deleteRange"===type2){if(4===range.type)return resolve({numFailures:numFailures,failures:failures,results:[],lastResult:void 0});3===range.type?reqs.push(req=store.clear()):reqs.push(req=store.delete(makeIDBKeyRange(range)))}else{var _a5=isAddOrPut?outbound?[values,keys2]:[values,null]:[keys2,null],args1=_a5[0],args2=_a5[1];if(isAddOrPut)for(var i=0;i<length;++i)reqs.push(req=args2&&void 0!==args2[i]?store[type2](args1[i],args2[i]):store[type2](args1[i])),req.onerror=errorHandler;else for(i=0;i<length;++i)reqs.push(req=store[type2](args1[i])),req.onerror=errorHandler}var done=function(event){var lastResult=event.target.result;reqs.forEach((function(req2,i2){return null!=req2.error&&(failures[i2]=req2.error)})),resolve({numFailures:numFailures,failures:failures,results:"delete"===type2?keys2:reqs.map((function(req2){return req2.result})),lastResult:lastResult})};req.onerror=function(event){errorHandler(event),done(event)},req.onsuccess=done}))},getMany:function(_a4){var trans=_a4.trans,keys2=_a4.keys;return new Promise((function(resolve,reject){resolve=wrap(resolve);for(var req,store=trans.objectStore(tableName),length=keys2.length,result=new Array(length),keyCount=0,callbackCount=0,successHandler=function(event){var req2=event.target;result[req2._pos]=req2.result,++callbackCount===keyCount&&resolve(result)},errorHandler=eventRejectHandler(reject),i=0;i<length;++i)null!=keys2[i]&&((req=store.get(keys2[i]))._pos=i,req.onsuccess=successHandler,req.onerror=errorHandler,++keyCount);0===keyCount&&resolve(result)}))},get:function(_a4){var trans=_a4.trans,key=_a4.key;return new Promise((function(resolve,reject){resolve=wrap(resolve);var req=trans.objectStore(tableName).get(key);req.onsuccess=function(event){return resolve(event.target.result)},req.onerror=eventRejectHandler(reject)}))},query:function query(hasGetAll2){return function(request){return new Promise((function(resolve,reject){resolve=wrap(resolve);var trans=request.trans,values=request.values,limit=request.limit,query2=request.query,nonInfinitLimit=limit===1/0?void 0:limit,index=query2.index,range=query2.range,store=trans.objectStore(tableName),source=index.isPrimaryKey?store:store.index(index.name),idbKeyRange=makeIDBKeyRange(range);if(0===limit)return resolve({result:[]});if(hasGetAll2){var req=values?source.getAll(idbKeyRange,nonInfinitLimit):source.getAllKeys(idbKeyRange,nonInfinitLimit);req.onsuccess=function(event){return resolve({result:event.target.result})},req.onerror=eventRejectHandler(reject)}else{var count_1=0,req_1=values||!("openKeyCursor"in source)?source.openCursor(idbKeyRange):source.openKeyCursor(idbKeyRange),result_1=[];req_1.onsuccess=function(event){var cursor=req_1.result;return cursor?(result_1.push(values?cursor.value:cursor.primaryKey),++count_1===limit?resolve({result:result_1}):void cursor.continue()):resolve({result:result_1})},req_1.onerror=eventRejectHandler(reject)}}))}}(hasGetAll),openCursor:function openCursor2(_a4){var trans=_a4.trans,values=_a4.values,query2=_a4.query,reverse=_a4.reverse,unique=_a4.unique;return new Promise((function(resolve,reject){resolve=wrap(resolve);var index=query2.index,range=query2.range,store=trans.objectStore(tableName),source=index.isPrimaryKey?store:store.index(index.name),direction=reverse?unique?"prevunique":"prev":unique?"nextunique":"next",req=values||!("openKeyCursor"in source)?source.openCursor(makeIDBKeyRange(range),direction):source.openKeyCursor(makeIDBKeyRange(range),direction);req.onerror=eventRejectHandler(reject),req.onsuccess=wrap((function(ev){var cursor=req.result;if(cursor){cursor.___id=++_id_counter,cursor.done=!1;var _cursorContinue=cursor.continue.bind(cursor),_cursorContinuePrimaryKey=cursor.continuePrimaryKey;_cursorContinuePrimaryKey&&(_cursorContinuePrimaryKey=_cursorContinuePrimaryKey.bind(cursor));var _cursorAdvance=cursor.advance.bind(cursor),doThrowCursorIsStopped=function(){throw new Error("Cursor not stopped")};cursor.trans=trans,cursor.stop=cursor.continue=cursor.continuePrimaryKey=cursor.advance=function(){throw new Error("Cursor not started")},cursor.fail=wrap(reject),cursor.next=function(){var _this=this,gotOne=1;return this.start((function(){return gotOne--?_this.continue():_this.stop()})).then((function(){return _this}))},cursor.start=function(callback){var iterationPromise=new Promise((function(resolveIteration,rejectIteration){resolveIteration=wrap(resolveIteration),req.onerror=eventRejectHandler(rejectIteration),cursor.fail=rejectIteration,cursor.stop=function(value){cursor.stop=cursor.continue=cursor.continuePrimaryKey=cursor.advance=doThrowCursorIsStopped,resolveIteration(value)}})),guardedCallback=function(){if(req.result)try{callback()}catch(err){cursor.fail(err)}else cursor.done=!0,cursor.start=function(){throw new Error("Cursor behind last entry")},cursor.stop()};return req.onsuccess=wrap((function(ev2){req.onsuccess=guardedCallback,guardedCallback()})),cursor.continue=_cursorContinue,cursor.continuePrimaryKey=_cursorContinuePrimaryKey,cursor.advance=_cursorAdvance,guardedCallback(),iterationPromise},resolve(cursor)}else resolve(null)}),reject)}))},count:function(_a4){var query2=_a4.query,trans=_a4.trans,index=query2.index,range=query2.range;return new Promise((function(resolve,reject){var store=trans.objectStore(tableName),source=index.isPrimaryKey?store:store.index(index.name),idbKeyRange=makeIDBKeyRange(range),req=idbKeyRange?source.count(idbKeyRange):source.count();req.onsuccess=wrap((function(ev){return resolve(ev.target.result)})),req.onerror=eventRejectHandler(reject)}))}}}(tableSchema)})),tableMap={};return tables.forEach((function(table){return tableMap[table.name]=table})),{stack:"dbcore",transaction:db2.transaction.bind(db2),table:function(name){if(!tableMap[name])throw new Error("Table '"+name+"' not found");return tableMap[name]},MIN_KEY:-1/0,MAX_KEY:getMaxKey(IdbKeyRange),schema:schema}}function createMiddlewareStacks(middlewares,idbdb,_a3,tmpTrans){var IDBKeyRange=_a3.IDBKeyRange;_a3.indexedDB;var dbcore=function createMiddlewareStack(stackImpl,middlewares){return middlewares.reduce((function(down,_a3){var create=_a3.create;return __assign(__assign({},down),create(down))}),stackImpl)}(createDBCore(idbdb,IDBKeyRange,tmpTrans),middlewares.dbcore);return{dbcore:dbcore}}function generateMiddlewareStacks(_a3,tmpTrans){var db2=_a3._novip,idbdb=tmpTrans.db,stacks=createMiddlewareStacks(db2._middlewares,idbdb,db2._deps,tmpTrans);db2.core=stacks.dbcore,db2.tables.forEach((function(table){var tableName=table.name;db2.core.schema.tables.some((function(tbl){return tbl.name===tableName}))&&(table.core=db2.core.table(tableName),db2[tableName]instanceof db2.Table&&(db2[tableName].core=table.core))}))}function setApiOnPlace(_a3,objs,tableNames,dbschema){var db2=_a3._novip;tableNames.forEach((function(tableName){var schema=dbschema[tableName];objs.forEach((function(obj){var propDesc=getPropertyDescriptor(obj,tableName);(!propDesc||"value"in propDesc&&void 0===propDesc.value)&&(obj===db2.Transaction.prototype||obj instanceof db2.Transaction?setProp(obj,tableName,{get:function(){return this.table(tableName)},set:function(value){defineProperty(this,tableName,{value:value,writable:!0,configurable:!0,enumerable:!0})}}):obj[tableName]=new db2.Table(tableName,schema))}))}))}function removeTablesApi(_a3,objs){var db2=_a3._novip;objs.forEach((function(obj){for(var key in obj)obj[key]instanceof db2.Table&&delete obj[key]}))}function lowerVersionFirst(a,b){return a._cfg.version-b._cfg.version}function runUpgraders(db2,oldVersion,idbUpgradeTrans,reject){var globalSchema=db2._dbSchema,trans=db2._createTransaction("readwrite",db2._storeNames,globalSchema);trans.create(idbUpgradeTrans),trans._completion.catch(reject);var rejectTransaction=trans._reject.bind(trans),transless=PSD.transless||PSD;newScope((function(){PSD.trans=trans,PSD.transless=transless,0===oldVersion?(keys(globalSchema).forEach((function(tableName){createTable(idbUpgradeTrans,tableName,globalSchema[tableName].primKey,globalSchema[tableName].indexes)})),generateMiddlewareStacks(db2,idbUpgradeTrans),DexiePromise.follow((function(){return db2.on.populate.fire(trans)})).catch(rejectTransaction)):function updateTablesAndIndexes(_a3,oldVersion,trans,idbUpgradeTrans){var db2=_a3._novip,queue2=[],versions=db2._versions,globalSchema=db2._dbSchema=buildGlobalSchema(db2,db2.idbdb,idbUpgradeTrans),anyContentUpgraderHasRun=!1,versToRun=versions.filter((function(v){return v._cfg.version>=oldVersion}));function runQueue(){return queue2.length?DexiePromise.resolve(queue2.shift()(trans.idbtrans)).then(runQueue):DexiePromise.resolve()}return versToRun.forEach((function(version2){queue2.push((function(){var oldSchema=globalSchema,newSchema=version2._cfg.dbschema;adjustToExistingIndexNames(db2,oldSchema,idbUpgradeTrans),adjustToExistingIndexNames(db2,newSchema,idbUpgradeTrans),globalSchema=db2._dbSchema=newSchema;var diff=getSchemaDiff(oldSchema,newSchema);diff.add.forEach((function(tuple){createTable(idbUpgradeTrans,tuple[0],tuple[1].primKey,tuple[1].indexes)})),diff.change.forEach((function(change){if(change.recreate)throw new exceptions.Upgrade("Not yet support for changing primary key");var store_1=idbUpgradeTrans.objectStore(change.name);change.add.forEach((function(idx){return addIndex(store_1,idx)})),change.change.forEach((function(idx){store_1.deleteIndex(idx.name),addIndex(store_1,idx)})),change.del.forEach((function(idxName){return store_1.deleteIndex(idxName)}))}));var contentUpgrade=version2._cfg.contentUpgrade;if(contentUpgrade&&version2._cfg.version>oldVersion){generateMiddlewareStacks(db2,idbUpgradeTrans),trans._memoizedTables={},anyContentUpgraderHasRun=!0;var upgradeSchema_1=shallowClone(newSchema);diff.del.forEach((function(table){upgradeSchema_1[table]=oldSchema[table]})),removeTablesApi(db2,[db2.Transaction.prototype]),setApiOnPlace(db2,[db2.Transaction.prototype],keys(upgradeSchema_1),upgradeSchema_1),trans.schema=upgradeSchema_1;var returnValue_1,contentUpgradeIsAsync_1=isAsyncFunction(contentUpgrade);contentUpgradeIsAsync_1&&incrementExpectedAwaits();var promiseFollowed=DexiePromise.follow((function(){if((returnValue_1=contentUpgrade(trans))&&contentUpgradeIsAsync_1){var decrementor=decrementExpectedAwaits.bind(null,null);returnValue_1.then(decrementor,decrementor)}}));return returnValue_1&&"function"==typeof returnValue_1.then?DexiePromise.resolve(returnValue_1):promiseFollowed.then((function(){return returnValue_1}))}})),queue2.push((function(idbtrans){anyContentUpgraderHasRun&&hasIEDeleteObjectStoreBug||function deleteRemovedTables(newSchema,idbtrans){[].slice.call(idbtrans.db.objectStoreNames).forEach((function(storeName){return null==newSchema[storeName]&&idbtrans.db.deleteObjectStore(storeName)}))}(version2._cfg.dbschema,idbtrans);removeTablesApi(db2,[db2.Transaction.prototype]),setApiOnPlace(db2,[db2.Transaction.prototype],db2._storeNames,db2._dbSchema),trans.schema=db2._dbSchema}))})),runQueue().then((function(){!function createMissingTables(newSchema,idbtrans){keys(newSchema).forEach((function(tableName){idbtrans.db.objectStoreNames.contains(tableName)||createTable(idbtrans,tableName,newSchema[tableName].primKey,newSchema[tableName].indexes)}))}(globalSchema,idbUpgradeTrans)}))}(db2,oldVersion,trans,idbUpgradeTrans).catch(rejectTransaction)}))}function getSchemaDiff(oldSchema,newSchema){var table,diff={del:[],add:[],change:[]};for(table in oldSchema)newSchema[table]||diff.del.push(table);for(table in newSchema){var oldDef=oldSchema[table],newDef=newSchema[table];if(oldDef){var change={name:table,def:newDef,recreate:!1,del:[],add:[],change:[]};if(""+(oldDef.primKey.keyPath||"")!=""+(newDef.primKey.keyPath||"")||oldDef.primKey.auto!==newDef.primKey.auto&&!isIEOrEdge)change.recreate=!0,diff.change.push(change);else{var oldIndexes=oldDef.idxByName,newIndexes=newDef.idxByName,idxName=void 0;for(idxName in oldIndexes)newIndexes[idxName]||change.del.push(idxName);for(idxName in newIndexes){var oldIdx=oldIndexes[idxName],newIdx=newIndexes[idxName];oldIdx?oldIdx.src!==newIdx.src&&change.change.push(newIdx):change.add.push(newIdx)}(change.del.length>0||change.add.length>0||change.change.length>0)&&diff.change.push(change)}}else diff.add.push([table,newDef])}return diff}function createTable(idbtrans,tableName,primKey,indexes){var store=idbtrans.db.createObjectStore(tableName,primKey.keyPath?{keyPath:primKey.keyPath,autoIncrement:primKey.auto}:{autoIncrement:primKey.auto});return indexes.forEach((function(idx){return addIndex(store,idx)})),store}function addIndex(store,idx){store.createIndex(idx.name,idx.keyPath,{unique:idx.unique,multiEntry:idx.multi})}function buildGlobalSchema(db2,idbdb,tmpTrans){var globalSchema={};return slice(idbdb.objectStoreNames,0).forEach((function(storeName){for(var store=tmpTrans.objectStore(storeName),keyPath=store.keyPath,primKey=createIndexSpec(nameFromKeyPath(keyPath),keyPath||"",!1,!1,!!store.autoIncrement,keyPath&&"string"!=typeof keyPath,!0),indexes=[],j=0;j<store.indexNames.length;++j){var idbindex=store.index(store.indexNames[j]);keyPath=idbindex.keyPath;var index=createIndexSpec(idbindex.name,keyPath,!!idbindex.unique,!!idbindex.multiEntry,!1,keyPath&&"string"!=typeof keyPath,!1);indexes.push(index)}globalSchema[storeName]=createTableSchema(storeName,primKey,indexes)})),globalSchema}function adjustToExistingIndexNames(_a3,schema,idbtrans){for(var db2=_a3._novip,storeNames=idbtrans.db.objectStoreNames,i=0;i<storeNames.length;++i){var storeName=storeNames[i],store=idbtrans.objectStore(storeName);db2._hasGetAll="getAll"in store;for(var j=0;j<store.indexNames.length;++j){var indexName=store.indexNames[j],keyPath=store.index(indexName).keyPath,dexieName="string"==typeof keyPath?keyPath:"["+slice(keyPath).join("+")+"]";if(schema[storeName]){var indexSpec=schema[storeName].idxByName[dexieName];indexSpec&&(indexSpec.name=indexName,delete schema[storeName].idxByName[dexieName],schema[storeName].idxByName[indexName]=indexSpec)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&_global.WorkerGlobalScope&&_global instanceof _global.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(db2._hasGetAll=!1)}var Version=function(){function Version2(){}return Version2.prototype._parseStoresSpec=function(stores,outSchema){keys(stores).forEach((function(tableName){if(null!==stores[tableName]){var indexes=function parseIndexSyntax(primKeyAndIndexes){return primKeyAndIndexes.split(",").map((function(index,indexNum){var name=(index=index.trim()).replace(/([&*]|\+\+)/g,""),keyPath=/^\[/.test(name)?name.match(/^\[(.*)\]$/)[1].split("+"):name;return createIndexSpec(name,keyPath||null,/\&/.test(index),/\*/.test(index),/\+\+/.test(index),isArray(keyPath),0===indexNum)}))}(stores[tableName]),primKey=indexes.shift();if(primKey.multi)throw new exceptions.Schema("Primary key cannot be multi-valued");indexes.forEach((function(idx){if(idx.auto)throw new exceptions.Schema("Only primary key can be marked as autoIncrement (++)");if(!idx.keyPath)throw new exceptions.Schema("Index must have a name and cannot be an empty string")})),outSchema[tableName]=createTableSchema(tableName,primKey,indexes)}}))},Version2.prototype.stores=function(stores){var db2=this.db;this._cfg.storesSource=this._cfg.storesSource?extend(this._cfg.storesSource,stores):stores;var versions=db2._versions,storesSpec={},dbschema={};return versions.forEach((function(version2){extend(storesSpec,version2._cfg.storesSource),dbschema=version2._cfg.dbschema={},version2._parseStoresSpec(storesSpec,dbschema)})),db2._dbSchema=dbschema,removeTablesApi(db2,[db2._allTables,db2,db2.Transaction.prototype]),setApiOnPlace(db2,[db2._allTables,db2,db2.Transaction.prototype,this._cfg.tables],keys(dbschema),dbschema),db2._storeNames=keys(dbschema),this},Version2.prototype.upgrade=function(upgradeFunction){return this._cfg.contentUpgrade=promisableChain(this._cfg.contentUpgrade||nop,upgradeFunction),this},Version2}();function getDbNamesTable(indexedDB2,IDBKeyRange){var dbNamesDB=indexedDB2._dbNamesDB;return dbNamesDB||(dbNamesDB=indexedDB2._dbNamesDB=new Dexie$1("__dbnames",{addons:[],indexedDB:indexedDB2,IDBKeyRange:IDBKeyRange})).version(1).stores({dbnames:"name"}),dbNamesDB.table("dbnames")}function hasDatabasesNative(indexedDB2){return indexedDB2&&"function"==typeof indexedDB2.databases}function _onDatabaseDeleted(_a3,name){var indexedDB2=_a3.indexedDB,IDBKeyRange=_a3.IDBKeyRange;!hasDatabasesNative(indexedDB2)&&"__dbnames"!==name&&getDbNamesTable(indexedDB2,IDBKeyRange).delete(name).catch(nop)}function vip(fn){return newScope((function(){return PSD.letThrough=!0,fn()}))}function dexieOpen(db2){var state=db2._state,indexedDB2=db2._deps.indexedDB;if(state.isBeingOpened||db2.idbdb)return state.dbReadyPromise.then((function(){return state.dbOpenError?rejection(state.dbOpenError):db2}));debug&&(state.openCanceller._stackHolder=getErrorWithStack()),state.isBeingOpened=!0,state.dbOpenError=null,state.openComplete=!1;var openCanceller=state.openCanceller;function throwIfCancelled(){if(state.openCanceller!==openCanceller)throw new exceptions.DatabaseClosed("db.open() was cancelled")}var intervalId,resolveDbReady=state.dbReadyResolve,upgradeTransaction=null,wasCreated=!1;return DexiePromise.race([openCanceller,("undefined"==typeof navigator?DexiePromise.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise((function(resolve){var tryIdb=function(){return indexedDB.databases().finally(resolve)};intervalId=setInterval(tryIdb,100),tryIdb()})).finally((function(){return clearInterval(intervalId)})):Promise.resolve()).then((function(){return new DexiePromise((function(resolve,reject){if(throwIfCancelled(),!indexedDB2)throw new exceptions.MissingAPI;var dbName=db2.name,req=state.autoSchema?indexedDB2.open(dbName):indexedDB2.open(dbName,Math.round(10*db2.verno));if(!req)throw new exceptions.MissingAPI;req.onerror=eventRejectHandler(reject),req.onblocked=wrap(db2._fireOnBlocked),req.onupgradeneeded=wrap((function(e){if(upgradeTransaction=req.transaction,state.autoSchema&&!db2._options.allowEmptyDB){req.onerror=preventDefault,upgradeTransaction.abort(),req.result.close();var delreq=indexedDB2.deleteDatabase(dbName);delreq.onsuccess=delreq.onerror=wrap((function(){reject(new exceptions.NoSuchDatabase("Database "+dbName+" doesnt exist"))}))}else{upgradeTransaction.onerror=eventRejectHandler(reject);var oldVer=e.oldVersion>Math.pow(2,62)?0:e.oldVersion;wasCreated=oldVer<1,db2._novip.idbdb=req.result,runUpgraders(db2,oldVer/10,upgradeTransaction,reject)}}),reject),req.onsuccess=wrap((function(){upgradeTransaction=null;var idbdb=db2._novip.idbdb=req.result,objectStoreNames=slice(idbdb.objectStoreNames);if(objectStoreNames.length>0)try{var tmpTrans=idbdb.transaction(function safariMultiStoreFix(storeNames){return 1===storeNames.length?storeNames[0]:storeNames}(objectStoreNames),"readonly");state.autoSchema?function readGlobalSchema(_a3,idbdb,tmpTrans){var db2=_a3._novip;db2.verno=idbdb.version/10;var globalSchema=db2._dbSchema=buildGlobalSchema(0,idbdb,tmpTrans);db2._storeNames=slice(idbdb.objectStoreNames,0),setApiOnPlace(db2,[db2._allTables],keys(globalSchema),globalSchema)}(db2,idbdb,tmpTrans):(adjustToExistingIndexNames(db2,db2._dbSchema,tmpTrans),function verifyInstalledSchema(db2,tmpTrans){var diff=getSchemaDiff(buildGlobalSchema(0,db2.idbdb,tmpTrans),db2._dbSchema);return!(diff.add.length||diff.change.some((function(ch){return ch.add.length||ch.change.length})))}(db2,tmpTrans)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),generateMiddlewareStacks(db2,tmpTrans)}catch(e){}connections.push(db2),idbdb.onversionchange=wrap((function(ev){state.vcFired=!0,db2.on("versionchange").fire(ev)})),idbdb.onclose=wrap((function(ev){db2.on("close").fire(ev)})),wasCreated&&function _onDatabaseCreated(_a3,name){var indexedDB2=_a3.indexedDB,IDBKeyRange=_a3.IDBKeyRange;!hasDatabasesNative(indexedDB2)&&"__dbnames"!==name&&getDbNamesTable(indexedDB2,IDBKeyRange).put({name:name}).catch(nop)}(db2._deps,dbName),resolve()}),reject)}))}))]).then((function(){return throwIfCancelled(),state.onReadyBeingFired=[],DexiePromise.resolve(vip((function(){return db2.on.ready.fire(db2.vip)}))).then((function fireRemainders(){if(state.onReadyBeingFired.length>0){var remainders_1=state.onReadyBeingFired.reduce(promisableChain,nop);return state.onReadyBeingFired=[],DexiePromise.resolve(vip((function(){return remainders_1(db2.vip)}))).then(fireRemainders)}}))})).finally((function(){state.onReadyBeingFired=null,state.isBeingOpened=!1})).then((function(){return db2})).catch((function(err){state.dbOpenError=err;try{upgradeTransaction&&upgradeTransaction.abort()}catch(_a3){}return openCanceller===state.openCanceller&&db2._close(),rejection(err)})).finally((function(){state.openComplete=!0,resolveDbReady()}))}function awaitIterator(iterator){var callNext=function(result){return iterator.next(result)},onSuccess=step(callNext),onError=step((function(error){return iterator.throw(error)}));function step(getNext){return function(val){var next=getNext(val),value=next.value;return next.done?value:value&&"function"==typeof value.then?value.then(onSuccess,onError):isArray(value)?Promise.all(value).then(onSuccess,onError):onSuccess(value)}}return step(callNext)()}function extractTransactionArgs(mode,_tableArgs_,scopeFunc){var i=arguments.length;if(i<2)throw new exceptions.InvalidArgument("Too few arguments");for(var args=new Array(i-1);--i;)args[i-1]=arguments[i];scopeFunc=args.pop();var tables=flatten(args);return[mode,tables,scopeFunc]}function enterTransactionScope(db2,mode,storeNames,parentTransaction,scopeFunc){return DexiePromise.resolve().then((function(){var transless=PSD.transless||PSD,trans=db2._createTransaction(mode,storeNames,db2._dbSchema,parentTransaction),zoneProps={trans:trans,transless:transless};if(parentTransaction)trans.idbtrans=parentTransaction.idbtrans;else try{trans.create(),db2._state.PR1398_maxLoop=3}catch(ex){return ex.name===errnames.InvalidState&&db2.isOpen()&&--db2._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),db2._close(),db2.open().then((function(){return enterTransactionScope(db2,mode,storeNames,null,scopeFunc)}))):rejection(ex)}var returnValue,scopeFuncIsAsync=isAsyncFunction(scopeFunc);scopeFuncIsAsync&&incrementExpectedAwaits();var promiseFollowed=DexiePromise.follow((function(){if(returnValue=scopeFunc.call(trans,trans))if(scopeFuncIsAsync){var decrementor=decrementExpectedAwaits.bind(null,null);returnValue.then(decrementor,decrementor)}else"function"==typeof returnValue.next&&"function"==typeof returnValue.throw&&(returnValue=awaitIterator(returnValue))}),zoneProps);return(returnValue&&"function"==typeof returnValue.then?DexiePromise.resolve(returnValue).then((function(x){return trans.active?x:rejection(new exceptions.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):promiseFollowed.then((function(){return returnValue}))).then((function(x){return parentTransaction&&trans._resolve(),trans._completion.then((function(){return x}))})).catch((function(e){return trans._reject(e),rejection(e)}))}))}function pad(a,value,count){for(var result=isArray(a)?a.slice():[a],i=0;i<count;++i)result.push(value);return result}var virtualIndexMiddleware={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function createVirtualIndexMiddleware(down){return __assign(__assign({},down),{table:function(tableName){var table=down.table(tableName),schema=table.schema,indexLookup={},allVirtualIndexes=[];function addVirtualIndexes(keyPath,keyTail,lowLevelIndex){var keyPathAlias=getKeyPathAlias(keyPath),indexList=indexLookup[keyPathAlias]=indexLookup[keyPathAlias]||[],keyLength=null==keyPath?0:"string"==typeof keyPath?1:keyPath.length,isVirtual=keyTail>0,virtualIndex=__assign(__assign({},lowLevelIndex),{isVirtual:isVirtual,keyTail:keyTail,keyLength:keyLength,extractKey:getKeyExtractor(keyPath),unique:!isVirtual&&lowLevelIndex.unique});(indexList.push(virtualIndex),virtualIndex.isPrimaryKey||allVirtualIndexes.push(virtualIndex),keyLength>1)&&addVirtualIndexes(2===keyLength?keyPath[0]:keyPath.slice(0,keyLength-1),keyTail+1,lowLevelIndex);return indexList.sort((function(a,b){return a.keyTail-b.keyTail})),virtualIndex}var primaryKey=addVirtualIndexes(schema.primaryKey.keyPath,0,schema.primaryKey);indexLookup[":id"]=[primaryKey];for(var _i=0,_a3=schema.indexes;_i<_a3.length;_i++){var index=_a3[_i];addVirtualIndexes(index.keyPath,0,index)}function translateRequest(req){var range,keyTail,index2=req.query.index;return index2.isVirtual?__assign(__assign({},req),{query:{index:index2,range:(range=req.query.range,keyTail=index2.keyTail,{type:1===range.type?2:range.type,lower:pad(range.lower,range.lowerOpen?down.MAX_KEY:down.MIN_KEY,keyTail),lowerOpen:!0,upper:pad(range.upper,range.upperOpen?down.MIN_KEY:down.MAX_KEY,keyTail),upperOpen:!0})}}):req}return __assign(__assign({},table),{schema:__assign(__assign({},schema),{primaryKey:primaryKey,indexes:allVirtualIndexes,getIndexByKeyPath:function findBestIndex(keyPath){var result2=indexLookup[getKeyPathAlias(keyPath)];return result2&&result2[0]}}),count:function(req){return table.count(translateRequest(req))},query:function(req){return table.query(translateRequest(req))},openCursor:function(req){var _a4=req.query.index,keyTail=_a4.keyTail,isVirtual=_a4.isVirtual,keyLength=_a4.keyLength;if(!isVirtual)return table.openCursor(req);return table.openCursor(translateRequest(req)).then((function(cursor){return cursor&&function createVirtualCursor(cursor){return Object.create(cursor,{continue:{value:function _continue(key){null!=key?cursor.continue(pad(key,req.reverse?down.MAX_KEY:down.MIN_KEY,keyTail)):req.unique?cursor.continue(cursor.key.slice(0,keyLength).concat(req.reverse?down.MIN_KEY:down.MAX_KEY,keyTail)):cursor.continue()}},continuePrimaryKey:{value:function(key,primaryKey2){cursor.continuePrimaryKey(pad(key,down.MAX_KEY,keyTail),primaryKey2)}},primaryKey:{get:function(){return cursor.primaryKey}},key:{get:function(){var key=cursor.key;return 1===keyLength?key[0]:key.slice(0,keyLength)}},value:{get:function(){return cursor.value}}})}(cursor)}))}})}})}};function getObjectDiff(a,b,rv,prfx){return rv=rv||{},prfx=prfx||"",keys(a).forEach((function(prop){if(hasOwn(b,prop)){var ap=a[prop],bp=b[prop];if("object"==typeof ap&&"object"==typeof bp&&ap&&bp){var apTypeName=toStringTag(ap);apTypeName!==toStringTag(bp)?rv[prfx+prop]=b[prop]:"Object"===apTypeName?getObjectDiff(ap,bp,rv,prfx+prop+"."):ap!==bp&&(rv[prfx+prop]=b[prop])}else ap!==bp&&(rv[prfx+prop]=b[prop])}else rv[prfx+prop]=void 0})),keys(b).forEach((function(prop){hasOwn(a,prop)||(rv[prfx+prop]=b[prop])})),rv}var hooksMiddleware={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(downCore){return __assign(__assign({},downCore),{table:function(tableName){var downTable=downCore.table(tableName),primaryKey=downTable.schema.primaryKey;return __assign(__assign({},downTable),{mutate:function(req){var dxTrans=PSD.trans,_a3=dxTrans.table(tableName).hook,deleting=_a3.deleting,creating=_a3.creating,updating=_a3.updating;switch(req.type){case"add":if(creating.fire===nop)break;return dxTrans._promise("readwrite",(function(){return addPutOrDelete(req)}),!0);case"put":if(creating.fire===nop&&updating.fire===nop)break;return dxTrans._promise("readwrite",(function(){return addPutOrDelete(req)}),!0);case"delete":if(deleting.fire===nop)break;return dxTrans._promise("readwrite",(function(){return addPutOrDelete(req)}),!0);case"deleteRange":if(deleting.fire===nop)break;return dxTrans._promise("readwrite",(function(){return function deleteRange(req2){return deleteNextChunk(req2.trans,req2.range,1e4)}(req)}),!0)}return downTable.mutate(req);function addPutOrDelete(req2){var dxTrans2=PSD.trans,keys2=req2.keys||function getEffectiveKeys(primaryKey,req){return"delete"===req.type?req.keys:req.keys||req.values.map(primaryKey.extractKey)}(primaryKey,req2);if(!keys2)throw new Error("Keys missing");return"delete"!==(req2="add"===req2.type||"put"===req2.type?__assign(__assign({},req2),{keys:keys2}):__assign({},req2)).type&&(req2.values=__spreadArray([],req2.values,!0)),req2.keys&&(req2.keys=__spreadArray([],req2.keys,!0)),function getExistingValues(table,req,effectiveKeys){return"add"===req.type?Promise.resolve([]):table.getMany({trans:req.trans,keys:effectiveKeys,cache:"immutable"})}(downTable,req2,keys2).then((function(existingValues){var contexts=keys2.map((function(key,i){var existingValue=existingValues[i],ctx={onerror:null,onsuccess:null};if("delete"===req2.type)deleting.fire.call(ctx,key,existingValue,dxTrans2);else if("add"===req2.type||void 0===existingValue){var generatedPrimaryKey=creating.fire.call(ctx,key,req2.values[i],dxTrans2);null==key&&null!=generatedPrimaryKey&&(key=generatedPrimaryKey,req2.keys[i]=key,primaryKey.outbound||setByKeyPath(req2.values[i],primaryKey.keyPath,key))}else{var objectDiff=getObjectDiff(existingValue,req2.values[i]),additionalChanges_1=updating.fire.call(ctx,objectDiff,key,existingValue,dxTrans2);if(additionalChanges_1){var requestedValue_1=req2.values[i];Object.keys(additionalChanges_1).forEach((function(keyPath){hasOwn(requestedValue_1,keyPath)?requestedValue_1[keyPath]=additionalChanges_1[keyPath]:setByKeyPath(requestedValue_1,keyPath,additionalChanges_1[keyPath])}))}}return ctx}));return downTable.mutate(req2).then((function(_a4){for(var failures=_a4.failures,results=_a4.results,numFailures=_a4.numFailures,lastResult=_a4.lastResult,i=0;i<keys2.length;++i){var primKey=results?results[i]:keys2[i],ctx=contexts[i];null==primKey?ctx.onerror&&ctx.onerror(failures[i]):ctx.onsuccess&&ctx.onsuccess("put"===req2.type&&existingValues[i]?req2.values[i]:primKey)}return{failures:failures,results:results,numFailures:numFailures,lastResult:lastResult}})).catch((function(error){return contexts.forEach((function(ctx){return ctx.onerror&&ctx.onerror(error)})),Promise.reject(error)}))}))}function deleteNextChunk(trans,range,limit){return downTable.query({trans:trans,values:!1,query:{index:primaryKey,range:range},limit:limit}).then((function(_a4){var result=_a4.result;return addPutOrDelete({type:"delete",keys:result,trans:trans}).then((function(res){return res.numFailures>0?Promise.reject(res.failures[0]):result.length<limit?{failures:[],numFailures:0,lastResult:void 0}:deleteNextChunk(trans,__assign(__assign({},range),{lower:result[result.length-1],lowerOpen:!0}),limit)}))}))}}})}})}};function getFromTransactionCache(keys2,cache,clone){try{if(!cache)return null;if(cache.keys.length<keys2.length)return null;for(var result=[],i=0,j=0;i<cache.keys.length&&j<keys2.length;++i)0===cmp(cache.keys[i],keys2[j])&&(result.push(clone?deepClone(cache.values[i]):cache.values[i]),++j);return result.length===keys2.length?result:null}catch(_a3){return null}}var _a,cacheExistingValuesMiddleware={stack:"dbcore",level:-1,create:function(core){return{table:function(tableName){var table=core.table(tableName);return __assign(__assign({},table),{getMany:function(req){if(!req.cache)return table.getMany(req);var cachedResult=getFromTransactionCache(req.keys,req.trans._cache,"clone"===req.cache);return cachedResult?DexiePromise.resolve(cachedResult):table.getMany(req).then((function(res){return req.trans._cache={keys:req.keys,values:"clone"===req.cache?deepClone(res):res},res}))},mutate:function(req){return"add"!==req.type&&(req.trans._cache=null),table.mutate(req)}})}}}};function isEmptyRange(node){return!("from"in node)}var RangeSet=function(fromOrTree,to){if(!this){var rv=new RangeSet;return fromOrTree&&"d"in fromOrTree&&extend(rv,fromOrTree),rv}extend(this,arguments.length?{d:1,from:fromOrTree,to:arguments.length>1?to:fromOrTree}:{d:0})};function addRange(target,from,to){var diff=cmp(from,to);if(!isNaN(diff)){if(diff>0)throw RangeError();if(isEmptyRange(target))return extend(target,{from:from,to:to,d:1});var left=target.l,right=target.r;if(cmp(to,target.from)<0)return left?addRange(left,from,to):target.l={from:from,to:to,d:1,l:null,r:null},rebalance(target);if(cmp(from,target.to)>0)return right?addRange(right,from,to):target.r={from:from,to:to,d:1,l:null,r:null},rebalance(target);cmp(from,target.from)<0&&(target.from=from,target.l=null,target.d=right?right.d+1:1),cmp(to,target.to)>0&&(target.to=to,target.r=null,target.d=target.l?target.l.d+1:1);var rightWasCutOff=!target.r;left&&!target.l&&mergeRanges(target,left),right&&rightWasCutOff&&mergeRanges(target,right)}}function mergeRanges(target,newSet){isEmptyRange(newSet)||function _addRangeSet(target2,_a3){var from=_a3.from,to=_a3.to,l=_a3.l,r=_a3.r;addRange(target2,from,to),l&&_addRangeSet(target2,l),r&&_addRangeSet(target2,r)}(target,newSet)}function getRangeSetIterator(node){var state=isEmptyRange(node)?null:{s:0,n:node};return{next:function(key){for(var keyProvided=arguments.length>0;state;)switch(state.s){case 0:if(state.s=1,keyProvided)for(;state.n.l&&cmp(key,state.n.from)<0;)state={up:state,n:state.n.l,s:1};else for(;state.n.l;)state={up:state,n:state.n.l,s:1};case 1:if(state.s=2,!keyProvided||cmp(key,state.n.to)<=0)return{value:state.n,done:!1};case 2:if(state.n.r){state.s=3,state={up:state,n:state.n.r,s:0};continue}case 3:state=state.up}return{done:!0}}}}function rebalance(target){var _a3,_b,diff=((null===(_a3=target.r)||void 0===_a3?void 0:_a3.d)||0)-((null===(_b=target.l)||void 0===_b?void 0:_b.d)||0),r=diff>1?"r":diff<-1?"l":"";if(r){var l="r"===r?"l":"r",rootClone=__assign({},target),oldRootRight=target[r];target.from=oldRootRight.from,target.to=oldRootRight.to,target[r]=oldRootRight[r],rootClone[r]=oldRootRight[l],target[l]=rootClone,rootClone.d=computeDepth(rootClone)}target.d=computeDepth(target)}function computeDepth(_a3){var r=_a3.r,l=_a3.l;return(r?l?Math.max(r.d,l.d):r.d:l?l.d:0)+1}props(RangeSet.prototype,((_a={add:function(rangeSet){return mergeRanges(this,rangeSet),this},addKey:function(key){return addRange(this,key,key),this},addKeys:function(keys2){var _this=this;return keys2.forEach((function(key){return addRange(_this,key,key)})),this}})[iteratorSymbol]=function(){return getRangeSetIterator(this)},_a));var observabilityMiddleware={stack:"dbcore",level:0,create:function(core){var dbName=core.schema.name,FULL_RANGE=new RangeSet(core.MIN_KEY,core.MAX_KEY);return __assign(__assign({},core),{table:function(tableName){var table=core.table(tableName),schema=table.schema,primaryKey=schema.primaryKey,extractKey=primaryKey.extractKey,outbound=primaryKey.outbound,tableClone=__assign(__assign({},table),{mutate:function(req){var trans=req.trans,mutatedParts=trans.mutatedParts||(trans.mutatedParts={}),getRangeSet=function(indexName){var part="idb://"+dbName+"/"+tableName+"/"+indexName;return mutatedParts[part]||(mutatedParts[part]=new RangeSet)},pkRangeSet=getRangeSet(""),delsRangeSet=getRangeSet(":dels"),type2=req.type,_a3="deleteRange"===req.type?[req.range]:"delete"===req.type?[req.keys]:req.values.length<50?[[],req.values]:[],keys2=_a3[0],newObjs=_a3[1],oldCache=req.trans._cache;return table.mutate(req).then((function(res){if(isArray(keys2)){"delete"!==type2&&(keys2=res.results),pkRangeSet.addKeys(keys2);var oldObjs=getFromTransactionCache(keys2,oldCache);oldObjs||"add"===type2||delsRangeSet.addKeys(keys2),(oldObjs||newObjs)&&function trackAffectedIndexes(getRangeSet,schema,oldObjs,newObjs){function addAffectedIndex(ix){var rangeSet=getRangeSet(ix.name||"");function extractKey(obj){return null!=obj?ix.extractKey(obj):null}var addKeyOrKeys=function(key){return ix.multiEntry&&isArray(key)?key.forEach((function(key2){return rangeSet.addKey(key2)})):rangeSet.addKey(key)};(oldObjs||newObjs).forEach((function(_,i){var oldKey=oldObjs&&extractKey(oldObjs[i]),newKey=newObjs&&extractKey(newObjs[i]);0!==cmp(oldKey,newKey)&&(null!=oldKey&&addKeyOrKeys(oldKey),null!=newKey&&addKeyOrKeys(newKey))}))}schema.indexes.forEach(addAffectedIndex)}(getRangeSet,schema,oldObjs,newObjs)}else if(keys2){var range={from:keys2.lower,to:keys2.upper};delsRangeSet.add(range),pkRangeSet.add(range)}else pkRangeSet.add(FULL_RANGE),delsRangeSet.add(FULL_RANGE),schema.indexes.forEach((function(idx){return getRangeSet(idx.name).add(FULL_RANGE)}));return res}))}}),getRange=function(_a3){var _b,_c,_d=_a3.query,index=_d.index,range=_d.range;return[index,new RangeSet(null!==(_b=range.lower)&&void 0!==_b?_b:core.MIN_KEY,null!==(_c=range.upper)&&void 0!==_c?_c:core.MAX_KEY)]},readSubscribers={get:function(req){return[primaryKey,new RangeSet(req.key)]},getMany:function(req){return[primaryKey,(new RangeSet).addKeys(req.keys)]},count:getRange,query:getRange,openCursor:getRange};return keys(readSubscribers).forEach((function(method){tableClone[method]=function(req){var subscr=PSD.subscr;if(subscr){var getRangeSet=function(indexName){var part="idb://"+dbName+"/"+tableName+"/"+indexName;return subscr[part]||(subscr[part]=new RangeSet)},pkRangeSet_1=getRangeSet(""),delsRangeSet_1=getRangeSet(":dels"),_a3=readSubscribers[method](req),queriedIndex=_a3[0],queriedRanges=_a3[1];if(getRangeSet(queriedIndex.name||"").add(queriedRanges),!queriedIndex.isPrimaryKey){if("count"!==method){var keysPromise_1="query"===method&&outbound&&req.values&&table.query(__assign(__assign({},req),{values:!1}));return table[method].apply(this,arguments).then((function(res){if("query"===method){if(outbound&&req.values)return keysPromise_1.then((function(_a4){var resultingKeys=_a4.result;return pkRangeSet_1.addKeys(resultingKeys),res}));var pKeys=req.values?res.result.map(extractKey):res.result;req.values?pkRangeSet_1.addKeys(pKeys):delsRangeSet_1.addKeys(pKeys)}else if("openCursor"===method){var cursor_1=res,wantValues_1=req.values;return cursor_1&&Object.create(cursor_1,{key:{get:function(){return delsRangeSet_1.addKey(cursor_1.primaryKey),cursor_1.key}},primaryKey:{get:function(){var pkey=cursor_1.primaryKey;return delsRangeSet_1.addKey(pkey),pkey}},value:{get:function(){return wantValues_1&&pkRangeSet_1.addKey(cursor_1.primaryKey),cursor_1.value}}})}return res}))}delsRangeSet_1.add(FULL_RANGE)}}return table[method].apply(this,arguments)}})),tableClone}})}};var domDeps,Dexie$1=function(){function Dexie2(name,options){var _this=this;this._middlewares={},this.verno=0;var deps=Dexie2.dependencies;this._options=options=__assign({addons:Dexie2.addons,autoOpen:!0,indexedDB:deps.indexedDB,IDBKeyRange:deps.IDBKeyRange},options),this._deps={indexedDB:options.indexedDB,IDBKeyRange:options.IDBKeyRange};var addons=options.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var state={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:nop,dbReadyPromise:null,cancelOpen:nop,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};state.dbReadyPromise=new DexiePromise((function(resolve){state.dbReadyResolve=resolve})),state.openCanceller=new DexiePromise((function(_,reject){state.cancelOpen=reject})),this._state=state,this.name=name,this.on=Events(this,"populate","blocked","versionchange","close",{ready:[promisableChain,nop]}),this.on.ready.subscribe=override(this.on.ready.subscribe,(function(subscribe){return function(subscriber,bSticky){Dexie2.vip((function(){var state2=_this._state;if(state2.openComplete)state2.dbOpenError||DexiePromise.resolve().then(subscriber),bSticky&&subscribe(subscriber);else if(state2.onReadyBeingFired)state2.onReadyBeingFired.push(subscriber),bSticky&&subscribe(subscriber);else{subscribe(subscriber);var db_1=_this;bSticky||subscribe((function unsubscribe(){db_1.on.ready.unsubscribe(subscriber),db_1.on.ready.unsubscribe(unsubscribe)}))}}))}})),this.Collection=function createCollectionConstructor(db2){return makeClassConstructor(Collection.prototype,(function Collection2(whereClause,keyRangeGenerator){this.db=db2;var keyRange=AnyRange,error=null;if(keyRangeGenerator)try{keyRange=keyRangeGenerator()}catch(ex){error=ex}var whereCtx=whereClause._ctx,table=whereCtx.table,readingHook=table.hook.reading.fire;this._ctx={table:table,index:whereCtx.index,isPrimKey:!whereCtx.index||table.schema.primKey.keyPath&&whereCtx.index===table.schema.primKey.name,range:keyRange,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:error,or:whereCtx.or,valueMapper:readingHook!==mirror?readingHook:null}}))}(this),this.Table=function createTableConstructor(db2){return makeClassConstructor(Table.prototype,(function Table2(name,tableSchema,trans){this.db=db2,this._tx=trans,this.name=name,this.schema=tableSchema,this.hook=db2._allTables[name]?db2._allTables[name].hook:Events(null,{creating:[hookCreatingChain,nop],reading:[pureFunctionChain,mirror],updating:[hookUpdatingChain,nop],deleting:[hookDeletingChain,nop]})}))}(this),this.Transaction=function createTransactionConstructor(db2){return makeClassConstructor(Transaction.prototype,(function Transaction2(mode,storeNames,dbschema,chromeTransactionDurability,parent){var _this=this;this.db=db2,this.mode=mode,this.storeNames=storeNames,this.schema=dbschema,this.chromeTransactionDurability=chromeTransactionDurability,this.idbtrans=null,this.on=Events(this,"complete","error","abort"),this.parent=parent||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new DexiePromise((function(resolve,reject){_this._resolve=resolve,_this._reject=reject})),this._completion.then((function(){_this.active=!1,_this.on.complete.fire()}),(function(e){var wasActive=_this.active;return _this.active=!1,_this.on.error.fire(e),_this.parent?_this.parent._reject(e):wasActive&&_this.idbtrans&&_this.idbtrans.abort(),rejection(e)}))}))}(this),this.Version=function createVersionConstructor(db2){return makeClassConstructor(Version.prototype,(function Version2(versionNumber){this.db=db2,this._cfg={version:versionNumber,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}(this),this.WhereClause=function createWhereClauseConstructor(db2){return makeClassConstructor(WhereClause.prototype,(function WhereClause2(table,index,orCollection){this.db=db2,this._ctx={table:table,index:":id"===index?null:index,or:orCollection};var indexedDB2=db2._deps.indexedDB;if(!indexedDB2)throw new exceptions.MissingAPI;this._cmp=this._ascending=indexedDB2.cmp.bind(indexedDB2),this._descending=function(a,b){return indexedDB2.cmp(b,a)},this._max=function(a,b){return indexedDB2.cmp(a,b)>0?a:b},this._min=function(a,b){return indexedDB2.cmp(a,b)<0?a:b},this._IDBKeyRange=db2._deps.IDBKeyRange}))}(this),this.on("versionchange",(function(ev){ev.newVersion>0?console.warn("Another connection wants to upgrade database '"+_this.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+_this.name+"'. Closing db now to resume the delete request."),_this.close()})),this.on("blocked",(function(ev){!ev.newVersion||ev.newVersion<ev.oldVersion?console.warn("Dexie.delete('"+_this.name+"') was blocked"):console.warn("Upgrade '"+_this.name+"' blocked by other connection holding version "+ev.oldVersion/10)})),this._maxKey=getMaxKey(options.IDBKeyRange),this._createTransaction=function(mode,storeNames,dbschema,parentTransaction){return new _this.Transaction(mode,storeNames,dbschema,_this._options.chromeTransactionDurability,parentTransaction)},this._fireOnBlocked=function(ev){_this.on("blocked").fire(ev),connections.filter((function(c){return c.name===_this.name&&c!==_this&&!c._state.vcFired})).map((function(c){return c.on("versionchange").fire(ev)}))},this.use(virtualIndexMiddleware),this.use(hooksMiddleware),this.use(observabilityMiddleware),this.use(cacheExistingValuesMiddleware),this.vip=Object.create(this,{_vip:{value:!0}}),addons.forEach((function(addon){return addon(_this)}))}return Dexie2.prototype.version=function(versionNumber){if(isNaN(versionNumber)||versionNumber<.1)throw new exceptions.Type("Given version is not a positive number");if(versionNumber=Math.round(10*versionNumber)/10,this.idbdb||this._state.isBeingOpened)throw new exceptions.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,versionNumber);var versions=this._versions,versionInstance=versions.filter((function(v){return v._cfg.version===versionNumber}))[0];return versionInstance||(versionInstance=new this.Version(versionNumber),versions.push(versionInstance),versions.sort(lowerVersionFirst),versionInstance.stores({}),this._state.autoSchema=!1,versionInstance)},Dexie2.prototype._whenReady=function(fn){var _this=this;return this.idbdb&&(this._state.openComplete||PSD.letThrough||this._vip)?fn():new DexiePromise((function(resolve,reject){if(_this._state.openComplete)return reject(new exceptions.DatabaseClosed(_this._state.dbOpenError));if(!_this._state.isBeingOpened){if(!_this._options.autoOpen)return void reject(new exceptions.DatabaseClosed);_this.open().catch(nop)}_this._state.dbReadyPromise.then(resolve,reject)})).then(fn)},Dexie2.prototype.use=function(_a3){var stack=_a3.stack,create=_a3.create,level=_a3.level,name=_a3.name;name&&this.unuse({stack:stack,name:name});var middlewares=this._middlewares[stack]||(this._middlewares[stack]=[]);return middlewares.push({stack:stack,create:create,level:null==level?10:level,name:name}),middlewares.sort((function(a,b){return a.level-b.level})),this},Dexie2.prototype.unuse=function(_a3){var stack=_a3.stack,name=_a3.name,create=_a3.create;return stack&&this._middlewares[stack]&&(this._middlewares[stack]=this._middlewares[stack].filter((function(mw){return create?mw.create!==create:!!name&&mw.name!==name}))),this},Dexie2.prototype.open=function(){return dexieOpen(this)},Dexie2.prototype._close=function(){var state=this._state,idx=connections.indexOf(this);if(idx>=0&&connections.splice(idx,1),this.idbdb){try{this.idbdb.close()}catch(e){}this._novip.idbdb=null}state.dbReadyPromise=new DexiePromise((function(resolve){state.dbReadyResolve=resolve})),state.openCanceller=new DexiePromise((function(_,reject){state.cancelOpen=reject}))},Dexie2.prototype.close=function(){this._close();var state=this._state;this._options.autoOpen=!1,state.dbOpenError=new exceptions.DatabaseClosed,state.isBeingOpened&&state.cancelOpen(state.dbOpenError)},Dexie2.prototype.delete=function(){var _this=this,hasArguments=arguments.length>0,state=this._state;return new DexiePromise((function(resolve,reject){var doDelete=function(){_this.close();var req=_this._deps.indexedDB.deleteDatabase(_this.name);req.onsuccess=wrap((function(){_onDatabaseDeleted(_this._deps,_this.name),resolve()})),req.onerror=eventRejectHandler(reject),req.onblocked=_this._fireOnBlocked};if(hasArguments)throw new exceptions.InvalidArgument("Arguments not allowed in db.delete()");state.isBeingOpened?state.dbReadyPromise.then(doDelete):doDelete()}))},Dexie2.prototype.backendDB=function(){return this.idbdb},Dexie2.prototype.isOpen=function(){return null!==this.idbdb},Dexie2.prototype.hasBeenClosed=function(){var dbOpenError=this._state.dbOpenError;return dbOpenError&&"DatabaseClosed"===dbOpenError.name},Dexie2.prototype.hasFailed=function(){return null!==this._state.dbOpenError},Dexie2.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Dexie2.prototype,"tables",{get:function(){var _this=this;return keys(this._allTables).map((function(name){return _this._allTables[name]}))},enumerable:!1,configurable:!0}),Dexie2.prototype.transaction=function(){var args=extractTransactionArgs.apply(this,arguments);return this._transaction.apply(this,args)},Dexie2.prototype._transaction=function(mode,tables,scopeFunc){var _this=this,parentTransaction=PSD.trans;parentTransaction&&parentTransaction.db===this&&-1===mode.indexOf("!")||(parentTransaction=null);var idbMode,storeNames,onlyIfCompatible=-1!==mode.indexOf("?");mode=mode.replace("!","").replace("?","");try{if(storeNames=tables.map((function(table){var storeName=table instanceof _this.Table?table.name:table;if("string"!=typeof storeName)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return storeName})),"r"==mode||"readonly"===mode)idbMode="readonly";else{if("rw"!=mode&&"readwrite"!=mode)throw new exceptions.InvalidArgument("Invalid transaction mode: "+mode);idbMode="readwrite"}if(parentTransaction){if("readonly"===parentTransaction.mode&&"readwrite"===idbMode){if(!onlyIfCompatible)throw new exceptions.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");parentTransaction=null}parentTransaction&&storeNames.forEach((function(storeName){if(parentTransaction&&-1===parentTransaction.storeNames.indexOf(storeName)){if(!onlyIfCompatible)throw new exceptions.SubTransaction("Table "+storeName+" not included in parent transaction.");parentTransaction=null}})),onlyIfCompatible&&parentTransaction&&!parentTransaction.active&&(parentTransaction=null)}}catch(e){return parentTransaction?parentTransaction._promise(null,(function(_,reject){reject(e)})):rejection(e)}var enterTransaction=enterTransactionScope.bind(null,this,idbMode,storeNames,parentTransaction,scopeFunc);return parentTransaction?parentTransaction._promise(idbMode,enterTransaction,"lock"):PSD.trans?usePSD(PSD.transless,(function(){return _this._whenReady(enterTransaction)})):this._whenReady(enterTransaction)},Dexie2.prototype.table=function(tableName){if(!hasOwn(this._allTables,tableName))throw new exceptions.InvalidTable("Table "+tableName+" does not exist");return this._allTables[tableName]},Dexie2}(),symbolObservable="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable",Observable=function(){function Observable2(subscribe){this._subscribe=subscribe}return Observable2.prototype.subscribe=function(x,error,complete){return this._subscribe(x&&"function"!=typeof x?x:{next:x,error:error,complete:complete})},Observable2.prototype[symbolObservable]=function(){return this},Observable2}();function extendObservabilitySet(target,newSet){return keys(newSet).forEach((function(part){mergeRanges(target[part]||(target[part]=new RangeSet),newSet[part])})),target}try{domDeps={indexedDB:_global.indexedDB||_global.mozIndexedDB||_global.webkitIndexedDB||_global.msIndexedDB,IDBKeyRange:_global.IDBKeyRange||_global.webkitIDBKeyRange}}catch(e){domDeps={indexedDB:null,IDBKeyRange:null}}var Dexie=Dexie$1;function propagateLocally(updateParts){var wasMe=propagatingLocally;try{propagatingLocally=!0,globalEvents.storagemutated.fire(updateParts)}finally{propagatingLocally=wasMe}}props(Dexie,__assign(__assign({},fullNameExceptions),{delete:function(databaseName){return new Dexie(databaseName,{addons:[]}).delete()},exists:function(name){return new Dexie(name,{addons:[]}).open().then((function(db2){return db2.close(),!0})).catch("NoSuchDatabaseError",(function(){return!1}))},getDatabaseNames:function(cb){try{return function getDatabaseNames(_a3){var indexedDB2=_a3.indexedDB,IDBKeyRange=_a3.IDBKeyRange;return hasDatabasesNative(indexedDB2)?Promise.resolve(indexedDB2.databases()).then((function(infos){return infos.map((function(info){return info.name})).filter((function(name){return"__dbnames"!==name}))})):getDbNamesTable(indexedDB2,IDBKeyRange).toCollection().primaryKeys()}(Dexie.dependencies).then(cb)}catch(_a3){return rejection(new exceptions.MissingAPI)}},defineClass:function(){return function Class(content){extend(this,content)}},ignoreTransaction:function(scopeFunc){return PSD.trans?usePSD(PSD.transless,scopeFunc):scopeFunc()},vip:vip,async:function(generatorFn){return function(){try{var rv=awaitIterator(generatorFn.apply(this,arguments));return rv&&"function"==typeof rv.then?rv:DexiePromise.resolve(rv)}catch(e){return rejection(e)}}},spawn:function(generatorFn,args,thiz){try{var rv=awaitIterator(generatorFn.apply(thiz,args||[]));return rv&&"function"==typeof rv.then?rv:DexiePromise.resolve(rv)}catch(e){return rejection(e)}},currentTransaction:{get:function(){return PSD.trans||null}},waitFor:function(promiseOrFunction,optionalTimeout){var promise=DexiePromise.resolve("function"==typeof promiseOrFunction?Dexie.ignoreTransaction(promiseOrFunction):promiseOrFunction).timeout(optionalTimeout||6e4);return PSD.trans?PSD.trans.waitFor(promise):promise},Promise:DexiePromise,debug:{get:function(){return debug},set:function(value){setDebug(value,"dexie"===value?function(){return!0}:dexieStackFrameFilter)}},derive:derive,extend:extend,props:props,override:override,Events:Events,on:globalEvents,liveQuery:function liveQuery(querier){return new Observable((function(observer){var scopeFuncIsAsync=isAsyncFunction(querier);var closed=!1,accumMuts={},currentObs={},subscription={get closed(){return closed},unsubscribe:function(){closed=!0,globalEvents.storagemutated.unsubscribe(mutationListener)}};observer.start&&observer.start(subscription);var querying=!1,startedListening=!1;function shouldNotify(){return keys(currentObs).some((function(key){return accumMuts[key]&&function rangesOverlap(rangeSet1,rangeSet2){var i1=getRangeSetIterator(rangeSet2),nextResult1=i1.next();if(nextResult1.done)return!1;for(var a=nextResult1.value,i2=getRangeSetIterator(rangeSet1),nextResult2=i2.next(a.from),b=nextResult2.value;!nextResult1.done&&!nextResult2.done;){if(cmp(b.from,a.to)<=0&&cmp(b.to,a.from)>=0)return!0;cmp(a.from,b.from)<0?a=(nextResult1=i1.next(b.from)).value:b=(nextResult2=i2.next(a.from)).value}return!1}(accumMuts[key],currentObs[key])}))}var mutationListener=function(parts){extendObservabilitySet(accumMuts,parts),shouldNotify()&&doQuery()},doQuery=function(){if(!querying&&!closed){accumMuts={};var subscr={},ret=function execute(subscr){scopeFuncIsAsync&&incrementExpectedAwaits();var exec=function(){return newScope(querier,{subscr:subscr,trans:null})},rv=PSD.trans?usePSD(PSD.transless,exec):exec();return scopeFuncIsAsync&&rv.then(decrementExpectedAwaits,decrementExpectedAwaits),rv}(subscr);startedListening||(globalEvents("storagemutated",mutationListener),startedListening=!0),querying=!0,Promise.resolve(ret).then((function(result){querying=!1,closed||(shouldNotify()?doQuery():(accumMuts={},currentObs=subscr,observer.next&&observer.next(result)))}),(function(err){querying=!1,observer.error&&observer.error(err),subscription.unsubscribe()}))}};return doQuery(),subscription}))},extendObservabilitySet:extendObservabilitySet,getByKeyPath:getByKeyPath,setByKeyPath:setByKeyPath,delByKeyPath:function delByKeyPath(obj,keyPath){"string"==typeof keyPath?setByKeyPath(obj,keyPath,void 0):"length"in keyPath&&[].map.call(keyPath,(function(kp){setByKeyPath(obj,kp,void 0)}))},shallowClone:shallowClone,deepClone:deepClone,getObjectDiff:getObjectDiff,cmp:cmp,asap:asap$1,minKey:-(1/0),addons:[],connections:connections,errnames:errnames,dependencies:domDeps,semVer:"3.2.2",version:"3.2.2".split(".").map((function(n){return parseInt(n)})).reduce((function(p2,c,i){return p2+c/Math.pow(10,2*i)}))})),Dexie.maxKey=getMaxKey(Dexie.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(globalEvents("storagemutated",(function(updatedParts){var event_1;propagatingLocally||(isIEOrEdge?(event_1=document.createEvent("CustomEvent")).initCustomEvent("x-storagemutated-1",!0,!0,updatedParts):event_1=new CustomEvent("x-storagemutated-1",{detail:updatedParts}),propagatingLocally=!0,dispatchEvent(event_1),propagatingLocally=!1)})),addEventListener("x-storagemutated-1",(function(_a3){var detail=_a3.detail;propagatingLocally||propagateLocally(detail)})));var propagatingLocally=!1;if("undefined"!=typeof BroadcastChannel){var bc_1=new BroadcastChannel("x-storagemutated-1");globalEvents("storagemutated",(function(changedParts){propagatingLocally||bc_1.postMessage(changedParts)})),bc_1.onmessage=function(ev){ev.data&&propagateLocally(ev.data)}}else if("undefined"!=typeof self&&"undefined"!=typeof navigator){globalEvents("storagemutated",(function(changedParts){try{propagatingLocally||("undefined"!=typeof localStorage&&localStorage.setItem("x-storagemutated-1",JSON.stringify({trig:Math.random(),changedParts:changedParts})),"object"==typeof self.clients&&__spreadArray([],self.clients.matchAll({includeUncontrolled:!0}),!0).forEach((function(client){return client.postMessage({type:"x-storagemutated-1",changedParts:changedParts})})))}catch(_a3){}})),"undefined"!=typeof addEventListener&&addEventListener("storage",(function(ev){if("x-storagemutated-1"===ev.key){var data2=JSON.parse(ev.newValue);data2&&propagateLocally(data2.changedParts)}}));var swContainer=self.document&&navigator.serviceWorker;swContainer&&swContainer.addEventListener("message",(function propagateMessageLocally(_a3){var data2=_a3.data;data2&&"x-storagemutated-1"===data2.type&&propagateLocally(data2.changedParts)}))}DexiePromise.rejectionMapper=function mapError(domError,message){if(!domError||domError instanceof DexieError||domError instanceof TypeError||domError instanceof SyntaxError||!domError.name||!exceptionMap[domError.name])return domError;var rv=new exceptionMap[domError.name](message||domError.message,domError);return"stack"in domError&&setProp(rv,"stack",{get:function(){return this.inner.stack}}),rv},setDebug(debug,dexieStackFrameFilter);const db=new class IdleBitDB extends Dexie$1{constructor(){super("idle-bit"),__publicField(this,"save"),this.version(1).stores({save:",data"})}},_Disk=class{constructor(id,capacity){__publicField(this,"id"),__publicField(this,"_capacity",_Disk.DEFAULTS.capacity),__publicField(this,"capacityCostManager"),__publicField(this,"floatBits",_Disk.DEFAULTS.bits),this.id=id,this.capacity=capacity,this.capacityCostManager=new CostManager(16*1.05**this.id,((amount,prevCost)=>prevCost**1.07),{initialAmount:8,incrementer:prevAmount=>2*prevAmount})}static fromSchema(schema){const disk=new _Disk(schema.id,schema.capacity);return disk.floatBits=schema.bits,disk}get diskLetter(){let letterID=this.id+2;const digits=[];for(;letterID>0;){const nextDigit=letterID%26+1;letterID=(letterID-nextDigit)/26,digits.push(nextDigit)}return digits.reduce(((letters,digit)=>String.fromCharCode(64+digit)+letters),"")}get nameWithoutLetter(){return`${formatBits(this.capacity,!0)} Disk`}get name(){return`${this.nameWithoutLetter} (${this.diskLetter}:)`}get capacity(){return this._capacity}set capacity(capacity){this._capacity=capacity}get capacityPurchase(){return new Purchase("x2 Capacity",this.capacityCostManager.getNextCostAt(this.capacity),(()=>this.capacity*=2))}get bits(){return Math.floor(this.floatBits)}get isFull(){return this.bits>=this.capacity}get schema(){return _Disk.CODEC.parse(this)}increment(bits=1){this.floatBits=Math.min(this.floatBits+bits,this.capacity)}drain(bits){const depleted=Math.min(bits,this.bits);return this.floatBits-=depleted,depleted}upgradeStorage(){this.capacity*=2}};let Disk=_Disk;__publicField(Disk,"DEFAULTS",{capacity:8,bits:0}),__publicField(Disk,"CODEC",mod.object({capacity:mod.number().default(_Disk.DEFAULTS.capacity),bits:mod.number().default(_Disk.DEFAULTS.bits),id:mod.number()}));const _PlayerStats=class{constructor(){__publicField(this,"maxBits",0),__publicField(this,"chipCount",0),__publicField(this,"boughtCloud",!1),__publicField(this,"_bitsPerSecond",0)}get schema(){return _PlayerStats.CODEC.parse(this)}set schema(schema){schema??(schema={}),this.maxBits=schema.maxBits??_PlayerStats.DEFAULTS.maxBits}get bitsPerSecond(){return this._bitsPerSecond}set bitsPerSecond(bitsPerSecond){this._bitsPerSecond=bitsPerSecond}get chipsUnlocked(){return this.chipCount>0||this.maxBits>25}get cloudUnlocked(){return this.boughtCloud||this.maxBits>=256}get internetUnlocked(){return this.cloudUnlocked}update(player2){player2.bits>this.maxBits&&(this.maxBits=player2.bits),this.chipCount=player2.chips.length,this.boughtCloud=null!==player2.cloud,this.bitsPerSecond=player2.chips.reduce(((bps,chip)=>bps+chip.bitsPerSecond),0)}};let PlayerStats=_PlayerStats;__publicField(PlayerStats,"CODEC",mod.object({maxBits:mod.number()}).partial()),__publicField(PlayerStats,"DEFAULTS",{maxBits:0});const _Cloud=class{constructor(){__publicField(this,"_bits",_Cloud.DEFAULTS.bits),__publicField(this,"_uploadSpeed",_Cloud.DEFAULTS.uploadSpeed),__publicField(this,"uploadStartTime",_Cloud.DEFAULTS.uploadStartTime),__publicField(this,"currentUploadedBits",_Cloud.DEFAULTS.currentUploadedBits),__publicField(this,"_uploadSpeedCostManager",new CostManager(512,((amount,prevCost)=>prevCost**1.0635),{initialAmount:64,incrementer:prevAmount=>2*prevAmount}))}static fromSchema(schema){const cloud=new _Cloud;return cloud.schema=schema,cloud}set schema(schema){this.bits=schema.bits,this.uploadSpeed=schema.uploadSpeed}get bits(){return this._bits}set bits(bits){this._bits=bits}get uploadSpeed(){return this._uploadSpeed}set uploadSpeed(uploadSpeed){this._uploadSpeed=uploadSpeed}get uploadSpeedPurchase(){return new Purchase("x2 Upload Speed",this._uploadSpeedCostManager.getNextCostAt(this.uploadSpeed),(()=>this.uploadSpeed*=2))}startUpload(){null===this.uploadStartTime&&(this.uploadStartTime=Date.now(),this.currentUploadedBits=0)}upload(bits){if(null===this.uploadStartTime)return 0;const maxUploadableBits=Math.floor(this.uploadProgress*this.uploadSpeed)-this.currentUploadedBits,uploadableBits=Math.max(Math.min(bits,maxUploadableBits),0);return this.bits+=uploadableBits,this.currentUploadedBits+=uploadableBits,(this.currentUploadedBits>=this.uploadSpeed||bits<=maxUploadableBits)&&(this.uploadStartTime=null),uploadableBits}drain(bits){const bitsDrained=Math.min(bits,this.bits);return this.bits-=bitsDrained,bitsDrained}get uploadProgress(){return null===this.uploadStartTime?0:Math.min((Date.now()-this.uploadStartTime)/_Cloud.UPLOAD_MILLIS,1)}};let Cloud=_Cloud;__publicField(Cloud,"DEFAULTS",{bits:0,uploadSpeed:64,uploadStartTime:null,currentUploadedBits:0}),__publicField(Cloud,"CODEC",mod.object({bits:mod.number().default(_Cloud.DEFAULTS.bits),uploadSpeed:mod.number().default(_Cloud.DEFAULTS.uploadSpeed),uploadStartTime:mod.nullable(mod.number()).default(_Cloud.DEFAULTS.currentUploadedBits),currentUploadedBits:mod.number().default(_Cloud.DEFAULTS.currentUploadedBits)})),__publicField(Cloud,"UPLOAD_MILLIS",1e3);const _Player=class{constructor(){__publicField(this,"_bits",0),__publicField(this,"_cloud",_Player.DEFAULTS.cloud),__publicField(this,"_disks",_Player.DEFAULTS.disks),__publicField(this,"_chips",_Player.DEFAULTS.chips),__publicField(this,"_diskCostManager",new CostManager(6,((amount,prevCost)=>amount<4?prevCost**2.1:prevCost**2.5),{initialAmount:1})),__publicField(this,"_chipCostManager",new CostManager(100,((amount,prevCost)=>amount<4?prevCost**1.15:prevCost**1.75))),__publicField(this,"_selection",null),__publicField(this,"_lastSaveTime",Date.now()),__publicField(this,"stats",_Player.DEFAULTS.stats)}get bits(){return this._bits}set bits(bits){this._bits=bits}get cloud(){return this._cloud}set cloud(cloud){this._cloud=cloud}get cloudPurchase(){return new Purchase("Buy Cloud Storage",325,(player2=>player2.cloud=new Cloud))}get bitsOnDisks(){return this.disks.reduce(((totalBits,disk)=>totalBits+disk.bits),0)}get bitsOnCloud(){var _a3;return(null==(_a3=this.cloud)?void 0:_a3.bits)??0}get disks(){return this._disks}set disks(disks){this._disks=disks}get chips(){return this._chips}set chips(chips){this._chips=chips}get nextDiskCost(){return this._diskCostManager.getNextCostAt(this.disks.length)}get nextChipCost(){return this._chipCostManager.getNextCostAt(this.chips.length)}get nextDiskPurchase(){return new Purchase(`Buy ${formatBits(8,!0)} Disk`,this.nextDiskCost,(player2=>player2.disks.push(new Disk(this.disks.length,8))))}get nextChipPurchase(){return new Purchase("Buy 1 Hz Chip",this.nextChipCost,(player2=>{player2.chips.push(new Chip)}))}get selection(){return this._selection}set selection(selection){this._selection=selection}get maxStorage(){return this.disks.reduce(((total,disk)=>total+disk.capacity),0)}get schema(){return _Player.SAVE_DATA_CODEC.parse(this)}set schema(schema){var _a3,_b;this.disks=(null==(_a3=schema.disks)?void 0:_a3.map((disk=>Disk.fromSchema(disk))))??_Player.DEFAULTS.disks,this.chips=(null==(_b=schema.chips)?void 0:_b.map((chip=>Chip.fromSchema(chip,this.disks))))??_Player.DEFAULTS.chips,this.cloud=schema.cloud?Cloud.fromSchema(schema.cloud):_Player.DEFAULTS.cloud,this.stats.schema=schema.stats,console.log("Imported save data!")}get saveData(){return function utf8ToBase64(str){return btoa(encodeURIComponent(str))}(JSON.stringify(this.schema))}set saveData(data2){if(null==data2)return;const parsed=JSON.parse(function base64ToUTF8(str){return decodeURIComponent(atob(str))}(data2)),decoded=_Player.SAVE_DATA_CODEC.parse(parsed);this.schema=decoded}get lastSaveTime(){return this._lastSaveTime}set lastSaveTime(lastSaveTime){this._lastSaveTime=lastSaveTime}get timeUntilAutosave(){return this.lastSaveTime+_Player.AUTOSAVE_COOLDOWN-Date.now()}decrementBits(bits){const requestedBitsToDrain=bits;let totalDrained=0;const drainedFromDisks=this.drainDisks(bits);if(totalDrained+=drainedFromDisks,(bits-=drainedFromDisks)>0&&null!==this.cloud){const drainedFromCloud=this.cloud.drain(bits);console.log(`Drained ${drainedFromCloud} bits from cloud`),totalDrained+=drainedFromCloud,bits-=drainedFromCloud}if(bits>0)throw alert("SERIOUS ERROR: Not enough bits to decrement!"),new Error("SERIOUS ERROR: Not enough bits to decrement!");if(totalDrained>requestedBitsToDrain)throw alert("SERIOUS ERROR: Drained too many bits!"),new Error("SERIOUS ERROR: Drained too many bits!")}drainDisks(bits){const drainRecursive=(bits2,disks)=>{if(disks=disks.filter((disk=>disk.bits>0)),bits2<=0||0===disks.length)return 0;let minBits=bits2;const sortedDisks=disks.slice().sort(((a,b)=>(minBits=Math.min(minBits,a.bits,b.bits),b.bits/b.capacity-a.bits/a.capacity||b.capacity-a.capacity)));let drained=0;for(const disk of sortedDisks){const diskDrained=disk.drain(Math.min(minBits,bits2));if(drained+=diskDrained,(bits2-=diskDrained)<=0)break}return drainRecursive(bits2,sortedDisks)+drained},totalDrained=drainRecursive(bits,this.disks);if(totalDrained>bits)throw alert("SERIOUS ERROR: Drained more bits than requested!"),new Error("SERIOUS ERROR: Drained more bits than requested!");return totalDrained}save(){db.save.put({data:this.saveData},0),console.log("Saved!"),this.lastSaveTime=Date.now()}update(){-1===this.lastSaveTime&&(this.lastSaveTime=Date.now()),Date.now()>=this.lastSaveTime+_Player.AUTOSAVE_COOLDOWN&&this.save();for(const chip of this.chips)chip.cycle();if(null!==this.cloud){const uploadedBits=this.cloud.upload(this.bitsOnDisks);this.drainDisks(uploadedBits)}this.bits=this.bitsOnDisks+this.bitsOnCloud,this.stats.update(this)}interactWithDisk(disk){this.selection=disk,disk.increment()}interactWithChip(chip){this.selection=chip}canAfford(cost){return this.bits>=cost}buyPurchase(purchase){const{cost:cost,callback:callback}=purchase;this.canAfford(cost)&&(this.decrementBits(cost),callback(this))}interactWithCloud(){null!==this.cloud&&(this.cloud.startUpload(),this.selection=this.cloud)}};let Player=_Player;__publicField(Player,"DEFAULTS",{get disks(){return[new Disk(0,8)]},get chips(){return[]},cloud:null,get stats(){return new PlayerStats}}),__publicField(Player,"SAVE_DATA_CODEC",mod.object({disks:mod.array(Disk.CODEC).default(_Player.DEFAULTS.disks),chips:mod.array(Chip.CODEC).default(_Player.DEFAULTS.chips),cloud:mod.nullable(Cloud.CODEC).default(_Player.DEFAULTS.cloud),stats:PlayerStats.CODEC.default(_Player.DEFAULTS.stats.schema)}).partial()),__publicField(Player,"AUTOSAVE_COOLDOWN",1e4),__publicField(Player,"INSTANCE",new _Player);const player=Player.INSTANCE,components=[];function registerComponent(component){null!==component&&components.push(component)}const _hoisted_1$9=createBaseVNode("br",null,null,-1),_hoisted_2$9=createBaseVNode("br",null,null,-1),_sfc_main$a=defineComponent({__name:"Upgrade",props:{upgrade:{type:Object,required:!0}},setup:__props=>(registerComponent(getCurrentInstance()),(_ctx,_cache)=>(openBlock(),createElementBlock("div",{class:"upgrade",onClick:_cache[0]||(_cache[0]=$event=>unref(player).buyPurchase(__props.upgrade)),style:normalizeStyle({backgroundColor:unref(player).canAfford(__props.upgrade.cost)?"yellow":"white"})},[createBaseVNode("span",null,toDisplayString(__props.upgrade.name),1),_hoisted_1$9,createBaseVNode("span",null,"Cost: "+toDisplayString(unref(formatBits)(__props.upgrade.cost)),1),_hoisted_2$9],4)))}),_hoisted_1$8={key:0,class:"panel"},_hoisted_2$8={class:"header"},_hoisted_3$6=createBaseVNode("br",null,null,-1),_hoisted_4$4={class:"decimal-value"},_hoisted_5$3=createBaseVNode("br",null,null,-1),_hoisted_6$3=createBaseVNode("br",null,null,-1),_hoisted_7$3={class:"upgrades-panel"},_hoisted_8$3=createBaseVNode("div",{class:"upgrades-header"},"Upgrades",-1),_sfc_main$9=defineComponent({__name:"DiskInfoPanel",props:{disk:{type:Object,required:!0}},setup:__props=>(registerComponent(getCurrentInstance()),(_ctx,_cache)=>__props.disk?(openBlock(),createElementBlock("div",_hoisted_1$8,[createBaseVNode("span",_hoisted_2$8,toDisplayString(__props.disk.name),1),_hoisted_3$6,createBaseVNode("span",_hoisted_4$4,"("+toDisplayString(unref(formatBits)(__props.disk.bits))+")",1),_hoisted_5$3,_hoisted_6$3,createBaseVNode("div",_hoisted_7$3,[_hoisted_8$3,createVNode(_sfc_main$a,{upgrade:__props.disk.capacityPurchase},null,8,["upgrade"])])])):createCommentVNode("",!0))}),_hoisted_1$7={class:"container"},_hoisted_2$7={class:"progress-bar"},_export_sfc=(sfc,props2)=>{const target=sfc.__vccOpts||sfc;for(const[key,val]of props2)target[key]=val;return target},ProgressBarBelow=_export_sfc(defineComponent({__name:"ProgressBarBelow",props:{progress:{type:Number,required:!0},color:{type:String,required:!1,default:"#00aa00"}},setup:__props=>(registerComponent(getCurrentInstance()),(_ctx,_cache)=>(openBlock(),createElementBlock("div",_hoisted_1$7,[renderSlot(_ctx.$slots,"default",{},void 0,!0),createBaseVNode("div",_hoisted_2$7,[createBaseVNode("div",{style:normalizeStyle({backgroundColor:__props.color,width:100*__props.progress+"%",height:"100%"})},null,4)])])))}),[["__scopeId","data-v-c90a8e96"]]),_hoisted_1$6={class:"container"},_hoisted_2$6={key:0},_hoisted_3$5={key:1},Overclockable=_export_sfc(defineComponent({__name:"Overclockable",props:{chip:{type:Object,required:!0},enabled:{type:Boolean,required:!1,default:!0}},setup:__props=>(registerComponent(getCurrentInstance()),(_ctx,_cache)=>(openBlock(),createElementBlock("div",_hoisted_1$6,[__props.enabled?(openBlock(),createElementBlock("span",_hoisted_2$6,[createVNode(ProgressBarBelow,{progress:__props.chip.overclockProgress},{default:withCtx((()=>[createVNode(ProgressBarBelow,{progress:__props.chip.overclockCooldownProgress,color:"#cc1199"},{default:withCtx((()=>[renderSlot(_ctx.$slots,"default",{},void 0,!0)])),_:3},8,["progress"])])),_:3},8,["progress"])])):(openBlock(),createElementBlock("span",_hoisted_3$5,[renderSlot(_ctx.$slots,"default",{},void 0,!0)]))])))}),[["__scopeId","data-v-cdefd7be"]]),_hoisted_1$5={key:0,class:"panel"},_hoisted_2$5={class:"header"},_hoisted_3$4=createBaseVNode("br",null,null,-1),_hoisted_4$3=createBaseVNode("option",{value:null},"None",-1),_hoisted_5$2=["value"],_hoisted_6$2=createBaseVNode("br",null,null,-1),_hoisted_7$2=createBaseVNode("br",null,null,-1),_hoisted_8$2={key:0},_hoisted_9$1=createBaseVNode("br",null,null,-1),_hoisted_10$1=createBaseVNode("br",null,null,-1),_hoisted_11$1=createBaseVNode("br",null,null,-1),_hoisted_12$1=createBaseVNode("br",null,null,-1),_hoisted_13$1={class:"upgrades-panel"},_hoisted_14$1=createBaseVNode("div",{class:"upgrades-header"},"Upgrades",-1),_sfc_main$6=defineComponent({__name:"ChipInfoPanel",props:{chip:{type:Object,required:!0}},setup:__props=>(registerComponent(getCurrentInstance()),(_ctx,_cache)=>__props.chip?(openBlock(),createElementBlock("div",_hoisted_1$5,[createBaseVNode("span",_hoisted_2$5,toDisplayString(__props.chip.name),1),_hoisted_3$4,createTextVNode(" Target Disk: "),withDirectives(createBaseVNode("select",{"onUpdate:modelValue":_cache[0]||(_cache[0]=$event=>__props.chip.targetDisk=$event),style:normalizeStyle({backgroundColor:null===__props.chip.targetDisk?"yellow":"white"})},[_hoisted_4$3,(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(player).disks,(disk=>(openBlock(),createElementBlock("option",{value:disk},toDisplayString(disk.name),9,_hoisted_5$2)))),256))],4),[[vModelSelect,__props.chip.targetDisk]]),_hoisted_6$2,_hoisted_7$2,__props.chip.overclock>0?(openBlock(),createElementBlock("span",_hoisted_8$2,[createVNode(Overclockable,{chip:__props.chip,style:{height:"2%"}},{default:withCtx((()=>[createBaseVNode("div",{class:"overclock",onClick:_cache[1]||(_cache[1]=$event=>__props.chip.activateOverclock())},[_hoisted_9$1,createTextVNode(" Overclock "+toDisplayString(__props.chip.overclock)+" ",1),_hoisted_10$1,_hoisted_11$1])])),_:1},8,["chip"]),_hoisted_12$1])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_13$1,[_hoisted_14$1,createVNode(_sfc_main$a,{upgrade:__props.chip.clockSpeedPurchase},null,8,["upgrade"]),createVNode(_sfc_main$a,{upgrade:__props.chip.overclockPurchase},null,8,["upgrade"])])])):createCommentVNode("",!0))}),_hoisted_1$4={key:0,class:"panel"},_hoisted_2$4=createBaseVNode("span",{class:"header"},"Cloud",-1),_hoisted_3$3=createBaseVNode("br",null,null,-1),_hoisted_4$2={class:"decimal-value"},_hoisted_5$1=createBaseVNode("br",null,null,-1),_hoisted_6$1=createBaseVNode("br",null,null,-1),_hoisted_7$1={class:"upgrades-panel"},_hoisted_8$1=createBaseVNode("div",{class:"upgrades-header"},"Upgrades",-1),_sfc_main$5=defineComponent({__name:"CloudInfoPanel",props:{cloud:{type:Object,required:!0}},setup:__props=>(registerComponent(getCurrentInstance()),(_ctx,_cache)=>__props.cloud?(openBlock(),createElementBlock("div",_hoisted_1$4,[_hoisted_2$4,_hoisted_3$3,createBaseVNode("span",_hoisted_4$2,"("+toDisplayString(__props.cloud.bits)+")",1),_hoisted_5$1,_hoisted_6$1,createBaseVNode("div",_hoisted_7$1,[_hoisted_8$1,createVNode(_sfc_main$a,{upgrade:__props.cloud.uploadSpeedPurchase},null,8,["upgrade"])])])):createCommentVNode("",!0))}),_sfc_main$4=defineComponent({__name:"InfoPanel",props:{selection:{type:Object,required:!0}},setup:__props=>(registerComponent(getCurrentInstance()),(_ctx,_cache)=>(openBlock(),createElementBlock(Fragment,null,[__props.selection instanceof unref(Disk)?(openBlock(),createBlock(_sfc_main$9,{key:0,disk:__props.selection},null,8,["disk"])):createCommentVNode("",!0),__props.selection instanceof unref(Chip)?(openBlock(),createBlock(_sfc_main$6,{key:1,chip:__props.selection},null,8,["chip"])):createCommentVNode("",!0),__props.selection instanceof unref(Cloud)?(openBlock(),createBlock(_sfc_main$5,{key:2,cloud:__props.selection},null,8,["cloud"])):createCommentVNode("",!0)],64)))}),_hoisted_1$3={class:"outer-container"},_hoisted_2$3={key:0,class:"ctext"},_hoisted_3$2={class:"inner-container"},_sfc_main$3=defineComponent({__name:"ObjectsContainer",props:{header:{type:String,required:!0},info:{type:String,required:!1}},setup:__props=>(registerComponent(getCurrentInstance()),(_ctx,_cache)=>(openBlock(),createElementBlock("div",_hoisted_1$3,[createBaseVNode("div",{class:normalizeClass(["cheader",__props.info?"":"ctext"])},toDisplayString(__props.header),3),__props.info?(openBlock(),createElementBlock("div",_hoisted_2$3,toDisplayString(__props.info),1)):createCommentVNode("",!0),createBaseVNode("div",_hoisted_3$2,[renderSlot(_ctx.$slots,"default")])])))}),data=generate();function generate(){return{savedOpacity:Math.max(1-(Date.now()-player.lastSaveTime)/5e3,0),exportSaveData:()=>{navigator.clipboard.writeText(player.saveData),alert("Save data copied to clipboard!")},importSaveData:()=>player.saveData=prompt("Enter your save data:"),resetSaveData:async()=>{confirm("Are you sure you want to reset your save data?")&&(await db.save.clear(),location.reload())}}}const _hoisted_1$2=createBaseVNode("div",{class:"info"},[createBaseVNode("div",null,"b0.0.0"),createBaseVNode("div",null,"TetroGem 2022")],-1),_hoisted_2$2={class:"info right-side"},_sfc_main$2=defineComponent({__name:"DebugInfoComponent",setup:__props=>(registerComponent(getCurrentInstance()),(_ctx,_cache)=>(openBlock(),createElementBlock(Fragment,null,[_hoisted_1$2,createBaseVNode("div",_hoisted_2$2,[createBaseVNode("div",{class:"saved",style:normalizeStyle({opacity:unref(data).savedOpacity})},"Saved!",4),createBaseVNode("div",null,"Next autosave in: "+toDisplayString(Math.ceil(unref(player).timeUntilAutosave/1e3))+"s",1),createBaseVNode("button",{onClick:_cache[0]||(_cache[0]=$event=>unref(player).save())},"Save"),createBaseVNode("button",{onClick:_cache[1]||(_cache[1]=$event=>unref(data).exportSaveData())},"Export"),createBaseVNode("button",{onClick:_cache[2]||(_cache[2]=$event=>unref(data).importSaveData())},"Import"),createBaseVNode("button",{onClick:_cache[3]||(_cache[3]=$event=>unref(data).resetSaveData()),style:{"background-color":"pink"}},"Reset")])],64)))});function estimateSecondsUntil(number,goal,increasePerSecond){return 0===increasePerSecond?0:(goal-number)/increasePerSecond}const _withScopeId$1=n=>(pushScopeId("data-v-2e3f6b83"),n=n(),popScopeId(),n),_hoisted_1$1={class:"disk-header"},_hoisted_2$1=_withScopeId$1((()=>createBaseVNode("br",null,null,-1))),_hoisted_3$1=_withScopeId$1((()=>createBaseVNode("br",null,null,-1))),_hoisted_4$1={class:"disk-value"},ChipComponent=_export_sfc(defineComponent({__name:"ChipComponent",props:{chip:{type:Object,required:!0}},setup:__props=>(registerComponent(getCurrentInstance()),(_ctx,_cache)=>(openBlock(),createBlock(Overclockable,{chip:__props.chip,enabled:__props.chip.overclock>0},{default:withCtx((()=>[createBaseVNode("div",{class:"disk disk-size",onClick:_cache[0]||(_cache[0]=$event=>unref(player).interactWithChip(__props.chip)),style:normalizeStyle({backgroundColor:null===__props.chip.targetDisk?"grey":0===__props.chip.bitsPerSecond?"red":unref(player).canAfford(__props.chip.clockSpeedPurchase.cost)||unref(player).canAfford(__props.chip.overclockPurchase.cost)?"yellow":"white"})},[createBaseVNode("span",_hoisted_1$1,toDisplayString(__props.chip.name),1),_hoisted_2$1,_hoisted_3$1,createBaseVNode("span",_hoisted_4$1,toDisplayString(null===__props.chip.targetDisk?"(Disabled)":`(${__props.chip.targetDisk.diskLetter}:)`),1)],4)])),_:1},8,["chip","enabled"])))}),[["__scopeId","data-v-2e3f6b83"]]),_withScopeId=n=>(pushScopeId("data-v-574969f0"),n=n(),popScopeId(),n),_hoisted_1={class:"bit-counter"},_hoisted_2={class:"containers-container"},_hoisted_3={class:"objects-containers"},_hoisted_4={class:"disk-header"},_hoisted_5=_withScopeId((()=>createBaseVNode("br",null,null,-1))),_hoisted_6=_withScopeId((()=>createBaseVNode("br",null,null,-1))),_hoisted_7=["onClick"],_hoisted_8={class:"disk-header"},_hoisted_9=_withScopeId((()=>createBaseVNode("br",null,null,-1))),_hoisted_10={class:"disk-header"},_hoisted_11=_withScopeId((()=>createBaseVNode("br",null,null,-1))),_hoisted_12=_withScopeId((()=>createBaseVNode("br",null,null,-1))),_hoisted_13={class:"disk-value"},_hoisted_14={class:"disk-header"},_hoisted_15=_withScopeId((()=>createBaseVNode("br",null,null,-1))),_hoisted_16=_withScopeId((()=>createBaseVNode("br",null,null,-1))),_hoisted_17={class:"disk-info"},_hoisted_18=_withScopeId((()=>createBaseVNode("br",null,null,-1))),_hoisted_19={class:"disk-header"},_hoisted_20=_withScopeId((()=>createBaseVNode("br",null,null,-1))),_hoisted_21=_withScopeId((()=>createBaseVNode("br",null,null,-1))),_hoisted_22={class:"disk-info"};function update(){player.update(),function update$1(){Object.assign(data,generate())}()}const app=((...args)=>{const app2=function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}().createApp(...args),{mount:mount}=app2;return app2.mount=containerOrSelector=>{const container=function normalizeContainer(container){if(isString(container)){return document.querySelector(container)}return container}(containerOrSelector);if(!container)return;const component=app2._component;isFunction(component)||component.render||component.template||(component.template=container.innerHTML),container.innerHTML="";const proxy=mount(container,!1,container instanceof SVGElement);return container instanceof Element&&(container.removeAttribute("v-cloak"),container.setAttribute("data-v-app","")),proxy},app2})(_export_sfc(defineComponent({__name:"App",setup:__props=>(registerComponent(getCurrentInstance()),(_ctx,_cache)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",_hoisted_1," You have "+toDisplayString(unref(formatBits)(unref(player).bits)),1),createBaseVNode("div",_hoisted_2,[createBaseVNode("div",_hoisted_3,[unref(player).stats.internetUnlocked?(openBlock(),createBlock(_sfc_main$3,{key:0,header:"Internet"},{default:withCtx((()=>[unref(player).stats.cloudUnlocked?(openBlock(),createBlock(_sfc_main$3,{key:0,header:"Cloud",info:null===unref(player).cloud?void 0:`Used ${unref(formatBits)(unref(player).bitsOnCloud)}, Uploading at ${unref(formatBits)(unref(player).cloud.uploadSpeed)}/s`},{default:withCtx((()=>[null===unref(player).cloud?(openBlock(),createElementBlock("div",{key:0,class:"cloud cloud-progress",onClick:_cache[0]||(_cache[0]=$event=>unref(player).buyPurchase(unref(player).cloudPurchase)),style:normalizeStyle({backgroundColor:unref(player).canAfford(unref(player).cloudPurchase.cost)?"yellow":"white"})},[createBaseVNode("span",_hoisted_4,toDisplayString(unref(player).cloudPurchase.name),1),_hoisted_5,createBaseVNode("span",null,"Cost: "+toDisplayString(unref(formatBits)(unref(player).cloudPurchase.cost)),1)],4)):createCommentVNode("",!0),null!==unref(player).cloud?(openBlock(),createBlock(ProgressBarBelow,{key:1,class:"cloud-progress",progress:unref(player).cloud.uploadProgress},{default:withCtx((()=>[createBaseVNode("div",{class:"cloud",onClick:_cache[1]||(_cache[1]=$event=>unref(player).interactWithCloud()),style:normalizeStyle({backgroundColor:unref(player).canAfford(unref(player).cloud.uploadSpeedPurchase.cost)?"yellow":"white"})}," Upload to Cloud ",4)])),_:1},8,["progress"])):createCommentVNode("",!0)])),_:1},8,["info"])):createCommentVNode("",!0)])),_:1})):createCommentVNode("",!0),_hoisted_6,createVNode(_sfc_main$3,{header:"Disks",info:`Used ${unref(formatBits)(unref(player).bitsOnDisks)} / ${unref(formatBits)(unref(player).maxStorage)}, Full in ${unref(formatTime)(unref(estimateSecondsUntil)(unref(player).bitsOnDisks,unref(player).maxStorage,unref(player).stats.bitsPerSecond))}`},{default:withCtx((()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(player).disks,(disk=>(openBlock(),createElementBlock("div",{class:"disk disk-size",onClick:$event=>unref(player).interactWithDisk(disk),style:normalizeStyle({backgroundColor:unref(player).canAfford(disk.capacityPurchase.cost)?"yellow":"white"})},[createBaseVNode("span",_hoisted_8,toDisplayString(disk.nameWithoutLetter),1),_hoisted_9,createBaseVNode("span",_hoisted_10,"("+toDisplayString(disk.diskLetter)+":)",1),_hoisted_11,_hoisted_12,createBaseVNode("span",_hoisted_13,toDisplayString(unref(formatBits)(disk.bits)),1)],12,_hoisted_7)))),256)),createBaseVNode("div",{class:"disk disk-buy disk-size",onClick:_cache[2]||(_cache[2]=$event=>unref(player).buyPurchase(unref(player).nextDiskPurchase)),style:normalizeStyle({backgroundColor:unref(player).canAfford(unref(player).nextDiskPurchase.cost)?"yellow":"white"})},[createBaseVNode("span",_hoisted_14,toDisplayString(unref(player).nextDiskPurchase.name),1),_hoisted_15,_hoisted_16,createBaseVNode("span",_hoisted_17,"Cost: "+toDisplayString(unref(formatBits)(unref(player).nextDiskPurchase.cost)),1)],4)])),_:1},8,["info"]),_hoisted_18,unref(player).stats.chipsUnlocked?(openBlock(),createBlock(_sfc_main$3,{key:1,header:"Chips",info:0===unref(player).chips.length?void 0:`Computing ${unref(formatBits)(unref(player).stats.bitsPerSecond)}/s`},{default:withCtx((()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(player).chips,(chip=>(openBlock(),createBlock(ChipComponent,{class:"disk-size",chip:chip},null,8,["chip"])))),256)),createBaseVNode("div",{class:"disk disk-buy disk-size",onClick:_cache[3]||(_cache[3]=$event=>unref(player).buyPurchase(unref(player).nextChipPurchase)),style:normalizeStyle({backgroundColor:unref(player).canAfford(unref(player).nextChipPurchase.cost)?"yellow":"white"})},[createBaseVNode("span",_hoisted_19,toDisplayString(unref(player).nextChipPurchase.name),1),_hoisted_20,_hoisted_21,createBaseVNode("span",_hoisted_22,"Cost: "+toDisplayString(unref(formatBits)(unref(player).nextChipPurchase.cost)),1)],4)])),_:1},8,["info"])):createCommentVNode("",!0)]),createVNode(_sfc_main$4,{selection:unref(player).selection},null,8,["selection"])]),createVNode(_sfc_main$2)],64)))}),[["__scopeId","data-v-574969f0"]]));!async function main(){await db.open();const res=await db.save.limit(1).first();if(console.log(res),void 0!==res)try{player.saveData=res.data}catch{alert("Failed to load save data. Resetting save data.")}setInterval((()=>{update(),function forceUpdateAll(){var _a3;for(const component of components)null==(_a3=component.proxy)||_a3.$forceUpdate()}()}),20),app.mount("#app")}();
